
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Functions &#8212; The Haiku Book  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/haiku.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/code.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="BInputDevice" href="input-device.html" />
    <link rel="prev" title="&lt;no title&gt;" href="example-table.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../../index.html">
          <span>API Documentation</span></a></h1>
        <h2 class="heading"><span>Functions</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="example-table.html">&lt;no title&gt;</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="input-device.html">BInputDevice</a>&#160;&#160;»
        </p>

      </div>
        
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Functions</a><ul>
<li><a class="reference internal" href="#mouse-functions">Mouse Functions</a><ul>
<li><a class="reference internal" href="#_CPPv4N9Functions15set_click_speedE9bigtime_t">set_click_speed</a></li>
<li><a class="reference internal" href="#_CPPv4N9Functions15get_click_speedEP9bigtime_t">get_click_speed</a></li>
<li><a class="reference internal" href="#_CPPv4N9Functions13set_mouse_mapE9mouse_map">set_mouse_map</a></li>
<li><a class="reference internal" href="#_CPPv4N9Functions13get_mouse_mapEP9mouse_map">get_mouse_map</a></li>
<li><a class="reference internal" href="#_CPPv4N9Functions14set_mouse_typeE10numButtons">set_mouse_type</a></li>
<li><a class="reference internal" href="#_CPPv4N9Functions14get_mouse_typeEP5int32">get_mouse_type</a></li>
<li><a class="reference internal" href="#_CPPv4N9Functions15set_mouse_speedE5int32">set_mouse_speed</a></li>
<li><a class="reference internal" href="#_CPPv4N9Functions15get_mouse_speedEP5int32">get_mouse_speed</a></li>
<li><a class="reference internal" href="#_CPPv4N9Functions22set_mouse_accelerationE5int32">set_mouse_acceleration</a></li>
<li><a class="reference internal" href="#_CPPv4N9Functions22get_mouse_accelerationEP5int32">get_mouse_acceleration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#keyboard-functions">Keyboard Functions</a><ul>
<li><a class="reference internal" href="#_CPPv4N9Functions12get_key_infoEP8key_info">get_key_info</a></li>
<li><a class="reference internal" href="#_CPPv4N9Functions11get_key_mapEPP7key_mapPPc">get_key_map</a></li>
<li><a class="reference internal" href="#_CPPv4N9Functions15get_keyboard_idEP6uint16">get_keyboard_id</a></li>
<li><a class="reference internal" href="#_CPPv4N9Functions9modifiersEv">modifiers</a></li>
<li><a class="reference internal" href="#_CPPv4N9Functions19set_key_repeat_rateE5int32">set_key_repeat_rate</a></li>
<li><a class="reference internal" href="#_CPPv4N9Functions19get_key_repeat_rateEP5int32">get_key_repeat_rate</a></li>
<li><a class="reference internal" href="#_CPPv4N9Functions20set_key_repeat_delayE9bigtime_t">set_key_repeat_delay</a></li>
<li><a class="reference internal" href="#_CPPv4N9Functions20get_key_repeat_delayEP9bigtime_t">get_key_repeat_delay</a></li>
<li><a class="reference internal" href="#_CPPv4N9Functions18set_keyboard_locksE6uint32">set_keyboard_locks</a></li>
<li><a class="reference internal" href="#_CPPv4N9Functions16set_modifier_keyE6uint326uint32">set_modifier_key</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>

        </div>
      </div>
          <div class="bodywrapper">
      <div class="content" role="main">
        
  <section id="functions">
<h1>Functions<a class="headerlink" href="#functions" title="Permalink to this heading">¶</a></h1>
<section id="mouse-functions">
<h2>Mouse Functions<a class="headerlink" href="#mouse-functions" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4N9Functions15set_click_speedE9bigtime_t">
</section>
<section id="_CPPv4N9Functions15get_click_speedEP9bigtime_t">
</section>
<h3>
set_click_speed(), get_click_speed()</h3><p>Declared in:  interface/InterfaceDefs.h</p>
<pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">set_click_speed</span><span class="sig-paren">(</span><span class="n">bigtime_t</span><span class="w"> </span><span class="n sig-param">interval</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">get_click_speed</span><span class="sig-paren">(</span><span class="n">bigtime_t</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">interval</span><span class="sig-paren">)</span></pre><p>These functions set and report the timing for multiple-clicks. For
successive mouse-down events to count as a multiple-click, they must
occur within the interval set by set_click_speed() and provided by
get_click_speed(). The
<span class="hparameter">interval</span> is measured in microseconds; it’s usually
set by the user in the Mouse preferences application. The smallest
possible interval is 100,000 microseconds (0.1 second).
If successful, these functions return <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code>;
if unsuccessful, they return
an error code, which may be just <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ERROR</span></code>.</p>
<section id="_CPPv4N9Functions13set_mouse_mapE9mouse_map">
</section>
<section id="_CPPv4N9Functions13get_mouse_mapEP9mouse_map">
</section>
<section id="_CPPv4N9Functions14set_mouse_typeE10numButtons">
</section>
<section id="_CPPv4N9Functions14get_mouse_typeEP5int32">
</section>
<section id="_CPPv4N9Functions15set_mouse_speedE5int32">
</section>
<section id="_CPPv4N9Functions15get_mouse_speedEP5int32">
</section>
<section id="_CPPv4N9Functions22set_mouse_accelerationE5int32">
</section>
<section id="_CPPv4N9Functions22get_mouse_accelerationEP5int32">
</section>
<h3>
set_mouse_map(), get_mouse_map(), set_mouse_type(), get_mouse_type(), set_mouse_speed(), get_mouse_speed(), set_mouse_acceleration(), get_mouse_acceleration()</h3><p>Declared in:  interface/InterfaceDefs.h</p>
<pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">set_mouse_map</span><span class="sig-paren">(</span><span class="n">mouse_map</span><span class="w"> </span><span class="n sig-param">map</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">get_mouse_map</span><span class="sig-paren">(</span><span class="n">mouse_map</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">map</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">set_mouse_type</span><span class="sig-paren">(</span><span class="n">numButtons</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">get_mouse_type</span><span class="sig-paren">(</span><span class="n">int32</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">numButtons</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">set_mouse_speed</span><span class="sig-paren">(</span><span class="n">int32</span><span class="w"> </span><span class="n sig-param">speed</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">get_mouse_speed</span><span class="sig-paren">(</span><span class="n">int32</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">speed</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">set_mouse_acceleration</span><span class="sig-paren">(</span><span class="n">int32</span><span class="w"> </span><span class="n sig-param">acceleration</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">get_mouse_acceleration</span><span class="sig-paren">(</span><span class="n">int32</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">acceleration</span><span class="sig-paren">)</span></pre><p>These functions configure the mouse and supply information about the
current configuration. The configuration should usually be left to the
user and the Mouse preferences application.
set_mouse_map() maps the buttons of the mouse to their roles in the user
interface, and get_mouse_map() writes the current map into the variable
referred to by <span class="hparameter">map</span>. The mouse_map structure has a field for each button
on a three-button mouse:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>uint32left</p></td>
<td><p>The button on the left of the mouse</p></td>
</tr>
<tr class="row-odd"><td><p>uint32right</p></td>
<td><p>The button on the right of the mouse</p></td>
</tr>
<tr class="row-even"><td><p>uint32middle</p></td>
<td><p>The button in the middle, between the other two buttons</p></td>
</tr>
</tbody>
</table>
<p>Each field is set to one of the following constants:</p>
<ul class="simple">
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_PRIMARY_MOUSE_BUTTON</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_SECONDARY_MOUSE_BUTTON</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_TERTIARY_MOUSE_BUTTON</span></code></p></li>
</ul>
<p>The same role can be assigned to more than one physical button. If all
three buttons are set to <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_PRIMARY_MOUSE_BUTTON</span></code>, they all function as the
primary button; if two of them are set to <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_SECONDARY_MOUSE_BUTTON</span></code>, they
both function as the secondary button; and so on.
set_mouse_type() informs the system of how many buttons the mouse
actually has. If it has two buttons, only the left and right fields of
the mouse_map are operative. If it has just one button, only the left
field is operative. set_mouse_type() writes the current number of buttons
into the variable referred to by <span class="hparameter">numButtons</span>.
set_mouse_speed() sets the speed of the mouse—the rate at which the
cursor image moves on-screen relative to the actual speed at which the
user moves the mouse on its pad. A speed value of 0 is the slowest
movement rate. The maximum rate is 20, though even 10 is too fast for
most users. get_mouse_speed() writes the current speed into the variable
referred to by <span class="hparameter">speed</span>.
set_mouse_acceleration() sets the mouse’s acceleration—the rate at
which the cursor image gains and loses speed as the user begins and
ceases moving the mouse. An acceleration value of 0 is the slowest
movement rate. The maximum rate is 20, though even 10 is too fast for
most users. get_mouse_acceleration() writes the current acceleration into
the variable referred to by <span class="hparameter">acceleration</span>.
All six functions return <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code> if successful, and an error code, typically
<code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ERROR</span></code>, if not.</p>
</section>
<section id="keyboard-functions">
<h2>Keyboard Functions<a class="headerlink" href="#keyboard-functions" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4N9Functions12get_key_infoEP8key_info">
</section>
<h3>
get_key_info()</h3><p>Declared in:  interface/InterfaceDefs.h</p>
<pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">get_key_info</span><span class="sig-paren">(</span><span class="n">key_info</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">keyInfo</span><span class="sig-paren">)</span></pre><p>Writes information about the state of the keyboard into the key_info
structure referred to by <span class="hparameter">keyInfo</span>. This function lets you get information
about the keyboard in the absence of <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_KEY_DOWN</span></code> messages. The key_info
structure has just two fields:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>uint32modifiers</p></td>
<td><p>A mask indicating which modifier keys are down and which keyboard locks are on.</p></td>
</tr>
<tr class="row-odd"><td><p>uint8key_states[16]</p></td>
<td><p>A bit array that records the state of all the keys on the keyboard, and all the keyboard locks. This array works identically to the “states” array passed in a key-down message. See “<span class="xref std std-ref">Key States</span>” in the <span class="xref std std-ref">The Keyboard</span> chapter for information on how to read information from the array.</p></td>
</tr>
</tbody>
</table>
<p>get_key_info() returns <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code>
if it was able to get the requested
information, and <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ERROR</span></code> if the return results are unreliable.
See also:
<a class="reference internal" href="../interface/view.html#_CPPv4N5BView7KeyDownEPKc5int32" title="BView::KeyDown"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">BView::KeyDown()</span></code></a>,
<span class="xref std std-ref">modifiers()</span></p>
<section id="_CPPv4N9Functions11get_key_mapEPP7key_mapPPc">
</section>
<h3>
get_key_map()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">get_key_map</span><span class="sig-paren">(</span><span class="n">key_map</span><span class="w"> </span><span class="p">*</span><span class="p">*</span><span class="n sig-param">keys</span>, <span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="p">*</span><span class="n sig-param">chars</span><span class="sig-paren">)</span></pre><p>Declared in: interface/InterfaceDefs.h
Provides a pointer to a copy of the system key map—the structure
that describes the role of each key on the keyboard. The pointers
returned by the function are yours; you must free() them when you’re
finished with them.</p>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>In versions of the BeOS before Release 4, the pointers used to belong
to the operating system. Now they’re yours to do with as you please.
Please update your applications as necessary to avoid leaking memory.</p>
</div>
<p>Through the Keymap preferences application, users can configure the
keyboard to their liking. The user’s preferences are stored in a file
(Key_map within the <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_USER_SETTINGS_DIRECTORY</span></code>, returned by the
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">directory()</span></code>
function). When the machine reboots, the key map is read
from this file. If the file doesn’t exist, the original map encoded in
the Application Server is used.
The key_map structure contains a large number of fields, but it can be
broken down into these six parts:
A version number.A series of fields that determine which keys will function as modifier keys—such as Shift, Control, or Num Lock.A field that sets the initial state of the keyboard locks in the default key map.A series of ordered tables that assign character values to keys. Except for a handful of modifier keys, all keys are mapped to characters, though they may not be mapped for all modifier combinations.A series of tables that locate the dead keys for diacritical marks and determine how a combination of a dead key plus another key is mapped to a particular character.A set of masks that determine which modifier keys are required for a key to be considered dead.
The following sections describe the parts of the key_map structure.
VersionThe first field of the key map is a version number:uint32 versionAn internal identifier for the key map.The version number doesn’t change when the user configures the keyboard, and shouldn’t be changed programmatically either. You can ignore it.
ModifiersModifier keys set states that affect other user actions on the keyboard and mouse. Eight modifier states are defined—Shift, Control, Option, Command, Menu, Caps Lock, Num Lock, and Scroll Lock. These states are discussed under “<span class="xref std std-ref">Modifier Keys</span>” in the <span class="xref std std-ref">Keyboard Information</span> appendix. They fairly closely match the key caps found on a Macintosh keyboard, but only partially match those on a standard PC keyboard—which generally has a set of Alt(ernate) keys, rarely Option keys, and only sometimes Command and Menu keys. Because of these differences, the mapping of keys to modifiers is the area of the key map most open to the user’s personal judgement and taste, and consequently to changes in the default configuration.Since two keys, one on the left and one on the right, can be mapped to the Shift, Control, Option, and Command modifiers, the keyboard can have as many as twelve modifier keys. The key_map structure has one field for each key:FieldDescriptionuint32 caps_keyThe key that functions as the Caps Lock key; by default, this is the key labeled “Caps Lock,” key 0x3b.uint32 scroll_keyThe key that functions as the Scroll Lock key; by default, this is the key labeled “Scroll Lock,” key 0x0f.uint32 num_keyThe key that functions as the Num Lock key; by default, this is the key labeled “Num Lock,” key 0x22.uint32 left_shift_keyA key that functions as a Shift key; by default, this is the key on the left labeled “Shift,” key 0x4b.uint32 right_shift_keyAnother key that functions as a Shift key; by default, this is the key on the right labeled “Shift,” key 0x56.uint32 left_command_keyA key that functions as a Command key; by default, this is key 0x5d, sometimes labeled “Alt.”uint32 right_command_keyAnother key that functions as a Command key; by default, this is key 0x5f, sometimes labeled “Alt.”uint32 left_control_keyA key that functions as a Control key; by default, this is the key labeled “Control” on the left, key 0x5c.uint32 right_control_keyAnother key that functions as a Control key; by default on keyboards that have Option keys, this key is the key labeled “Control” on the right, key 0x60. For keyboards that don’t have Option keys, this field is unmapped (its value is 0); key 0x60 is used as an Option key.uint32 left_option_keyA key that functions as an Option key; by default, this is key 0x66, which has different labels on different keyboards—“Option,” “Command,” or a Windows symbol. This key doesn’t exist on, and therefore isn’t mapped for, a standard 101-key keyboard.uint32 right_option_keyA key that functions as an Option key; by default, this is key 0x67, which has different labels on different keyboards—“Option,” “Command,” or a Windows symbol. For keyboards without this key, the field is mapped to the key labeled “Control” on the right, key 0x60.uint32 menu_keyA key that initiates keyboard navigation of the menu hierarchy; by default, this is the key labeled with a menu symbol, key 0x68. This key doesn’t exist on, and therefore isn’t mapped for, a standard 101-key keyboard.Each field names the key that functions as that modifier. For example, when the user holds down the key whose code is set in the right_option_key field, the <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OPTION_KEY</span></code> and <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_RIGHT_OPTION_KEY</span></code> bits are turned on in the modifiers mask that the <span class="xref std std-ref">modifiers()</span> function returns. When the user then strikes a character key, the <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OPTION_KEY</span></code> state influences the character that’s generated.If a modifier field is set to a value that doesn’t correspond to an actual key on the keyboard (including 0), that field is not mapped. No key fills that particular modifier role.
Keyboard locksOne field of the key map sets initial modifier states:FieldDescriptionuint32 lock_settingsA mask that determines which keyboard locks are turned on when the machine reboots or when the default key map is restored.The mask can be 0 or may contain any combination of these three constants:B_CAPS_LOCKB_SCROLL_LOCKB_NUM_LOCKIt’s 0 by default; there are no initial locks.Altering the lock_settings field has no effect unless the altered key map is made the default.
Character MapsThe principal job of the key map is to assign character values to keys. This is done in a series of nine tables:FieldDescriptionuint32 control_map [128]The characters that are produced when a Control key is down but both Command keys are up.uint32 option_caps_shift_map [128]The characters that are produced when Caps Lock is on and both a Shift key and an Option key are down.uint32 option_caps_map [128]The characters that are produced when Caps Lock is on and an Option key is down.uint32 option_shift_map [128]The characters that are produced when both a Shift key and an Option key are down.uint32 option_map [128]The characters that are produced when an Option key is down.uint32 caps_shift_map [128]The characters that are produced when Caps Lock is on and a Shift key is down.uint32 caps_map [128]The characters that are produced when Caps Lock is on.uint32 shift_map [128]The characters that are produced when a Shift key is down.uint32 normal_map [128]The characters that are produced when none of the other tables apply.Each of these tables is an array of 128 offsets into another array, the chars array of Unicode UTF-8 character encodings. get_key_map() provides a pointer to the chars array as its second argument.Key codes are used as indices into the character tables. The offset stored at any particular index maps a character to that key. For example, the code assigned to the M key is 0x52; at index 0x52 in the option_caps_map is an offset; at that offset in the chars array, you’ll find the character that’s mapped to the M key when an Option key is held down and Caps Lock is on.This indirection—an index to an offset to a character—is required because characters are encoded as Unicode UTF-8 strings. Character values of 127 or less (7-bit ASCII) are just a single byte, but UTF-8 takes two, three, or (rarely) four bytes to encode values over 127.The chars array represents each character as a Pascal string—the first byte in the string tells how many other bytes the string contains. For example, the string for the trademark symbol (™) looks like this:x03xE2x84xA2The first byte (x03) indicates that Unicode UTF-8 takes 3 bytes to represent the trademark symbol, and those bytes follow (xE2x84xA2). Pascal strings are not null-terminated.Here’s an example showing you how to decode the character tables. This sample prints out a simple chart of the normal_map, shift_map, option_map, and option_shift_map characters:#include &lt;interface/InterfaceDefs.h&gt; #include &lt;stdio.h&gt; #include &lt;string.h&gt; #include &lt;stdlib.h&gt; static void print_key( char *chars, int32 offset ) { int size = chars[offset++]; switch( size ) { case 0: // Not mapped printf( “N/A” ); break; case 1: // 1-byte UTF-8/ASCII character printf( “%c”, chars[offset] ); break; default: // 2-, 3-, or 4-byte UTF-8 character { char str[5]; int i = (size &lt;= 4) ? size : 4; strncpy( str, &amp;(chars[offset]), i ); str[i] = ‘0’; printf( “%s”, str ); } break; } printf( “\t” ); } int main( void ) { // Get the current key map. key_map *keys; char *chars; get_key_map( &amp;keys, &amp;chars ); // Print a chart of the normal, shift, option, and option+shift // keys. printf( “Key #tNormaltShifttOptiontOption+Shiftn” ); for( int idx = 0; idx &lt; 128; idx++ ) { printf( ” %3dt”, idx ); print_key( chars, keys-&gt;normal_map[idx] ); print_key( chars, keys-&gt;shift_map[idx] ); print_key( chars, keys-&gt;option_map[idx] ); print_key( chars, keys-&gt;option_shift_map[idx] ); printf( “\n” ); } // Free our copy of the key map. free( chars ); free( keys ); return EXIT_SUCCESS; }The character map tables are ordered. Values from the first applicable table are used, even if another table might also seem to apply. For example, if Caps Lock is on and a Control key is down (and both Command keys are up), the control_map array is used, not caps_map. If a Shift key is down and Caps Lock is on, the caps_shift_map is used, not shift_map or caps_map.Notice that the last eight tables (all except control_map) are paired, with a table that names the Shift key (…_shift_map) preceding an equivalent table without Shift:option_caps_shift_map is paired with option_caps_map,option_shift_map with option_map,caps_shift_map with caps_map, andshift_map with normal_map.These pairings are important for a special rule that applies to keys on the numerical keypad when Num Lock is on:If the Shift key is down, the non-Shift table is used.However, if the Shift key is not down, the Shift table is used.In other words, Num Lock inverts the Shift and non-Shift tables for keys on the numerical keypad.Not every key needs to be mapped to a character. If the chars array has a 0-length string for a key, the key is not mapped to a character (given the particular modifier states the table represents). Generally, modifier keys are not mapped to characters, but all other keys are, at least for some tables. Key-down events are not generated for unmapped keys.
Dead keysNext are the tables that map combinations of keys to single characters. The first key in the combination is “dead”—it doesn’t produce a key-down event until the user strikes another character key. When the user hits the second key, one of two things will happen: If the second key is one that can be used in combination with the dead key, a single key-down event reports the combination character. If the second key doesn’t combine with the dead key, two key-down events occur, one reporting the dead-key character and one reporting the second character.There are five dead-key tables:FieldDescriptionint32 acute_dead_key [32]The table for combining an acute accent (´) with other characters.int32 grave_dead_key [32]The table for combining a grave accent (<code class="docutils literal notranslate"><span class="pre">)</span> <span class="pre">with</span> <span class="pre">other</span> <span class="pre">characters.int32</span> <span class="pre">circumflex_dead_key</span> <span class="pre">[32]The</span> <span class="pre">table</span> <span class="pre">for</span> <span class="pre">combining</span> <span class="pre">a</span> <span class="pre">circumflex</span> <span class="pre">(^)</span> <span class="pre">with</span> <span class="pre">other</span> <span class="pre">characters.int32</span> <span class="pre">dieresis_dead_key</span> <span class="pre">[32]The</span> <span class="pre">table</span> <span class="pre">for</span> <span class="pre">combining</span> <span class="pre">a</span> <span class="pre">dieresis</span> <span class="pre">(¨)</span> <span class="pre">with</span> <span class="pre">other</span> <span class="pre">characters.int32</span> <span class="pre">tilde_dead_key</span> <span class="pre">[32]The</span> <span class="pre">table</span> <span class="pre">for</span> <span class="pre">combining</span> <span class="pre">a</span> <span class="pre">tilde</span> <span class="pre">(~)</span> <span class="pre">with</span> <span class="pre">other</span> <span class="pre">charactersThe</span> <span class="pre">tables</span> <span class="pre">are</span> <span class="pre">named</span> <span class="pre">after</span> <span class="pre">diacritical</span> <span class="pre">marks</span> <span class="pre">that</span> <span class="pre">can</span> <span class="pre">be</span> <span class="pre">placed</span> <span class="pre">on</span> <span class="pre">more</span> <span class="pre">than</span> <span class="pre">one</span> <span class="pre">character.</span> <span class="pre">However,</span> <span class="pre">the</span> <span class="pre">name</span> <span class="pre">is</span> <span class="pre">just</span> <span class="pre">a</span> <span class="pre">mnemonic;</span> <span class="pre">it</span> <span class="pre">means</span> <span class="pre">nothing.</span> <span class="pre">The</span> <span class="pre">contents</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">table</span> <span class="pre">determine</span> <span class="pre">what</span> <span class="pre">the</span> <span class="pre">dead</span> <span class="pre">key</span> <span class="pre">is</span> <span class="pre">and</span> <span class="pre">how</span> <span class="pre">it</span> <span class="pre">combines</span> <span class="pre">with</span> <span class="pre">other</span> <span class="pre">characters.</span> <span class="pre">It</span> <span class="pre">would</span> <span class="pre">be</span> <span class="pre">possible,</span> <span class="pre">for</span> <span class="pre">example,</span> <span class="pre">to</span> <span class="pre">remap</span> <span class="pre">the</span> <span class="pre">tilde_dead_key</span> <span class="pre">table</span> <span class="pre">so</span> <span class="pre">that</span> <span class="pre">it</span> <span class="pre">had</span> <span class="pre">nothing</span> <span class="pre">to</span> <span class="pre">do</span> <span class="pre">with</span> <span class="pre">a</span> <span class="pre">tilde.Each</span> <span class="pre">table</span> <span class="pre">consists</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">series</span> <span class="pre">of</span> <span class="pre">up</span> <span class="pre">to</span> <span class="pre">16</span> <span class="pre">offset</span> <span class="pre">pairs—where,</span> <span class="pre">as</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">case</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">character</span> <span class="pre">maps,</span> <span class="pre">each</span> <span class="pre">offset</span> <span class="pre">picks</span> <span class="pre">a</span> <span class="pre">character</span> <span class="pre">from</span> <span class="pre">the</span> <span class="pre">chars</span> <span class="pre">character</span> <span class="pre">array.</span> <span class="pre">The</span> <span class="pre">first</span> <span class="pre">character</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">pair</span> <span class="pre">is</span> <span class="pre">the</span> <span class="pre">one</span> <span class="pre">that</span> <span class="pre">must</span> <span class="pre">be</span> <span class="pre">typed</span> <span class="pre">immediately</span> <span class="pre">after</span> <span class="pre">the</span> <span class="pre">dead</span> <span class="pre">key.</span> <span class="pre">The</span> <span class="pre">second</span> <span class="pre">character</span> <span class="pre">is</span> <span class="pre">the</span> <span class="pre">resulting</span> <span class="pre">character,</span> <span class="pre">the</span> <span class="pre">character</span> <span class="pre">that's</span> <span class="pre">produced</span> <span class="pre">by</span> <span class="pre">the</span> <span class="pre">combination</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">dead</span> <span class="pre">key</span> <span class="pre">plus</span> <span class="pre">the</span> <span class="pre">first</span> <span class="pre">character</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">pair.</span> <span class="pre">For</span> <span class="pre">example,</span> <span class="pre">if</span> <span class="pre">the</span> <span class="pre">first</span> <span class="pre">character</span> <span class="pre">is</span> <span class="pre">'o',</span> <span class="pre">the</span> <span class="pre">second</span> <span class="pre">might</span> <span class="pre">be</span> <span class="pre">'^'—meaning</span> <span class="pre">that</span> <span class="pre">the</span> <span class="pre">combination</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">dead</span> <span class="pre">key</span> <span class="pre">plus</span> <span class="pre">the</span> <span class="pre">character</span> <span class="pre">'o'</span> <span class="pre">produces</span> <span class="pre">a</span> <span class="pre">circumflexed</span> <span class="pre">'ô'.The</span> <span class="pre">character</span> <span class="pre">pairs</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">default</span> <span class="pre">grave_dead_key</span> <span class="pre">array</span> <span class="pre">look</span> <span class="pre">something</span> <span class="pre">like</span> <span class="pre">this:'</span> <span class="pre">',</span> <span class="pre">''',</span> <span class="pre">'A',</span> <span class="pre">'À',</span> <span class="pre">'E',</span> <span class="pre">'È',</span> <span class="pre">'I',</span> <span class="pre">'Ì',</span> <span class="pre">'O',</span> <span class="pre">'Ò',</span> <span class="pre">'U',</span> <span class="pre">'Ù',</span> <span class="pre">'a',</span> <span class="pre">'à',</span> <span class="pre">'e',</span> <span class="pre">'è',</span> <span class="pre">'i',</span> <span class="pre">'ì''o',</span> <span class="pre">'ò',</span> <span class="pre">'u',</span> <span class="pre">'ù',</span> <span class="pre">.</span> <span class="pre">.</span> <span class="pre">.By</span> <span class="pre">convention,</span> <span class="pre">the</span> <span class="pre">first</span> <span class="pre">offset</span> <span class="pre">in</span> <span class="pre">each</span> <span class="pre">array</span> <span class="pre">is</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">{cpp:enum}</span></code>B_SPACE<code class="docutils literal notranslate"> <span class="pre">character</span> <span class="pre">and</span> <span class="pre">the</span> <span class="pre">second</span> <span class="pre">is</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">dead-key</span> <span class="pre">character</span> <span class="pre">itself.</span> <span class="pre">This</span> <span class="pre">pair</span> <span class="pre">does</span> <span class="pre">double</span> <span class="pre">duty:</span> <span class="pre">It</span> <span class="pre">states</span> <span class="pre">that</span> <span class="pre">the</span> <span class="pre">dead</span> <span class="pre">key</span> <span class="pre">plus</span> <span class="pre">a</span> <span class="pre">space</span> <span class="pre">yields</span> <span class="pre">the</span> <span class="pre">dead-key</span> <span class="pre">character,</span> <span class="pre">and</span> <span class="pre">it</span> <span class="pre">also</span> <span class="pre">names</span> <span class="pre">the</span> <span class="pre">dead</span> <span class="pre">key.</span> <span class="pre">The</span> <span class="pre">system</span> <span class="pre">understands</span> <span class="pre">what</span> <span class="pre">the</span> <span class="pre">dead</span> <span class="pre">key</span> <span class="pre">is</span> <span class="pre">from</span> <span class="pre">the</span> <span class="pre">second</span> <span class="pre">offset</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">array.</span> <span class="pre">Character</span> <span class="pre">Tables</span> <span class="pre">For</span> <span class="pre">Dead</span> <span class="pre">KeysAs</span> <span class="pre">mentioned</span> <span class="pre">above,</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">key</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">dead,</span> <span class="pre">it</span> <span class="pre">must</span> <span class="pre">be</span> <span class="pre">mapped</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">character</span> <span class="pre">picked</span> <span class="pre">by</span> <span class="pre">the</span> <span class="pre">second</span> <span class="pre">offset</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">dead-key</span> <span class="pre">array.</span> <span class="pre">However,</span> <span class="pre">it's</span> <span class="pre">not</span> <span class="pre">typical</span> <span class="pre">for</span> <span class="pre">every</span> <span class="pre">key</span> <span class="pre">that's</span> <span class="pre">mapped</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">character</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">dead.</span> <span class="pre">Usually,</span> <span class="pre">there's</span> <span class="pre">a</span> <span class="pre">requirement</span> <span class="pre">that</span> <span class="pre">the</span> <span class="pre">user</span> <span class="pre">must</span> <span class="pre">hold</span> <span class="pre">down</span> <span class="pre">certain</span> <span class="pre">modifier</span> <span class="pre">keys</span> <span class="pre">(often</span> <span class="pre">the</span> <span class="pre">Option</span> <span class="pre">key).</span> <span class="pre">In</span> <span class="pre">other</span> <span class="pre">words,</span> <span class="pre">a</span> <span class="pre">key</span> <span class="pre">is</span> <span class="pre">dead</span> <span class="pre">only</span> <span class="pre">if</span> <span class="pre">selected</span> <span class="pre">character-map</span> <span class="pre">tables</span> <span class="pre">map</span> <span class="pre">it</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">requisite</span> <span class="pre">character.Five</span> <span class="pre">additional</span> <span class="pre">fields</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">key_map</span> <span class="pre">structure</span> <span class="pre">specify</span> <span class="pre">what</span> <span class="pre">those</span> <span class="pre">character-map</span> <span class="pre">tables</span> <span class="pre">are—which</span> <span class="pre">modifiers</span> <span class="pre">are</span> <span class="pre">required</span> <span class="pre">for</span> <span class="pre">each</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">dead</span> <span class="pre">keys:FieldDescriptionuint32</span> <span class="pre">acute_tablesThe</span> <span class="pre">character</span> <span class="pre">tables</span> <span class="pre">that</span> <span class="pre">cause</span> <span class="pre">a</span> <span class="pre">key</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">dead</span> <span class="pre">when</span> <span class="pre">they</span> <span class="pre">map</span> <span class="pre">it</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">second</span> <span class="pre">character</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">acute_dead_key</span> <span class="pre">array.uint32</span> <span class="pre">grave_tablesThe</span> <span class="pre">character</span> <span class="pre">tables</span> <span class="pre">that</span> <span class="pre">cause</span> <span class="pre">a</span> <span class="pre">key</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">dead</span> <span class="pre">when</span> <span class="pre">they</span> <span class="pre">map</span> <span class="pre">it</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">second</span> <span class="pre">character</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">grave_dead_key</span> <span class="pre">array.uint32</span> <span class="pre">circumflex_tablesThe</span> <span class="pre">character</span> <span class="pre">tables</span> <span class="pre">that</span> <span class="pre">cause</span> <span class="pre">a</span> <span class="pre">key</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">dead</span> <span class="pre">when</span> <span class="pre">they</span> <span class="pre">map</span> <span class="pre">it</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">second</span> <span class="pre">character</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">circumflex_dead_key</span> <span class="pre">array.uint32</span> <span class="pre">dieresis_tablesThe</span> <span class="pre">character</span> <span class="pre">tables</span> <span class="pre">that</span> <span class="pre">cause</span> <span class="pre">a</span> <span class="pre">key</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">dead</span> <span class="pre">when</span> <span class="pre">they</span> <span class="pre">map</span> <span class="pre">it</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">second</span> <span class="pre">character</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">dieresis_dead_key</span> <span class="pre">array.uint32</span> <span class="pre">tilde_tablesThe</span> <span class="pre">character</span> <span class="pre">tables</span> <span class="pre">that</span> <span class="pre">cause</span> <span class="pre">a</span> <span class="pre">key</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">dead</span> <span class="pre">when</span> <span class="pre">they</span> <span class="pre">map</span> <span class="pre">it</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">second</span> <span class="pre">character</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">tilde_dead_key</span> <span class="pre">array.Each</span> <span class="pre">of</span> <span class="pre">these</span> <span class="pre">fields</span> <span class="pre">contains</span> <span class="pre">a</span> <span class="pre">mask</span> <span class="pre">formed</span> <span class="pre">from</span> <span class="pre">the</span> <span class="pre">following</span> <span class="pre">constants:B_CONTROL_TABLEB_CAPS_SHIFT_TABLEB_OPTION_CAPS_SHIFT_TABLEB_CAPS_TABLEB_OPTION_CAPS_TABLEB_SHIFT_TABLEB_OPTION_SHIFT_TABLEB_NORMAL_TABLEB_OPTION_TABLEThe</span> <span class="pre">mask</span> <span class="pre">designates</span> <span class="pre">the</span> <span class="pre">character-map</span> <span class="pre">tables</span> <span class="pre">that</span> <span class="pre">permit</span> <span class="pre">a</span> <span class="pre">key</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">dead.</span> <span class="pre">For</span> <span class="pre">example,</span> <span class="pre">if</span> <span class="pre">the</span> <span class="pre">mask</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">grave_tables</span> <span class="pre">field</span> <span class="pre">is,B_OPTION_TABLE</span> <span class="pre">|</span> <span class="pre">B_OPTION_CAPS_SHIFT_TABLEa</span> <span class="pre">key</span> <span class="pre">would</span> <span class="pre">be</span> <span class="pre">dead</span> <span class="pre">whenever</span> <span class="pre">either</span> <span class="pre">of</span> <span class="pre">those</span> <span class="pre">tables</span> <span class="pre">mapped</span> <span class="pre">the</span> <span class="pre">key</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">character</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">second</span> <span class="pre">offset</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">grave_dead_key</span> <span class="pre">array</span> <span class="pre">('Q'</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">example</span> <span class="pre">above).</span> <span class="pre">A</span> <span class="pre">key</span> <span class="pre">mapped</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">same</span> <span class="pre">character</span> <span class="pre">by</span> <span class="pre">another</span> <span class="pre">table</span> <span class="pre">would</span> <span class="pre">not</span> <span class="pre">be</span> <span class="pre">dead.See</span> <span class="pre">also:</span> <span class="pre">{cpp:func}</span></code>~get::key<code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">{ref}</span></code>modifiers()<code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">the</span> <span class="pre">Keyboard</span> <span class="pre">Information</span> <span class="pre">appendix,</span> <span class="pre">{cpp:func}</span></code>~set::modifier`</p>
<section id="_CPPv4N9Functions15get_keyboard_idEP6uint16">
</section>
<h3>
get_keyboard_id()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">get_keyboard_id</span><span class="sig-paren">(</span><span class="n">uint16</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">id</span><span class="sig-paren">)</span></pre><p>Declared in:  interface/InterfaceDefs.h
Obtains the keyboard identifier from the Application Server and device
driver and writes it into the variable referred to by <span class="hparameter">id</span>. This number
reveals what kind of keyboard is currently attached to the computer.
The identifier for the standard 101-key PC keyboard—and for
keyboards with a similar set of keys—is 0x83ab.
If unsuccessful for any reason, get_keyboard_id()
returns <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ERROR</span></code>. If
successful, it returns <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code>.</p>
<section id="_CPPv4N9Functions9modifiersEv">
</section>
<h3>
modifiers()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">uint32</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">modifiers</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Declared in: interface/InterfaceDefs.h
Returns a mask that has a bit set for each modifier key the user is
holding down and for each keyboard lock that’s set. The mask can be
tested against these constants:</p>
<ul class="simple">
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_SHIFT_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMAND_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_CAPS_LOCK</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_CONTROL_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_MENU_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_SCROLL_LOCK</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OPTION_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NUM_LOCK</span></code></p></li>
</ul>
<p>No bits are set (the mask is 0) if no locks are on and none of the
modifiers keys are down.
If it’s important to know which physical key the user is holding down,
the one on the right or the one on the left, the mask can be further
tested against these constants:</p>
<ul class="simple">
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_LEFT_SHIFT_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_RIGHT_SHIFT_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_LEFT_CONTROL_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_RIGHT_CONTROL_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_LEFT_OPTION_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_RIGHT_OPTION_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_LEFT_COMMAND_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_RIGHT_COMMAND_KEY</span></code></p></li>
</ul>
<p>By default, the keys closest to the space bar function as
Command keys, no matter what their labels on particular
keyboards. If a keyboard doesn’t have Option keys (for
example, a standard 101-key keyboard), the key on the right labeled &amp;
quot;Control” functions as the right Option key, and
only the left “Control” key is available to function as a
Control modifier. However, users can change this
configuration with the /bin/keymap
application.</p>
<section id="_CPPv4N9Functions19set_key_repeat_rateE5int32">
</section>
<section id="_CPPv4N9Functions19get_key_repeat_rateEP5int32">
</section>
<section id="_CPPv4N9Functions20set_key_repeat_delayE9bigtime_t">
</section>
<section id="_CPPv4N9Functions20get_key_repeat_delayEP9bigtime_t">
</section>
<h3>
set_key_repeat_rate(), get_key_repeat_rate(), set_key_repeat_delay(), get_key_repeat_delay()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">set_key_repeat_rate</span><span class="sig-paren">(</span><span class="n">int32</span><span class="w"> </span><span class="n sig-param">rate</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">get_key_repeat_rate</span><span class="sig-paren">(</span><span class="n">int32</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">rate</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">set_key_repeat_delay</span><span class="sig-paren">(</span><span class="n">bigtime_t</span><span class="w"> </span><span class="n sig-param">delay</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">get_key_repeat_delay</span><span class="sig-paren">(</span><span class="n">bigtime_t</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">delay</span><span class="sig-paren">)</span></pre><p>Declared in: interface/InterfaceDefs.h
These functions set and report the timing of repeating keys. When the
user presses a character key on the keyboard, it produces an immediate
<code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_KEY_DOWN</span></code> message. If the user continues to hold the key down, it will,
after an initial delay, continue to produce messages at regularly spaced
intervals—until the user releases the key or presses another key.
The delay and the spacing between messages are both preferences the user
can set with the Keyboard application.
set_key_repeat_rate() sets the number of messages repeating keys produce
per second. For a standard PC keyboard, the rate can be as low as 2 and
as high as 30; get_key_repeat_rate() writes the current setting into the
integer that rate refers to.
set_key_repeat_delay() sets the length of the initial delay before the
key begins repeating. Acceptable values are 250,000, 500,000, 750,000 and
1,000,000 microseconds (.25, .5, .75, and 1.0 second);
get_key_repeat_delay() writes the current setting into the variable that
delay points to.
All four functions return <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code> if they successfully communicate with the
Application Server, and <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ERROR</span></code> if not.
It’s possible for the set…()
functions to communicate with the server but not succeed in setting the
rate or delay (for example, if the delay isn’t one of the listed four
values).</p>
<section id="_CPPv4N9Functions18set_keyboard_locksE6uint32">
</section>
<h3>
set_keyboard_locks()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">set_keyboard_locks</span><span class="sig-paren">(</span><span class="n">uint32</span><span class="w"> </span><span class="n sig-param">modifiers</span><span class="sig-paren">)</span></pre><p>Declared in: interface/InterfaceDefs.h
Turns the keyboard locks—Caps Lock,
Num Lock, and Scroll Lock—on
and off. The keyboard locks that are listed in the
modifiers mask passed as an argument are turned on; those not listed are
turned off. The mask can be 0 (to turn off all locks) or it can contain
any combination of the following constants:</p>
<ul class="simple">
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_CAPS_LOCK</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NUM_LOCK</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_SCROLL_LOCK</span></code></p></li>
</ul>
<p>See also:
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">key()</span></code>,
<span class="xref std std-ref">modifiers()</span></p>
<section id="_CPPv4N9Functions16set_modifier_keyE6uint326uint32">
</section>
<h3>
set_modifier_key()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">Functions</span><span class="p">::</span></span><span class="n">set_modifier_key</span><span class="sig-paren">(</span><span class="n">uint32</span><span class="w"> </span><span class="n sig-param">modifier</span>, <span class="n">uint32</span><span class="w"> </span><span class="n sig-param">key</span><span class="sig-paren">)</span></pre><p>Declared in: interface/InterfaceDefs.h
Maps a modifier role to a particular key on the keyboard, where key is a
key identifier and modifier is one of the these constants:</p>
<ul class="simple">
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_CAPS_LOCK</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_LEFT_SHIFT_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_RIGHT_SHIFT_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NUM_LOCK</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_LEFT_CONTROL_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_RIGHT_CONTROL_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_SCROLL_LOCK</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_LEFT_OPTION_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_RIGHT_OPTION_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_MENU_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_LEFT_COMMAND_KEY</span></code></p></li>
<li><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_RIGHT_COMMAND_KEY</span></code></p></li>
</ul>
<p>The key in question serves as the named modifier key, unmapping any key
that previously played that role. The change remains in effect until the
default key map is restored. In general, the user’s preferences for
modifier keys—expressed in the Keymap
application—should be respected.
Modifier keys can also be mapped by calling
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">key()</span></code>
and altering the <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">map()</span></code>
structure directly. This function is merely a convenient
alternative for accomplishing the same thing. (It’s currently not
possible to alter the key map;
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">key()</span></code>
looks at a copy.)</p>
<h3>
</h3><div class="note admonition">
<p class="admonition-title">Note</p>
<p>TODO: This function does not appear in the BeBook</p>
</div>
<h3>
</h3><div class="note admonition">
<p class="admonition-title">Note</p>
<p>TODO: This function does not appear in the BeBook</p>
</div>
</section>
</section>


        <div class="clearer"></div>
      </div>
          </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="example-table.html">&lt;no title&gt;</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="input-device.html">BInputDevice</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, Haiku, Inc..
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>