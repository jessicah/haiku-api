
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>BScreen &#8212; The Haiku Book  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/haiku.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/code.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="BScrollBar" href="scroll-bar.html" />
    <link rel="prev" title="BRegion" href="region.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../../index.html">
          <span>API Documentation</span></a></h1>
        <h2 class="heading"><span>BScreen</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="region.html">BRegion</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="scroll-bar.html">BScrollBar</a>&#160;&#160;»
        </p>

      </div>
        
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">BScreen</a><ul>
<li><a class="reference internal" href="#constructor-and-destructor">Constructor and Destructor</a><ul>
<li><a class="reference internal" href="#_CPPv4N7BScreen7BScreenEP7BWindow">BScreen</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreenD0Ev">~BScreen</a></li>
</ul>
</li>
<li><a class="reference internal" href="#member-functions">Member Functions</a><ul>
<li><a class="reference internal" href="#_CPPv4N7BScreen8ColorMapEv">ColorMap</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen13IndexForColorE9rgb_color">IndexForColor</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen13ColorForIndexEK5uint8">ColorForIndex</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen11InvertIndexE5uint8">InvertIndex</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen10ColorSpaceEv">ColorSpace</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen5FrameEv">Frame</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen13GetDeviceInfoEP22accelerant_device_info">GetDeviceInfo</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen11GetModeListEPP12display_modeP6uint32">GetModeList</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen7SetModeEP12display_modeb">SetMode</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen7GetModeEP12display_mode">GetMode</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen19GetPixelClockLimitsEP12display_modeP6uint32P6uint32">GetPixelClockLimits</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen20GetTimingConstraintsEP26display_timing_constraints">GetTimingConstraints</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen2IDEv">ID</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen7IsValidEv">IsValid</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen11ProposeModeEP12display_modePK12display_modePK12display_mode">ProposeMode</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen10ReadBitmapEP7BBitmapbP5BRect">ReadBitmap</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen9GetBitmapEPP7BBitmapbP5BRect">GetBitmap</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen15SetDesktopColorE9rgb_colorb">SetDesktopColor</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen12DesktopColorEv">DesktopColor</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen7SetDPMSE6uint32">SetDPMS</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen9DPMSStateEv">DPMSState</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen16DPMSCapabilitiesEv">DPMSCapabilities</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen9SetToNextEv">SetToNext</a></li>
<li><a class="reference internal" href="#_CPPv4N7BScreen14WaitForRetraceEv">WaitForRetrace</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>

        </div>
      </div>
          <div class="bodywrapper">
      <div class="content" role="main">
        
  <section id="bscreen">
<h1>BScreen<a class="headerlink" href="#bscreen" title="Permalink to this heading">¶</a></h1>
<section id="constructor-and-destructor">
<h2>Constructor and Destructor<a class="headerlink" href="#constructor-and-destructor" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4N7BScreen7BScreenEP7BWindow">
</section>
<h3>
BScreen()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N7BScreen7BScreenEP7BWindow" title="BScreen::BScreen"><span class="n">BScreen</span></a><span class="p">::</span></span><span class="n">BScreen</span><span class="sig-paren">(</span><span class="n">BWindow</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">window</span><span class="sig-paren">)</span><br /><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N7BScreen7BScreenE9screen_id" title="BScreen::BScreen"><span class="n">BScreen</span></a><span class="p">::</span></span><span class="n">BScreen</span><span class="sig-paren">(</span><span class="n">screen_id</span><span class="w"> </span><span class="n sig-param">id</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">B_MAIN_SCREEN_ID</span><span class="sig-paren">)</span></pre><p>Initializes the <span class="hclass">BScreen</span> object so that it represents the screen where
<span class="hparameter">window</span> is displayed or the screen identified by
<span class="hparameter">id</span>. If <span class="hparameter">window</span> is <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">NULL</span></code> or
hidden, or if the <span class="hparameter">id</span> is invalid, the
<span class="hclass">BScreen</span> will represent the main
screen.</p>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>Since multiple monitors aren’t currently supported, there’s no API for
screen identifiers other than for the main screen.</p>
</div>
<p>To be sure the new object was correctly constructed, call
<a class="reference internal" href="#_CPPv4N7BScreen7IsValidEv" title="BScreen::IsValid"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">IsValid()</span></code></a>.</p>
<section id="_CPPv4N7BScreenD0Ev">
</section>
<h3>
~BScreen()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">~BScreen</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Unlocks the screen and invalidates the <span class="hclass">BScreen</span> object.</p>
</section>
<section id="member-functions">
<h2>Member Functions<a class="headerlink" href="#member-functions" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4N7BScreen8ColorMapEv">
</section>
<section id="_CPPv4N7BScreen13IndexForColorE9rgb_color">
</section>
<section id="_CPPv4N7BScreen13ColorForIndexEK5uint8">
</section>
<section id="_CPPv4N7BScreen11InvertIndexE5uint8">
</section>
<h3>
ColorMap(), IndexForColor(), ColorForIndex(), InvertIndex()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">const</span><span class="w"> </span><span class="n">color_map</span><span class="w"> </span><span class="p">*</span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">ColorMap</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="k">inline</span><span class="w"> </span><span class="n">uint8</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">IndexForColor</span><span class="sig-paren">(</span><span class="n">rgb_color</span><span class="w"> </span><span class="n sig-param">color</span><span class="sig-paren">)</span><br /><span class="n">uint8</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">IndexForColor</span><span class="sig-paren">(</span><span class="n">uint8</span><span class="w"> </span><span class="n sig-param">red</span>, <span class="n">uint8</span><span class="w"> </span><span class="n sig-param">green</span>, <span class="n">uint8</span><span class="w"> </span><span class="n sig-param">blue</span>, <span class="n">uint8</span><span class="w"> </span><span class="n sig-param">alpha</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">255</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">rgb_color</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">ColorForIndex</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="n">uint8</span><span class="w"> </span><span class="n sig-param">index</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">uint8</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">InvertIndex</span><span class="sig-paren">(</span><span class="n">uint8</span><span class="w"> </span><span class="n sig-param">index</span><span class="sig-paren">)</span></pre><p>These functions return information from the color_map structure for this
screen. The <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">map()</span></code>
structure defines the set of 256 colors that can be
displayed in an <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_CMAP8</span></code> color space. A single
color_map is shared by all
applications that display on the same screen. See the color_map structure
for more information about the structure.</p>
<p><span class="hmethod">ColorMap()</span> returns a pointer to the color_map itself. The structure
belongs to the <span class="hclass">BScreen</span> object; you can’t modify or free it. (Note that
the the <span class="hmethod">system_colors()</span> function retrieves the color_map structure for
the main screen without reference to a <span class="hclass">BScreen</span> object.)</p>
<p><span class="hmethod">IndexForColor()</span> returns the “index” of the 8-bit color that, in this
screen’s color map, most closely matches the given 32-bit color. You can
pass the <span class="hparameter">index</span> to functions such
<a class="reference internal" href="bitmap.html#_CPPv4N7BBitmap7SetBitsEPKv5int325int3211color_space" title="BBitmap::SetBits"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">BBitmap::SetBits()</span></code></a> to set an 8-bit
color. Note that <span class="hmethod">IndexForColor()</span> knows how to convert
<code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_TRANSPARENT_32_BIT</span></code> into <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_TRANSPARENT_8_BIT</span></code>.</p>
<p><span class="hmethod">ColorForIndex()</span> returns the 32-bit color representation of a given 8-bit
color <span class="hparameter">index</span>. This function doesn’t convert
<code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_TRANSPARENT_8_BIT</span></code> into
<code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_TRANSPARENT_32_BIT</span></code>.</p>
<p><span class="hmethod">InvertIndex()</span> takes an 8-bit <span class="hparameter">index</span>
and returns an index that represents
the color’s “inversion.” Inverted colors are typically used for
highlighting.</p>
<div class="important admonition">
<p class="admonition-title">Important</p>
<p>The information gained through <span class="hmethod">IndexForColor()</span>,
<span class="hmethod">ColorForIndex()</span>, and
<span class="hmethod">InvertIndex()</span> can be retrieved more efficiently
from the color_map
structure. If you’re repeatedly calling these functions, you should
consider accessing the color_map structure, instead. Note, however, that
the intelligent <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_TRANSPARENT_32_BIT</span></code> to
<code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_TRANSPARENT_8_BIT</span></code> conversion is
not supported by the structure.</p>
</div>
<section id="_CPPv4N7BScreen10ColorSpaceEv">
</section>
<h3>
ColorSpace()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">color_space</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">ColorSpace</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Returns the color space of the screen display—typically <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_CMAP8</span></code>,
<code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_RGB15</span></code>, or <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_RGB32</span></code>—or
<code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NO_COLOR_SPACE</span></code> if the <span class="hclass">BScreen</span> object is
invalid.</p>
<p>The color space is set by the user through the Screen preferences
application. You can set it programatically through the
<a class="reference internal" href="#_CPPv4N7BScreen7SetModeEP12display_modeb" title="BScreen::SetMode"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetMode()</span></code></a>
function.</p>
<section id="_CPPv4N7BScreen5FrameEv">
</section>
<h3>
Frame()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">BRect</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">Frame</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Returns the rectangle that locates the screen in the screen coordinate
system. For example, the frame for a 1,024 * 768 main screen looks like
this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BRect</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1023.0</span><span class="p">,</span> <span class="mf">767.0</span><span class="p">)</span>
</pre></div>
</div>
<p>If the <span class="hclass">BScreen</span> object is invalid, all sides of the rectangle are set to
0.0.</p>
<p>The screen’s frame rectangle is set by the user through the Screen
preferences application. You can set it programatically through the
<a class="reference internal" href="#_CPPv4N7BScreen7SetModeEP12display_modeb" title="BScreen::SetMode"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetMode()</span></code></a> function.</p>
<section id="_CPPv4N7BScreen13GetDeviceInfoEP22accelerant_device_info">
</section>
<h3>
GetDeviceInfo()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">GetDeviceInfo</span><span class="sig-paren">(</span><span class="n">accelerant_device_info</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">info</span><span class="sig-paren">)</span></pre><p>Returns information about the graphics card.</p>
<section id="_CPPv4N7BScreen11GetModeListEPP12display_modeP6uint32">
</section>
<section id="_CPPv4N7BScreen7SetModeEP12display_modeb">
</section>
<section id="_CPPv4N7BScreen7GetModeEP12display_mode">
</section>
<h3>
GetModeList(), SetMode(), GetMode()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">GetModeList</span><span class="sig-paren">(</span><span class="n">display_mode</span><span class="w"> </span><span class="p">*</span><span class="p">*</span><span class="n sig-param">mode_list</span>, <span class="n">uint32</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">count</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">SetMode</span><span class="sig-paren">(</span><span class="n">display_mode</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">mode</span>, <span class="kt">bool</span><span class="w"> </span><span class="n sig-param">makeDefault</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">false</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">GetMode</span><span class="sig-paren">(</span><span class="n">display_mode</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">mode</span><span class="sig-paren">)</span></pre><p>These functions set and get the screen’s display mode. Each display_mode
structure (defined in add-ons/graphics/Accelerant.h) is a distinct
combination of screen size, pixel depth, and display timing.</p>
<p><span class="hmethod">GetModeList()</span> allocates and returns, in <span class="hparameter">mode_list</span>, a list of the
display_mode structures that the graphics card is guaranteed to support;
<span class="hparameter">count</span> is set to the number of display_mode elements in the list. The
caller is responsible for freeing <span class="hparameter">mode_list</span>.</p>
<div class="warning admonition">
<p class="admonition-title">Warning</p>
<p>There’s no guarantee that the monitor can support all of the modes that
<span class="hmethod">GetModeList()</span> retrieves.</p>
</div>
<p><span class="hmethod">SetMode()</span> resets the screen to the given <span class="hparameter">mode</span>.
If <span class="hparameter">makeDefault</span> is <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">true</span></code>,
the mode becomes the default for the current workspace.</p>
<p><span class="hmethod">GetMode()</span> copies the current display_mode
into <span class="hparameter">mode</span>.</p>
<p>The display_mode structure is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">struct</span> <span class="p">{</span>
      <span class="n">display_timing</span> <span class="n">timing</span><span class="p">;</span>
      <span class="n">uint32</span> <span class="n">space</span><span class="p">;</span>
      <span class="n">uint16</span> <span class="n">virtual_width</span><span class="p">;</span>
      <span class="n">uint16</span> <span class="n">virtual_height</span><span class="p">;</span>
      <span class="n">uint16</span> <span class="n">h_display_start</span><span class="p">;</span>
      <span class="n">uint16</span> <span class="n">v_display_start</span><span class="p">;</span>
      <span class="n">uint32</span> <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">display_mode</span><span class="p">;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>timing</p></td>
<td><p>Provides CTRC timing information.</p></td>
</tr>
<tr class="row-odd"><td><p>space</p></td>
<td><p>Is the color space of the display.</p></td>
</tr>
<tr class="row-even"><td><p>virtual_width</p></td>
<td><p>Is the screen’s virtual width in pixels</p></td>
</tr>
<tr class="row-odd"><td><p>virtual_height</p></td>
<td><p>Is the screen’s virtual height in lines.</p></td>
</tr>
<tr class="row-even"><td><p>h_display_start</p></td>
<td><p>Is the first displayed pixel in a line</p></td>
</tr>
<tr class="row-odd"><td><p>v_display_start</p></td>
<td><p>Is the first displayed line.</p></td>
</tr>
<tr class="row-even"><td><p>flags</p></td>
<td><p>Are mode flags:B_SCROLLScrolling display; a large display is being simulated by scrolling around on a smaller screen.B_8_BIT_DACThe DAC is in 8-bit mode.B_HARDWARE_CURSORThe mode supports a hardware cursor.B_PARALLEL_ACCESSThe mode supports parallel access.B_DPMSThe mode supports power management.B_IO_FB_NAThe graphics card’s frame buffer shouldn’t be touched by the Application Server while the card’s acceleration engine might be doing so.</p></td>
</tr>
</tbody>
</table>
<p>The display_timing structure is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">struct</span> <span class="p">{</span>
      <span class="n">uint32</span> <span class="n">pixel_clock</span><span class="p">;</span>
      <span class="n">uint16</span> <span class="n">h_display</span><span class="p">;</span>
      <span class="n">uint16</span> <span class="n">h_sync_start</span><span class="p">;</span>
      <span class="n">uint16</span> <span class="n">h_sync_end</span><span class="p">;</span>
      <span class="n">uint16</span> <span class="n">h_total</span><span class="p">;</span>
      <span class="n">uint16</span> <span class="n">v_display</span><span class="p">;</span>
      <span class="n">uint16</span> <span class="n">h_display</span><span class="p">;</span>
      <span class="n">uint16</span> <span class="n">v_sync_start</span><span class="p">;</span>
      <span class="n">uint16</span> <span class="n">v_sync_end</span><span class="p">;</span>
      <span class="n">uint16</span> <span class="n">v_total</span><span class="p">;</span>
      <span class="n">uint32</span> <span class="n">flags</span><span class="p">;</span>
<span class="p">}</span> <span class="n">display_timing</span><span class="p">;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>pixel_clock</p></td>
<td><p>Is in kHz.</p></td>
</tr>
<tr class="row-odd"><td><p>h_display</p></td>
<td><p>Is in pixels, not in character clocks.</p></td>
</tr>
<tr class="row-even"><td><p>v_display</p></td>
<td><p>is in lines.</p></td>
</tr>
<tr class="row-odd"><td><p>flags</p></td>
<td><p>are:B_BLANK_PEDESTALUse a 7.5 IRE blanking pedestal instead of a 0.0 IRE blanking pedestal. Usually 0.0 IRE.B_TIMING_INTERLACEDThe mode is interlaced instead of progressively scanned. Rarely set; most modern displays don’t need this.B_POSITIVE_HSYNCIf set, the mode uses a positive (high) sync polarity.B_POSITIVE_VSYNCIf set, the mode uses a negative (low) sync polarity.B_SYNC_ON_GREENThe mode generates sync information on the green color signal.</p></td>
</tr>
</tbody>
</table>
<p>See also:
<a class="reference internal" href="#_CPPv4N7BScreen11ProposeModeEP12display_modePK12display_modePK12display_mode" title="BScreen::ProposeMode"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ProposeMode()</span></code></a></p>
<section id="_CPPv4N7BScreen19GetPixelClockLimitsEP12display_modeP6uint32P6uint32">
</section>
<h3>
GetPixelClockLimits()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">GetPixelClockLimits</span><span class="sig-paren">(</span><span class="n">display_mode</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">mode</span>, <span class="n">uint32</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">low</span>, <span class="n">uint32</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">high</span><span class="sig-paren">)</span></pre><p>This function returns, in <span class="hparameter">low</span> and <span class="hparameter">high</span>,
the minimum and maximum “pixel
clock” rates (in thousands-of-pixels per second) that are possible for
the given <span class="hparameter">mode</span>. Given the pixel clock and a display mode, you can
determine the refresh rate range by dividing the pixel clock by the
“real” size of the screen, thus:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uint32</span> <span class="n">hi_clock</span><span class="p">,</span> <span class="n">lo_clock</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">hi_refresh</span><span class="p">,</span> <span class="n">lo_refresh</span><span class="p">;</span>
<span class="nb">float</span> <span class="n">real_size</span><span class="p">;</span>
<span class="n">display_mode</span> <span class="n">mode</span><span class="p">;</span>
<span class="n">GetMode</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mode</span><span class="p">);</span>
<span class="n">GetPixelClockLimits</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mode</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">lo_clock</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">hi_clock</span><span class="p">);</span>
<span class="o">/*</span> <span class="n">The</span> <span class="n">real</span> <span class="n">screen</span> <span class="n">dimensions</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span> <span class="n">the</span> <span class="n">dimensions</span> <span class="k">for</span> <span class="n">the</span> <span class="n">purposes</span>
<span class="o">*</span> <span class="n">of</span> <span class="n">the</span> <span class="n">gun</span><span class="p">)</span> <span class="n">are</span> <span class="n">given</span> <span class="n">by</span> <span class="n">the</span> <span class="s1">&#39;timing.h_total&#39;</span> <span class="ow">and</span>
<span class="o">*</span> <span class="s1">&#39;timing.v_total&#39;</span> <span class="n">fields</span><span class="o">.</span>
<span class="o">*/</span>
<span class="n">total_size</span> <span class="o">=</span> <span class="n">mode</span><span class="o">.</span><span class="n">timing</span><span class="o">.</span><span class="n">h_total</span> <span class="o">*</span> <span class="n">mode</span><span class="o">.</span><span class="n">timing</span><span class="o">.</span><span class="n">v_total</span>
<span class="o">/*</span> <span class="n">Get</span> <span class="n">the</span> <span class="n">refresh</span> <span class="n">rate</span> <span class="n">by</span> <span class="n">dividing</span> <span class="n">the</span> <span class="n">pixel</span> <span class="n">clock</span> <span class="n">by</span> <span class="n">the</span> <span class="n">total</span>
<span class="o">*</span> <span class="n">screen</span> <span class="n">size</span><span class="o">.</span> <span class="n">Remember</span> <span class="o">--</span> <span class="n">the</span> <span class="n">pixel</span> <span class="n">clock</span> <span class="n">values</span> <span class="n">are</span> <span class="n">given</span> <span class="ow">in</span>
<span class="o">*</span> <span class="n">kHz</span><span class="p">;</span> <span class="n">we</span> <span class="n">multiply</span> <span class="n">by</span> <span class="mf">1000.0</span> <span class="n">to</span> <span class="n">retrieve</span> <span class="n">refresh</span> <span class="n">rates</span> <span class="ow">in</span> <span class="n">Hz</span><span class="o">.</span>
<span class="o">*/</span>
<span class="n">hi_refresh</span> <span class="o">=</span> <span class="p">((</span><span class="nb">float</span><span class="p">)</span> <span class="n">hi_clock</span><span class="o">*</span><span class="mf">1000.0</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="n">total_size</span><span class="p">;</span>
<span class="n">lo_refresh</span> <span class="o">=</span> <span class="p">((</span><span class="nb">float</span><span class="p">)</span> <span class="n">lo_clock</span><span class="o">*</span><span class="mf">1000.0</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="n">total_size</span><span class="p">;</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>Pixel clock limits returned successfully.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ERROR</span></code>.</p></td>
<td><p>No clock limits known.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4N7BScreen20GetTimingConstraintsEP26display_timing_constraints">
</section>
<h3>
GetTimingConstraints()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">GetTimingConstraints</span><span class="sig-paren">(</span><span class="n">display_timing_constraints</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">dtc</span><span class="sig-paren">)</span></pre><p>This function fills out the <span class="hparameter">dtc</span> structure with the timing constraints of
the current display mode.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>Constraints returned successfully.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ERROR</span></code>.</p></td>
<td><p>No constraints known.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4N7BScreen2IDEv">
</section>
<h3>
ID()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">screen_id</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">ID</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Returns the identifier for the screen. The main screen is identified as
<code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_MAIN_SCREEN_ID</span></code>.</p>
<p>The ID isn’t presistent across boots, and may change if the monitor is
diconnected and then reconnected.</p>
<div class="warning admonition">
<p class="admonition-title">Warning</p>
<p>Currently, this function always returns <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_MAIN_SCREEN_ID</span></code>, even if the
<span class="hclass">BScreen</span> object is invalid.</p>
</div>
<section id="_CPPv4N7BScreen7IsValidEv">
</section>
<h3>
IsValid()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">bool</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">IsValid</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Returns <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">true</span></code> if the <span class="hclass">BScreen</span>
object is valid (if it represents a real
screen connected to the computer), and <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">false</span></code> if not.</p>
<section id="_CPPv4N7BScreen11ProposeModeEP12display_modePK12display_modePK12display_mode">
</section>
<h3>
ProposeMode()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">ProposeMode</span><span class="sig-paren">(</span><span class="n">display_mode</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">candidate</span>, <span class="k">const</span><span class="w"> </span><span class="n">display_mode</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">low</span>, <span class="k">const</span><span class="w"> </span><span class="n">display_mode</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">high</span><span class="sig-paren">)</span></pre><p><span class="hmethod">ProposeMode()</span> is a convenience function
that attempts to adjust <span class="hparameter">candidate</span>
so that it’s a supported mode (as listed by the
<a class="reference internal" href="#_CPPv4N7BScreen11GetModeListEPP12display_modeP6uint32" title="BScreen::GetModeList"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GetModeList()</span></code></a> function).
It then compares the possibly-adjusted <span class="hparameter">candidate</span> to the limits declared
in <span class="hparameter">low</span> and <span class="hparameter">high</span>
and expresses this comparison in the return value. Note
that the function doesn’t adjust <span class="hparameter">candidate</span> so that it is, of necessity,
between <span class="hparameter">low</span> and <span class="hparameter">high</span>.</p>
<p>Exactly how <span class="hmethod">ProposeMode()</span> works is up to the individual graphics driver.
It’s expected that the function will adjust <span class="hparameter">candidate</span>’s screen size
fields while holding the color space constant.</p>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>This function was formerly called <span class="hmethod">ProposeDisplayMode()</span>.</p>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>Candidate (as returned) is supported and falls within the limits.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BAD_VALUE</span></code>.</p></td>
<td><p>Candidate (as returned) is supported, but doesn’t fall within the limits.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ERROR</span></code>.</p></td>
<td><p>candidate isn’t supported.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4N7BScreen10ReadBitmapEP7BBitmapbP5BRect">
</section>
<section id="_CPPv4N7BScreen9GetBitmapEPP7BBitmapbP5BRect">
</section>
<h3>
ReadBitmap(), GetBitmap()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">ReadBitmap</span><span class="sig-paren">(</span><span class="n">BBitmap</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">buffer</span>, <span class="kt">bool</span><span class="w"> </span><span class="n sig-param">draw_cursor</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">true</span>, <span class="n">BRect</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">bounds</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">NULL</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">GetBitmap</span><span class="sig-paren">(</span><span class="n">BBitmap</span><span class="w"> </span><span class="p">*</span><span class="p">*</span><span class="n sig-param">buffer</span>, <span class="kt">bool</span><span class="w"> </span><span class="n sig-param">draw_cursor</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">true</span>, <span class="n">BRect</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">bounds</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">NULL</span><span class="sig-paren">)</span></pre><p>These functions provide read-only access to the screen by copying the
screen’s contents into the first argument
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BBitmap</span></code>. The difference between
them is that <span class="hmethod">ReadBitmap()</span> expects you to allocate the
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BBitmap</span></code> before
passing it in, while <span class="hmethod">GetBitmap()</span> allocates a new
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BBitmap</span></code> for you. The
caller is responsible for freeing the
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BBitmap</span></code> allocated by
<span class="hmethod">GetBitmap()</span>.</p>
<p>The <span class="hparameter">draw_cursor</span> argument determines whether the cursor is drawn in the
screen shot; <span class="hparameter">bounds</span> let you specify the region, in screen coordinates,
that you want copied. If <span class="hparameter">bounds</span> is <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">NULL</span></code>,
the entire screen is copied. The
functions fail if the <span class="hparameter">bounds</span> rectangle doesn’t fall wholly within the
screen’s frame.</p>
<p>The functions return <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code> on success or
<code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ERROR</span></code> on failure.</p>
<section id="_CPPv4N7BScreen15SetDesktopColorE9rgb_colorb">
</section>
<section id="_CPPv4N7BScreen12DesktopColorEv">
</section>
<h3>
SetDesktopColor(), DesktopColor()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">SetDesktopColor</span><span class="sig-paren">(</span><span class="n">rgb_color</span><span class="w"> </span><span class="n sig-param">color</span>, <span class="kt">bool</span><span class="w"> </span><span class="n sig-param">makeDefault</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">true</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">rgb_color</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">DesktopColor</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>These functions set and return the color of the desktop—the
backdrop against which windows are displayed on the screen.
<span class="hmethod">SetDesktopColor()</span> makes an immediate change in the desktop color
displayed on-screen;
<span class="hmethod">DesktopColor()</span> returns the color currently displayed.</p>
<p>If the <span class="hparameter">makeDefault</span> flag is <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">true</span></code>,
the color that’s set becomes the default
color for the screen; it’s the color that will be shown the next time the
machine is booted. If the flag is <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">false</span></code>, the color is set only for the
current session.</p>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>The “Background Images” section tells you how to convince the desktop
to display a bitmap image.</p>
</div>
<p>Typically, users choose the desktop color with the Screen preferences
application.</p>
<section id="_CPPv4N7BScreen7SetDPMSE6uint32">
</section>
<section id="_CPPv4N7BScreen9DPMSStateEv">
</section>
<section id="_CPPv4N7BScreen16DPMSCapabilitiesEv">
</section>
<h3>
SetDPMS(), DPMSState(), DPMSCapabilities()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">SetDPMS</span><span class="sig-paren">(</span><span class="n">uint32</span><span class="w"> </span><span class="n sig-param">dpmsState</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">uint32</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">DPMSState</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">uint32</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">DPMSCapabilities</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p><span class="hmethod">SetDPMS()</span> lets you set the VESA Display Power Management Signaling state
for the screen. The state can be one of the following values:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Constant</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_DPMS_ON</span></code></p></td>
<td><p>Image is visible, normal screen operation.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_DPMS_STAND_BY</span></code></p></td>
<td><p>Image is not visible, but can be restored “instantly.” Saves around 30% of the power used by the monitor in <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_DPMS_ON</span></code> mode.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_DPMS_SUSPEND</span></code></p></td>
<td><p>Image is not visible, but can be restored in less than five seconds. Saves more power by turning off the CRT’s heater. The amount of savings (or if there’s any) depends on the display.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_DPMS_OFF</span></code></p></td>
<td><p>Image is not visible and will take some time to restore. Typically turns off all monitor power except the processor watching the sync signals for a higher power state (typically <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_DPMS_ON</span></code>).</p></td>
</tr>
</tbody>
</table>
<p><span class="hmethod">DPMSState()</span> returns the current display state, indicating whether the
monitor is on or off or in one of the two sleep modes.</p>
<p><span class="hmethod">DPMSCapabilities()</span> indicates which of the above modes the monitor
supports.</p>
<section id="_CPPv4N7BScreen9SetToNextEv">
</section>
<h3>
SetToNext()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">SetToNext</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>In the current BeOS release, this function always returns <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ERROR</span></code>.</p>
<section id="_CPPv4N7BScreen14WaitForRetraceEv">
</section>
<h3>
WaitForRetrace()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">WaitForRetrace</span><span class="sig-paren">(</span><span class="sig-paren">)</span><br /><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BScreen</span><span class="p">::</span></span><span class="n">WaitForRetrace</span><span class="sig-paren">(</span><span class="n">bigtime_t</span><span class="w"> </span><span class="n sig-param">timeout</span><span class="sig-paren">)</span></pre><p>Blocks until the monitor has finished the current vertical retrace, then
returns <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code>. There are a few milliseconds available before it begins
another retrace. Drawing changes made to the frame buffer in this period
won’t cause any “flicker” on-screen.</p>
<p>For some graphics card drivers, this function will wait for vertical
sync; for others it will wait until vertical blank, providing a few extra
milliseconds.</p>
<p>The <span class="hparameter">timeout</span> argument lets you provide a timeout in microseconds—if
the screen hasn’t retraced within the limit, the function returns
<code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ERROR</span></code>.</p>
</section>
</section>


        <div class="clearer"></div>
      </div>
          </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="region.html">BRegion</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="scroll-bar.html">BScrollBar</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, Haiku, Inc..
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>