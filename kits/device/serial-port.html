
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>BSerialPort &#8212; The Haiku Book  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/haiku.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/code.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Constants" href="../game/constants.html" />
    <link rel="prev" title="BJoystick" href="joystick.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../../index.html">
          <span>API Documentation</span></a></h1>
        <h2 class="heading"><span>BSerialPort</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="joystick.html">BJoystick</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="../game/constants.html">Constants</a>&#160;&#160;»
        </p>

      </div>
        
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">BSerialPort</a><ul>
<li><a class="reference internal" href="#constructor-and-destructor">Constructor and Destructor</a><ul>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort11BSerialPortEv">BSerialPort</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPortD0Ev">~BSerialPort</a></li>
</ul>
</li>
<li><a class="reference internal" href="#member-functions">Member Functions</a><ul>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort10ClearInputEv">ClearInput</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort11ClearOutputEv">ClearOutput</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort12CountDevicesEv">CountDevices</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort13GetDeviceNameE5int32Pc6size_t">GetDeviceName</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort5IsCTSEv">IsCTS</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort5IsDCDEv">IsDCD</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort5IsDSREv">IsDSR</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort4IsRIEv">IsRI</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort4OpenEPKc">Open</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort5CloseEv">Close</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort4ReadEPv6size_t">Read</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort11SetBlockingEb">SetBlocking</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort10SetTimeoutE9bigtime_t">SetTimeout</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort11SetDataBitsE9data_bits">SetDataBits</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort11SetStopBitsE9stop_bits">SetStopBits</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort13SetParityModeE11parity_mode">SetParityMode</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort8DataBitsEv">DataBits</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort8StopBitsEv">StopBits</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort10ParityModeEv">ParityMode</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort11SetDataRateE9data_rate">SetDataRate</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort8DataRateEv">DataRate</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort6SetDTREb">SetDTR</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort14SetFlowControlE6uint32">SetFlowControl</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort11FlowControlEv">FlowControl</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort6SetRTSEb">SetRTS</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort12WaitForInputEv">WaitForInput</a></li>
<li><a class="reference internal" href="#_CPPv4N11BSerialPort5WriteEPKv6size_t">Write</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>

        </div>
      </div>
          <div class="bodywrapper">
      <div class="content" role="main">
        
  <section id="bserialport">
<h1 id="CPPv411BSerialPort">BSerialPort<a class="headerlink" href="#bserialport" title="Permalink to this heading">¶</a></h1>
<section id="constructor-and-destructor">
<h2>Constructor and Destructor<a class="headerlink" href="#constructor-and-destructor" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4N11BSerialPort11BSerialPortEv">
</section>
<h3>
BSerialPort()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N11BSerialPort11BSerialPortEv" title="BSerialPort::BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">BSerialPort</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Initializes the <span class="hclass">BSerialPort</span> object to the following default
values:</p>
<ul class="simple">
<li><p>Hardware flow control (see <a class="reference internal" href="#_CPPv4N11BSerialPort14SetFlowControlE6uint32" title="BSerialPort::SetFlowControl"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetFlowControl()</span></code></a>)</p></li>
<li><p>A data rate of 19,200 bits per second (see <a class="reference internal" href="#_CPPv4N11BSerialPort11SetDataRateE9data_rate" title="BSerialPort::SetDataRate"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetDataRate()</span></code></a>)</p></li>
<li><p>A serial unit with 8 bits of data, 1 stop bit, and no parity (see
<a class="reference internal" href="#_CPPv4N11BSerialPort11SetDataBitsE9data_bits" title="BSerialPort::SetDataBits"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetDataBits()</span></code></a>)</p></li>
<li><p>Blocking with no time limit—an infinite timeout—for reading data (see
<a class="reference internal" href="#_CPPv4N11BSerialPort4ReadEPv6size_t" title="BSerialPort::Read"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Read()</span></code></a>)</p></li>
</ul>
<p>The new object doesn’t represent any particular serial port. After
construction, it’s necessary to open one of the ports by name.</p>
<p>The type of flow control must be decided before a port is opened. But the
other default settings listed above can be changed before or after opening
a port.</p>
<p>See also: <a class="reference internal" href="#_CPPv4N11BSerialPort4OpenEPKc" title="BSerialPort::Open"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Open()</span></code></a></p>
<section id="_CPPv4N11BSerialPortD0Ev">
</section>
<h3>
~BSerialPort()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">~BSerialPort</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Makes sure the port is closed before the object is destroyed.</p>
</section>
<section id="member-functions">
<h2>Member Functions<a class="headerlink" href="#member-functions" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4N11BSerialPort10ClearInputEv">
</section>
<section id="_CPPv4N11BSerialPort11ClearOutputEv">
</section>
<h3>
ClearInput(), ClearOutput()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">ClearInput</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">ClearOutput</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>These functions empty the serial port driver’s input and output buffers,
so that the contents of the input buffer won’t be read (by the
<a class="reference internal" href="#_CPPv4N11BSerialPort4ReadEPv6size_t" title="BSerialPort::Read"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Read()</span></code></a> function) and the contents of the
output buffer (after having been written by <a class="reference internal" href="#_CPPv4N11BSerialPort5WriteEPKv6size_t" title="BSerialPort::Write"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Write()</span></code></a>) won’t be transmitted over the connection.</p>
<p>The buffers are cleared automatically when a port is opened.</p>
<section id="_CPPv4N11BSerialPort12CountDevicesEv">
</section>
<section id="_CPPv4N11BSerialPort13GetDeviceNameE5int32Pc6size_t">
</section>
<h3>
CountDevices(), GetDeviceName()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">int32</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">CountDevices</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="../storage/the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">GetDeviceName</span><span class="sig-paren">(</span><span class="n">int32</span><span class="w"> </span><span class="n sig-param">index</span>, <span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">outName</span>, <span class="n">size_t</span><span class="w"> </span><span class="n sig-param">bufSize</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><a class="reference internal" href="../kernel/miscellaneous.html#_CPPv416B_OS_NAME_LENGTH" title="B_OS_NAME_LENGTH"><span class="n">B_OS_NAME_LENGTH</span></a><span class="sig-paren">)</span></pre><p><span class="hmethod">CountDevices()</span> returns the number of serial ports on the
computer.</p>
<p><span class="hmethod">GetDeviceName()</span> returns the name of the device specified by the
given <span class="hparameter">index</span>. The buffer pointed to by <span class="hparameter">outName</span> is filled
with the device name; <span class="hparameter">bufSize</span> indicates the size of the buffer.</p>
<p>The names returned by <span class="hmethod">GetDeviceName()</span> can be passed into the
<a class="reference internal" href="#_CPPv4N11BSerialPort4OpenEPKc" title="BSerialPort::Open"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Open()</span></code></a> function to open a device.</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>The name was returned successfully.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_BAD_INDEX</span></code>.</p></td>
<td><p>The specified <span class="hparameter">index</span> is invalid.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_NAME_TOO_LONG</span></code>.</p></td>
<td><p>The device name is too long for the buffer.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4N11BSerialPort5IsCTSEv">
</section>
<h3>
IsCTS()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">bool</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">IsCTS</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Returns <span class="cpp-expr sig sig-inline cpp"><span class="k">true</span></span> if the Clear to Send (CTS) pin is asserted, and
<span class="cpp-expr sig sig-inline cpp"><span class="k">false</span></span> if not.</p>
<section id="_CPPv4N11BSerialPort5IsDCDEv">
</section>
<h3>
IsDCD()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">bool</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">IsDCD</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Returns <span class="cpp-expr sig sig-inline cpp"><span class="k">true</span></span> if the Data Carrier Detect (DCD) pin is asserted,
and <span class="cpp-expr sig sig-inline cpp"><span class="k">false</span></span> if not.</p>
<section id="_CPPv4N11BSerialPort5IsDSREv">
</section>
<h3>
IsDSR()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">bool</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">IsDSR</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Returns <span class="cpp-expr sig sig-inline cpp"><span class="k">true</span></span> if the Data Set Ready (DSR) pin is asserted, and
<span class="cpp-expr sig sig-inline cpp"><span class="k">false</span></span> if not.</p>
<section id="_CPPv4N11BSerialPort4IsRIEv">
</section>
<h3>
IsRI()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">bool</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">IsRI</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Returns <span class="cpp-expr sig sig-inline cpp"><span class="k">true</span></span> if the Ring Indicator (RI) pin is asserted, and
<span class="cpp-expr sig sig-inline cpp"><span class="k">false</span></span> if not.</p>
<section id="_CPPv4N11BSerialPort4OpenEPKc">
</section>
<section id="_CPPv4N11BSerialPort5CloseEv">
</section>
<h3>
Open(), Close()</h3><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="../storage/the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">Open</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">name</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">Close</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>These functions open the <span class="hparameter">name</span> serial port and close it again. To
get a serial port name, use the <span class="hmethod">GetDeviceName()</span> function</p>
<p>To be able to read and write data, the <span class="hclass">BSerialPort</span> object must
have a port open. It can open first one port and then another, but it can
have no more than one open at a time. If it already has a port open when
<span class="hmethod">Open()</span> is called, that port is closed before an attempt is made
to open the <span class="hparameter">name</span> port. (Thus, both <span class="hmethod">Open()</span> and
<span class="hmethod">Close()</span> close the currently open port.)</p>
<p><span class="hmethod">Open()</span> can’t open the <span class="hparameter">name</span> port if some other entity
already has it open. (If the <span class="hclass">BSerialPort</span> itself has
<span class="hparameter">name</span> open, <span class="hmethod">Open()</span> first closes it, then opens it
again.)</p>
<p>When a serial port is opened, its input and output buffers are emptied and
the Data Terminal Ready (DTR) pin is asserted.</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>positive integers (not 0).</p></td>
<td><p>Success.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_PERMISSION_DENIED</span></code>.</p></td>
<td><p>The port is already open.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_ERROR</span></code>.</p></td>
<td><p>The port couldn’t be opened for some other reason.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4N11BSerialPort4ReadEPv6size_t">
</section>
<section id="_CPPv4N11BSerialPort11SetBlockingEb">
</section>
<section id="_CPPv4N11BSerialPort10SetTimeoutE9bigtime_t">
</section>
<h3>
Read(), SetBlocking(), SetTimeout()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">ssize_t</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">Read</span><span class="sig-paren">(</span><span class="kt">void</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">buffer</span>, <span class="n">size_t</span><span class="w"> </span><span class="n sig-param">maxBytes</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">SetBlocking</span><span class="sig-paren">(</span><span class="kt">bool</span><span class="w"> </span><span class="n sig-param">shouldBlock</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="../storage/the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">SetTimeout</span><span class="sig-paren">(</span><span class="n">bigtime_t</span><span class="w"> </span><span class="n sig-param">timeout</span><span class="sig-paren">)</span></pre><p><span class="hmethod">Read()</span> takes incoming data from the serial port driver and
places it in the data <span class="hparameter">buffer</span> provided. In no case will it read
more than <span class="hparameter">maxBytes</span>—a value that should reflect the capacity of
the buffer. The input buffer of the driver, from which <span class="hmethod">Read()</span>
takes the data, holds a maximum of 2,024 bytes (2048 on Mac hardware). This
function fails if the <span class="hclass">BSerialPort</span> object doesn’t have a port
open.</p>
<p>The number of bytes that <span class="hmethod">Read()</span> will read before returning
depends not only on <span class="hparameter">maxBytes</span>, but also on the
<span class="hparameter">shouldBlock</span> flag and the <span class="hparameter">timeout</span> set by the other two
functions.</p>
<ul class="simple">
<li><p><span class="hmethod">SetBlocking()</span> determines whether <span class="hmethod">Read()</span> should block
and wait for <span class="hparameter">maxBytes</span> of data to arrive at the serial port if
that number isn’t already available to be read. If the
<span class="hparameter">shouldBlock</span> flag is <span class="cpp-expr sig sig-inline cpp"><span class="k">true</span></span>, <span class="hmethod">Read()</span> will
block. However, if <span class="hparameter">shouldBlock</span> is <span class="cpp-expr sig sig-inline cpp"><span class="k">false</span></span>,
<span class="hmethod">Read()</span> will take however many bytes are waiting to be read, up
to the maximum asked for, then return immediately. If no data is waiting at
the serial port, it returns without reading anything.</p></li>
<li><p>The default <span class="hparameter">shouldBlock</span> setting is <span class="cpp-expr sig sig-inline cpp"><span class="k">true</span></span>.</p></li>
<li><p><span class="hmethod">SetTimeout()</span> sets a time limit on how long <span class="hmethod">Read()</span>
will block while waiting for data to arrive at the port’s input buffer. The
timeout is relevant to <span class="hmethod">Read()</span> only if the <span class="hparameter">shouldBlock</span>
flag is <span class="cpp-expr sig sig-inline cpp"><span class="k">true</span></span>. However, the time limit also applies to the
<a class="reference internal" href="#_CPPv4N11BSerialPort12WaitForInputEv" title="BSerialPort::WaitForInput"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">WaitForInput()</span></code></a> function, which
always blocks, regardless of the <span class="hparameter">shouldBlock</span> setting.</p></li>
<li><p>There is no time limit if the timeout is set to
<a class="reference internal" href="../kernel/miscellaneous.html#_CPPv418B_INFINITE_TIMEOUT" title="B_INFINITE_TIMEOUT"><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_INFINITE_TIMEOUT</span></code></a>—<span class="hmethod">Read()</span> and
<a class="reference internal" href="#_CPPv4N11BSerialPort12WaitForInputEv" title="BSerialPort::WaitForInput"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">WaitForInput()</span></code></a> will block forever.
Otherwise, the timeout is expressed in microseconds and can range from a
minimum of 100,000 (0.1 second) through a maximum of 25,500,000 (25.5
seconds); differences less than 100,000 microseconds are not recognized;
they’re rounded to the nearest tenth of a second.</p></li>
<li><p>The default timeout is <a class="reference internal" href="../kernel/miscellaneous.html#_CPPv418B_INFINITE_TIMEOUT" title="B_INFINITE_TIMEOUT"><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_INFINITE_TIMEOUT</span></code></a>.</p></li>
</ul>
<p><span class="hmethod">Read()</span> returns…</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>non-negative integer.</p></td>
<td><p>Success; the value is the number of bytes that were read.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_INTERRUPTED</span></code>.</p></td>
<td><p>The operation was interrupted by a signal.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_FILE_ERROR</span></code>.</p></td>
<td><p>The <span class="hclass">BSerialPort</span> doesn’t have a port open.</p></td>
</tr>
</tbody>
</table>
<p><span class="hmethod">SetTimeout()</span> returns…</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>Success.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_BAD_VALUE</span></code>.</p></td>
<td><p>Out of range value passed to <span class="hmethod">SetTimeout()</span>.</p></td>
</tr>
</tbody>
</table>
<p>(Note that it’s not considered an error if a timeout expires.)</p>
<section id="_CPPv4N11BSerialPort11SetDataBitsE9data_bits">
</section>
<section id="_CPPv4N11BSerialPort11SetStopBitsE9stop_bits">
</section>
<section id="_CPPv4N11BSerialPort13SetParityModeE11parity_mode">
</section>
<section id="_CPPv4N11BSerialPort8DataBitsEv">
</section>
<section id="_CPPv4N11BSerialPort8StopBitsEv">
</section>
<section id="_CPPv4N11BSerialPort10ParityModeEv">
</section>
<h3>
SetDataBits(), SetStopBits(), SetParityMode(), DataBits(), StopBits(), ParityMode()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">SetDataBits</span><span class="sig-paren">(</span><span class="n">data_bits</span><span class="w"> </span><span class="n sig-param">count</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">SetStopBits</span><span class="sig-paren">(</span><span class="n">stop_bits</span><span class="w"> </span><span class="n sig-param">count</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">SetParityMode</span><span class="sig-paren">(</span><span class="n">parity_mode</span><span class="w"> </span><span class="n sig-param">mode</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">data_bits</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">DataBits</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">stop_bits</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">StopBits</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">parity_mode</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">ParityMode</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">B_DATA_BITS_7</span><span class="p">,</span><span class="w"> </span><span class="n">B_DATA_BITS_8</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="n">data_bits</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">B_STOP_BITS_1</span><span class="p">,</span><span class="w"> </span><span class="n">B_STOP_BITS_2</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="n">stop_bits</span><span class="w"></span>
</pre></div>
</div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">B_EVEN_PARITY</span><span class="p">,</span><span class="w"> </span><span class="n">B_ODD_PARITY</span><span class="p">,</span><span class="w"> </span><span class="n">B_NO_PARITY</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="n">parity_mode</span><span class="w"></span>
</pre></div>
</div>
<p>These functions set and return characteristics of the serial unit used to
send and receive data.</p>
<ul class="simple">
<li><p><span class="hmethod">SetDataBits()</span> sets the number of bits of data in each unit; the
default is <code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_DATA_BITS_8</span></code>.</p></li>
<li><p><span class="hmethod">SetStopBits()</span> sets the number of stop bits in each unit; the
default is <code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_STOP_BITS_2</span></code>.</p></li>
<li><p><span class="hmethod">SetParityMode()</span> sets whether the serial unit contains a parity
bit and, if so, the type of parity used; the default is
<code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_NO_PARITY</span></code>.</p></li>
</ul>
<section id="_CPPv4N11BSerialPort11SetDataRateE9data_rate">
</section>
<section id="_CPPv4N11BSerialPort8DataRateEv">
</section>
<h3>
SetDataRate(), DataRate()</h3><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="../storage/the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">SetDataRate</span><span class="sig-paren">(</span><span class="n">data_rate</span><span class="w"> </span><span class="n sig-param">bitsPerSecond</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">data_rate</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">DataRate</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">B_0_BPS</span><span class="p">,</span><span class="w">     </span><span class="n">B_50_BPS</span><span class="p">,</span><span class="w">    </span><span class="n">B_75_BPS</span><span class="p">,</span><span class="w">    </span><span class="n">B_110_BPS</span><span class="p">,</span><span class="w">    </span><span class="n">B_134_BPS</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">B_150_BPS</span><span class="p">,</span><span class="w">   </span><span class="n">B_200_BPS</span><span class="p">,</span><span class="w">   </span><span class="n">B_300_BPS</span><span class="p">,</span><span class="w">   </span><span class="n">B_600_BPS</span><span class="p">,</span><span class="w">    </span><span class="n">B_1200_BPS</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">B_1800_BPS</span><span class="p">,</span><span class="w">  </span><span class="n">B_2400_BPS</span><span class="p">,</span><span class="w">  </span><span class="n">B_4800_BPS</span><span class="p">,</span><span class="w">  </span><span class="n">B_9600_BPS</span><span class="p">,</span><span class="w">   </span><span class="n">B_19200_BPS</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">B_31250_BPS</span><span class="p">,</span><span class="w"> </span><span class="n">B_38400_BPS</span><span class="p">,</span><span class="w"> </span><span class="n">B_57600_BPS</span><span class="p">,</span><span class="w"> </span><span class="n">B_115200_BPS</span><span class="p">,</span><span class="w"> </span><span class="n">B_230400_BPS</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">data_rate</span><span class="w"></span>
</pre></div>
</div>
<p>These functions set and return the rate (in bits per second) at which data
is both transmitted and received.</p>
<p>The default data rate is <code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_19200_BPS</span></code>. If the rate is set
to 0 (<code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_0_BPS</span></code>), data will be sent and received at an
indeterminate number of bits per second.</p>
<p><span class="hmethod">SetDataRate()</span> returns…</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>The rate was successfully set.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_NO_INIT</span></code>.</p></td>
<td><p>The <span class="hclass">BSerialPort</span> object doesn’t have a port open.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_ERROR</span></code>.</p></td>
<td><p>The data rate couldn’t be set for any other reason.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4N11BSerialPort6SetDTREb">
</section>
<h3>
SetDTR()</h3><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="../storage/the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">SetDTR</span><span class="sig-paren">(</span><span class="kt">bool</span><span class="w"> </span><span class="n sig-param">pinAsserted</span><span class="sig-paren">)</span></pre><p>Asserts the Data Terminal Ready (DTR) pin if the <span class="hparameter">pinAsserted</span>
flag is <span class="cpp-expr sig sig-inline cpp"><span class="k">true</span></span>, and de-asserts it if the flag is
<span class="cpp-expr sig sig-inline cpp"><span class="k">false</span></span>. The function should always return
<code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code>.</p>
<section id="_CPPv4N11BSerialPort14SetFlowControlE6uint32">
</section>
<section id="_CPPv4N11BSerialPort11FlowControlEv">
</section>
<h3>
SetFlowControl(), FlowControl()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">SetFlowControl</span><span class="sig-paren">(</span><span class="n">uint32</span><span class="w"> </span><span class="n sig-param">mask</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">uint32</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">FlowControl</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>These functions set and return the type of flow control the driver should
use. There are four possibilities:</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Constant</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_SOFTWARE_CONTROL</span></code></p></td>
<td><p>Control is maintained through XON and XOFF characters inserted into the
data stream.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_HARDWARE_CONTROL</span></code></p></td>
<td><p>Control is maintained through the Clear to Send (CTS) and Request to Send
(RTS) pins.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_SOFTWARE_CONTROL</span></code>+<code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_HARDWARE_CONTROL</span></code></p></td>
<td><p>Both of the above.</p></td>
</tr>
<tr class="row-odd"><td><p>0 (zero)</p></td>
<td><p>No control.</p></td>
</tr>
</tbody>
</table>
<p><span class="hmethod">SetFlowControl()</span> should be called before a specific serial port
is opened. You can’t change the type of flow control the driver uses in
midstream.</p>
<section id="_CPPv4N11BSerialPort6SetRTSEb">
</section>
<h3>
SetRTS()</h3><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="../storage/the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">SetRTS</span><span class="sig-paren">(</span><span class="kt">bool</span><span class="w"> </span><span class="n sig-param">pinAsserted</span><span class="sig-paren">)</span></pre><p>Asserts the Request to Send (RTS) pin if the <span class="hparameter">pinAsserted</span> flag is
<span class="cpp-expr sig sig-inline cpp"><span class="k">true</span></span>, and de-asserts it if the flag is <span class="cpp-expr sig sig-inline cpp"><span class="k">false</span></span>. The
function always returns <code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code>.</p>
<section id="_CPPv4N11BSerialPort12WaitForInputEv">
</section>
<h3>
WaitForInput()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">ssize_t</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">WaitForInput</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Waits for input data to arrive at the serial port and returns the number
of bytes available to be read. If data is already waiting, the function
returns immediately.</p>
<p>This function doesn’t respect the flag set by <a class="reference internal" href="#_CPPv4N11BSerialPort11SetBlockingEb" title="BSerialPort::SetBlocking"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetBlocking()</span></code></a>; it blocks even if blocking is turned off for
the <a class="reference internal" href="#_CPPv4N11BSerialPort4ReadEPv6size_t" title="BSerialPort::Read"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Read()</span></code></a> function. However, it does
respect the timeout set by <a class="reference internal" href="#_CPPv4N11BSerialPort10SetTimeoutE9bigtime_t" title="BSerialPort::SetTimeout"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetTimeout()</span></code></a>. If the timeout expires before input data
arrives at the serial port, it returns 0.</p>
<section id="_CPPv4N11BSerialPort5WriteEPKv6size_t">
</section>
<h3>
Write()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">ssize_t</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BSerialPort" title="BSerialPort"><span class="n">BSerialPort</span></a><span class="p">::</span></span><span class="n">Write</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">data</span>, <span class="n">size_t</span><span class="w"> </span><span class="n sig-param">numBytes</span><span class="sig-paren">)</span></pre><p>Writes up to <span class="hparameter">numBytes</span> of data to the serial port’s output
buffer. This function will be successful in writing the data only if the
<span class="hclass">BSerialPort</span> object has a port open. The output buffer holds a
maximum of 512 bytes (1024 on Mac hardware).</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>non-negative integer.</p></td>
<td><p>Success; the value is the number of bytes that were written.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_INTERRUPTED</span></code>.</p></td>
<td><p>The operation was interrupted by a signal.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_FILE_ERROR</span></code>.</p></td>
<td><p>The <span class="hclass">BSerialPort</span> doesn’t have a port open.</p></td>
</tr>
</tbody>
</table>
</section>
</section>


        <div class="clearer"></div>
      </div>
          </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="joystick.html">BJoystick</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="../game/constants.html">Constants</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, Haiku, Inc..
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>