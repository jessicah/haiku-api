
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>BPositionIO &#8212; The Haiku Book  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/haiku.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/code.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="BStopWatch" href="stop-watch.html" />
    <link rel="prev" title="BMemoryIO" href="memory-io.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../../index.html">
          <span>API Documentation</span></a></h1>
        <h2 class="heading"><span>BPositionIO</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="memory-io.html">BMemoryIO</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="stop-watch.html">BStopWatch</a>&#160;&#160;»
        </p>

      </div>
        
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">BPositionIO</a><ul>
<li><a class="reference internal" href="#constructor-and-destructor">Constructor and Destructor</a><ul>
<li><a class="reference internal" href="#_CPPv4N11BPositionIO11BPositionIOEv">BPositionIO</a></li>
</ul>
</li>
<li><a class="reference internal" href="#member-functions">Member Functions</a><ul>
<li><a class="reference internal" href="#_CPPv4N11BPositionIO4ReadEPv6size_t">Read</a></li>
<li><a class="reference internal" href="#_CPPv4N11BPositionIO6ReadAtE5off_tPv6size_t">ReadAt</a></li>
<li><a class="reference internal" href="#_CPPv4N11BPositionIO4SeekE5off_t5int32">Seek</a></li>
<li><a class="reference internal" href="#_CPPv4NK11BPositionIO8PositionEv">Position</a></li>
<li><a class="reference internal" href="#_CPPv4N11BPositionIO7SetSizeE5off_t">SetSize</a></li>
<li><a class="reference internal" href="#_CPPv4N11BPositionIO5WriteEPKv6size_t">Write</a></li>
<li><a class="reference internal" href="#_CPPv4N11BPositionIO7WriteAtE5off_tPKv6size_t">WriteAt</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>

        </div>
      </div>
          <div class="bodywrapper">
      <div class="content" role="main">
        
  <section id="bpositionio">
<h1 id="CPPv411BPositionIO">BPositionIO<a class="headerlink" href="#bpositionio" title="Permalink to this heading">¶</a></h1>
<section id="constructor-and-destructor">
<h2>Constructor and Destructor<a class="headerlink" href="#constructor-and-destructor" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4N11BPositionIO11BPositionIOEv">
</section>
<h3>
BPositionIO()</h3><p>BPositionIO()</p>
<pre style="background: #f3f3f3; line-height: 2em"><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N11BPositionIO11BPositionIOEv" title="BPositionIO::BPositionIO"><span class="n">BPositionIO</span></a><span class="p">::</span></span><span class="n">BPositionIO</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Does nothing. Constructors in derived classes should initialize the object to default values—for
example, set the current position to the beginning of the data.</p>
<h3>
</h3><p>~BPositionIO()</p>
<p>Does nothing.</p>
</section>
<section id="member-functions">
<h2>Member Functions<a class="headerlink" href="#member-functions" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4N11BPositionIO4ReadEPv6size_t">
</section>
<section id="_CPPv4N11BPositionIO6ReadAtE5off_tPv6size_t">
</section>
<h3>
Read(), ReadAt()</h3><p>“Read(), ReadAt()”</p>
<pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="n">ssize_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BPositionIO</span><span class="p">::</span></span><span class="n">Read</span><span class="sig-paren">(</span><span class="kt">void</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">buffer</span>, <span class="n">size_t</span><span class="w"> </span><span class="n sig-param">numBytes</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="n">ssize_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BPositionIO</span><span class="p">::</span></span><span class="n">ReadAt</span><span class="sig-paren">(</span><span class="n">off_t</span><span class="w"> </span><span class="n sig-param">position</span>, <span class="kt">void</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">buffer</span>, <span class="n">size_t</span><span class="w"> </span><span class="n sig-param">numBytes</span><span class="sig-paren">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span></pre><p><span class="hmethod">Read()</span> copies <span class="hparameter">numBytes</span> bytes of data from the object to the <span class="hparameter">buffer</span>.
It returns the number of bytes actually read (which may be 0) or an error code if something goes
wrong. <span class="hmethod">Read()</span> is implemented using <a class="reference internal" href="#_CPPv4N11BPositionIO4SeekE5off_t5int32" title="BPositionIO::Seek"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Seek()</span></code></a>, <span class="hmethod">ReadAt()</span>,
and <a class="reference internal" href="#_CPPv4NK11BPositionIO8PositionEv" title="BPositionIO::Position"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">BPositionIO::Position()</span></code></a>, all of which are pure virtual functions.</p>
<p><span class="hmethod">ReadAt()</span> is a pure virtual that must be implemented by derived classes to read
<span class="hparameter">numBytes</span> bytes of data beginning at <span class="hparameter">position</span> in the data source, and to place
them in the <span class="hparameter">buffer</span>. It should return the number of bytes actually read, or an error code
if something goes wrong.</p>
<section id="_CPPv4N11BPositionIO4SeekE5off_t5int32">
</section>
<section id="_CPPv4NK11BPositionIO8PositionEv">
</section>
<h3>
Seek(), Position()</h3><p>“Seek(), Position()”</p>
<pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="n">off_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BPositionIO</span><span class="p">::</span></span><span class="n">Seek</span><span class="sig-paren">(</span><span class="n">off_t</span><span class="w"> </span><span class="n sig-param">position</span>, <span class="n">int32</span><span class="w"> </span><span class="n sig-param">mode</span><span class="sig-paren">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="n">off_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BPositionIO</span><span class="p">::</span></span><span class="n">Position</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span></pre><p><span class="hmethod">Seek()</span> is implemented by derived classes to modify the current position maintained by the
object. The current position is an offset in bytes from the beginning of the object’s data. How the
{hparam{<code class="docutils literal notranslate"><span class="pre">position</span></code> argument is interpreted will depend on the <span class="hparameter">mode</span> flag. Three possible
modes should be supported:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Constant</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">SEEK_SET</span></code></p></td>
<td><p>The <span class="hparameter">position</span> passed is an offset from the beginning of allocated memory; in other
words, the current position should be set to <span class="hparameter">position</span>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">SEEK_CUR</span></code></p></td>
<td><p>The <span class="hparameter">position</span> argument is an offset from the current position; the current position
should be incremented by <span class="hparameter">position</span>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">SEEK_END</span></code></p></td>
<td><p>The <span class="hparameter">position</span> argument is an offset from the end of the data; the current position should be
the sum of <span class="hparameter">position</span> plus the number of bytes in the data.</p></td>
</tr>
</tbody>
</table>
<p>For the <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">SEEK_SET</span></code> mode, <span class="hparameter">position</span> should be a positive value. The other modes permit negative offsets.</p>
<p><span class="hmethod">Seek()</span> should return the new position.</p>
<p><span class="hmethod">Position()</span> should return the current position.</p>
<section id="_CPPv4N11BPositionIO7SetSizeE5off_t">
</section>
<h3>
SetSize()</h3><p>SetSize()</p>
<pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BPositionIO</span><span class="p">::</span></span><span class="n">SetSize</span><span class="sig-paren">(</span><span class="n">off_t</span><span class="w"> </span><span class="n sig-param">numBytes</span><span class="sig-paren">)</span></pre><p>Returns <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ERROR</span></code> to indicate that, in general, <span class="hclass">BPositionIO</span> objects can’t set
the amount of memory in the repositories they represent. However, the <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BMallocIO</span></code> class
in this kit and <a class="reference internal" href="../storage/file.html#_CPPv45BFile" title="BFile"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BFile</span></code></a> in the “Storage Kit” implement <span class="hmethod">SetSize()</span> functions
that override this default.</p>
<section id="_CPPv4N11BPositionIO5WriteEPKv6size_t">
</section>
<section id="_CPPv4N11BPositionIO7WriteAtE5off_tPKv6size_t">
</section>
<h3>
Write(), WriteAt()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="n">ssize_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BPositionIO</span><span class="p">::</span></span><span class="n">Write</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">buffer</span>, <span class="n">size_t</span><span class="w"> </span><span class="n sig-param">numBytes</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="n">ssize_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BPositionIO</span><span class="p">::</span></span><span class="n">WriteAt</span><span class="sig-paren">(</span><span class="n">off_t</span><span class="w"> </span><span class="n sig-param">position</span>, <span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">buffer</span>, <span class="n">size_t</span><span class="w"> </span><span class="n sig-param">numBytes</span><span class="sig-paren">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span></pre><p><span class="hmethod">Write()</span> copies <span class="hparameter">numBytes</span> bytes of data from the object into the
<span class="hparameter">buffer</span>. It returns the number of bytes actually written (which may be 0) or an error code
if something goes wrong. <span class="hmethod">Write()</span> is implemented using <a class="reference internal" href="#_CPPv4N11BPositionIO4SeekE5off_t5int32" title="BPositionIO::Seek"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Seek()</span></code></a>,
<a class="reference internal" href="#_CPPv4NK11BPositionIO8PositionEv" title="BPositionIO::Position"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Position()</span></code></a>, and {hmethod}WriteAt()`, all of which are pure virtual
functions.</p>
<p><span class="hmethod">WriteAt()</span> is a pure virtual that must be implemented by derived classes to copy
<span class="hparameter">numBytes</span> bytes of data from <span class="hparameter">buffer</span> and write them into the object, starting at
byte <span class="hparameter">position</span> within the object. It should return the number of bytes actually read, or an
error code if something goes wrong.</p>
</section>
</section>


        <div class="clearer"></div>
      </div>
          </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="memory-io.html">BMemoryIO</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="stop-watch.html">BStopWatch</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, Haiku, Inc..
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>