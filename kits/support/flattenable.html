
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>BFlattenable &#8212; The Haiku Book  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/haiku.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/code.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Functions and Macros" href="functions.html" />
    <link rel="prev" title="BDataIO" href="data-io.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../../index.html">
          <span>API Documentation</span></a></h1>
        <h2 class="heading"><span>BFlattenable</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="data-io.html">BDataIO</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="functions.html">Functions and Macros</a>&#160;&#160;»
        </p>

      </div>
        
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">BFlattenable</a><ul>
<li><a class="reference internal" href="#member-functions">Member Functions</a><ul>
<li><a class="reference internal" href="#_CPPv4NK7FlattenEPv7ssize_t">Flatten</a></li>
<li><a class="reference internal" href="#_CPPv49Unflatten9type_codePKv7ssize_t">Unflatten</a></li>
<li><a class="reference internal" href="#_CPPv4NK12BFlattenable13FlattenedSizeEv">FlattenedSize</a></li>
<li><a class="reference internal" href="#_CPPv4NK12BFlattenable8TypeCodeEv">TypeCode</a></li>
<li><a class="reference internal" href="#_CPPv4NK12BFlattenable14AllowsTypeCodeE9type_code">AllowsTypeCode</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>

        </div>
      </div>
          <div class="bodywrapper">
      <div class="content" role="main">
        
  <section id="bflattenable">
<h1>BFlattenable<a class="headerlink" href="#bflattenable" title="Permalink to this heading">¶</a></h1>
<section id="member-functions">
<h2>Member Functions<a class="headerlink" href="#member-functions" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4NK7FlattenEPv7ssize_t">
</section>
<section id="_CPPv49Unflatten9type_codePKv7ssize_t">
</section>
<h3>
Flatten(), Unflatten()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="n">status_t</span><span class="w"> </span><span class="n">Flatten</span><span class="sig-paren">(</span><span class="kt">void</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">buffer</span>, <span class="n">ssize_t</span><span class="w"> </span><span class="n sig-param">numBytes</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="n">status_t</span><span class="w"> </span><span class="n">Unflatten</span><span class="sig-paren">(</span><span class="n">type_code</span><span class="w"> </span><span class="n sig-param">code</span>, <span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">buffer</span>, <span class="n">ssize_t</span><span class="w"> </span><span class="n sig-param">numBytes</span><span class="sig-paren">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span></pre><p><span class="hmethod">Flatten()</span> is implemented by derived classes to write the object into the buffer. There are <span class="hparameter">numBytes</span> bytes of memory available at the buffer address. If this isn’t at least as much memory as the <a class="reference internal" href="#_CPPv4NK12BFlattenable13FlattenedSizeEv" title="BFlattenable::FlattenedSize"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">FlattenedSize()</span></code></a> function says is necessary, <span class="hmethod">Flatten()</span> should return an error. If successful, it should return <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code>.</p>
<p><span class="hmethod">Unflatten()</span> is implemented by derived classes to set object values from <span class="hparameter">numBytes</span> bytes of data taken from the <span class="hparameter">buffer</span>. However, it should read the data only if the type <span class="hparameter">code</span> it’s passed indicates that the data is a type that it supports—that is, only if it’s <a class="reference internal" href="#_CPPv4NK12BFlattenable14AllowsTypeCodeE9type_code" title="BFlattenable::AllowsTypeCode"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">AllowsTypeCode()</span></code></a> function returns <span class="cpp-expr sig sig-inline cpp"><span class="k">true</span></span> for the code. If successful in reconstructing the object from the flattened data, <span class="hmethod">Unflatten()</span> should return <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code>. If not, it should return <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ERROR</span></code> or a more descriptive error code.</p>
<section id="_CPPv4NK12BFlattenable13FlattenedSizeEv">
</section>
<h3>
FlattenedSize()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="n">ssize_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BFlattenable</span><span class="p">::</span></span><span class="n">FlattenedSize</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span></pre><p>Implemented by derived classes to return the amount of memory needed to hold the flattened object. This is the minimal amount that must be allocated and passed to <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Flatten()</span></code>.</p>
<section id="_CPPv4NK12BFlattenable8TypeCodeEv">
</section>
<section id="_CPPv4NK12BFlattenable14AllowsTypeCodeE9type_code">
</section>
<h3>
TypeCode(), AllowsTypeCode()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="n">type_code</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BFlattenable</span><span class="p">::</span></span><span class="n">TypeCode</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BFlattenable</span><span class="p">::</span></span><span class="n">AllowsTypeCode</span><span class="sig-paren">(</span><span class="n">type_code</span><span class="w"> </span><span class="n sig-param">code</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><p><span class="hmethod">TypeCode()</span> is implemented by derived classes to return the type code that identifies the class type. The code is used to identify an instance of the class in its flattened state, for example when it’s added to a <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BMessage</span></code>.</p>
<p><span class="hmethod">AllowsType()</span> returns <span class="cpp-expr sig sig-inline cpp"><span class="k">true</span></span> if the code it’s passed matches the code returned by <span class="hmethod">TypeCode()</span> and <span class="cpp-expr sig sig-inline cpp"><span class="k">false</span></span> if not. It can be modified in derived classes to apply a more liberal standard—to allow more than one type code to identify the object.</p>
<p>See also: <a class="reference internal" href="../application/message.html#_CPPv4N8BMessage7AddDataEPKc9type_codePKv7ssize_tb5int32" title="BMessage::AddData"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">BMessage::AddData()</span></code></a></p>
</section>
</section>


        <div class="clearer"></div>
      </div>
          </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="data-io.html">BDataIO</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="functions.html">Functions and Macros</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, Haiku, Inc..
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>