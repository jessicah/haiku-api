
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>BBuffer &#8212; The Haiku Book  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/haiku.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/code.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="BBufferConsumer" href="buffer-consumer.html" />
    <link rel="prev" title="BMailMessage" href="../mail/mail-message.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../../index.html">
          <span>API Documentation</span></a></h1>
        <h2 class="heading"><span>BBuffer</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="../mail/mail-message.html">BMailMessage</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="buffer-consumer.html">BBufferConsumer</a>&#160;&#160;»
        </p>

      </div>
        
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">BBuffer</a><ul>
<li><a class="reference internal" href="#constructor-and-destructor">Constructor and Destructor</a></li>
<li><a class="reference internal" href="#member-functions">Member Functions</a><ul>
<li><a class="reference internal" href="#_CPPv4N7BBuffer11AudioHeaderEv">AudioHeader</a></li>
<li><a class="reference internal" href="#_CPPv4NK7BBuffer9CloneInfoEv">CloneInfo</a></li>
<li><a class="reference internal" href="#_CPPv4N7BBuffer4DataEv">Data</a></li>
<li><a class="reference internal" href="#_CPPv4N7BBuffer5FlagsEv">Flags</a></li>
<li><a class="reference internal" href="#_CPPv4N7BBuffer6HeaderEv">Header</a></li>
<li><a class="reference internal" href="#_CPPv4N7BBuffer2IDEv">ID</a></li>
<li><a class="reference internal" href="#_CPPv4N7BBuffer7RecycleEv">Recycle</a></li>
<li><a class="reference internal" href="#_CPPv4N7BBuffer13SizeAvailableEv">SizeAvailable</a></li>
<li><a class="reference internal" href="#_CPPv4N7BBuffer8SizeUsedEv">SizeUsed</a></li>
<li><a class="reference internal" href="#_CPPv4N7BBuffer11SetSizeUsedE7ssize_t">SetSizeUsed</a></li>
<li><a class="reference internal" href="#_CPPv4N7BBuffer4TypeEv">Type</a></li>
<li><a class="reference internal" href="#_CPPv4N7BBuffer11VideoHeaderEv">VideoHeader</a></li>
</ul>
</li>
<li><a class="reference internal" href="#constants">Constants</a><ul>
<li><a class="reference internal" href="#flags">Flags</a></li>
</ul>
</li>
<li><a class="reference internal" href="#definedtypes">DefinedTypes</a><ul>
<li><a class="reference internal" href="#buffer-clone-info">buffer_clone_info</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>

        </div>
      </div>
          <div class="bodywrapper">
      <div class="content" role="main">
        
  <section id="bbuffer">
<h1 id="CPPv47BBuffer">BBuffer<a class="headerlink" href="#bbuffer" title="Permalink to this heading">¶</a></h1>
<section id="constructor-and-destructor">
<h2>Constructor and Destructor<a class="headerlink" href="#constructor-and-destructor" title="Permalink to this heading">¶</a></h2>
<p>The <span class="hclass">BBuffer</span> constructor and destructor are private; use the
appropriate functions in the <a class="reference internal" href="buffer-group.html#_CPPv412BBufferGroup" title="BBufferGroup"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BBufferGroup</span></code></a> class to create and
destroy <span class="hclass">BBuffers</span>.</p>
</section>
<section id="member-functions">
<h2>Member Functions<a class="headerlink" href="#member-functions" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4N7BBuffer11AudioHeaderEv">
</section>
<h3>
AudioHeader()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">media_audio_header</span><span class="w"> </span><span class="p">*</span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv47BBuffer" title="BBuffer"><span class="n">BBuffer</span></a><span class="p">::</span></span><span class="n">AudioHeader</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Returns a pointer to an audio buffer’s header; this is just an alias for:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="n">BBuffer</span><span class="o">::</span><span class="n">Header</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">u</span><span class="p">.</span><span class="n">raw_audio</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<section id="_CPPv4NK7BBuffer9CloneInfoEv">
</section>
<h3>
CloneInfo()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">buffer_clone_info</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv47BBuffer" title="BBuffer"><span class="n">BBuffer</span></a><span class="p">::</span></span><span class="n">CloneInfo</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><p>Returns a <span class="xref std std-ref">buffer_clone_info</span> structure describing a buffer. This
information is primarily for debugging purposes; don’t use this
<span class="xref std std-ref">buffer_clone_info</span> structure to add a buffer to a buffer group,
because it’ll just alias an existing buffer.</p>
<section id="_CPPv4N7BBuffer4DataEv">
</section>
<h3>
Data()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv47BBuffer" title="BBuffer"><span class="n">BBuffer</span></a><span class="p">::</span></span><span class="n">Data</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>The <span class="hmethod">Data()</span> function returns a pointer to the first byte of the
buffer, or <span class="cpp-expr sig sig-inline cpp"><span class="n">NULL</span></span> if the buffer somehow couldn’t be properly
initialized (in which case the buffer can’t be used).</p>
<section id="_CPPv4N7BBuffer5FlagsEv">
</section>
<h3>
Flags()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">int32</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv47BBuffer" title="BBuffer"><span class="n">BBuffer</span></a><span class="p">::</span></span><span class="n">Flags</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Returns the buffer’s flags. The flags let you specify options for the
buffer. For example, you might create a <a class="reference internal" href="buffer-group.html#_CPPv412BBufferGroup" title="BBufferGroup"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BBufferGroup</span></code></a> in which
some buffers are intended for odd video fields
(<code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_F1_BUFFER</span></code>), and other buffers are intended for even
video fields (<code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_F2_BUFFER</span></code>), thereby letting you handle
interlaced video much more easily by having each buffer know where the
video should be displayed.</p>
<section id="_CPPv4N7BBuffer6HeaderEv">
</section>
<h3>
Header()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">media_header</span><span class="w"> </span><span class="p">*</span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv47BBuffer" title="BBuffer"><span class="n">BBuffer</span></a><span class="p">::</span></span><span class="n">Header</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Returns a pointer to the buffer’s header. This header describes the media
data contained therein. The result is only valid for a buffer received from
either <a class="reference internal" href="buffer-group.html#_CPPv4N12BBufferGroup13RequestBufferE6size_t9bigtime_t" title="BBufferGroup::RequestBuffer"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">BBufferGroup::RequestBuffer()</span></code></a> or
<a class="reference internal" href="buffer-consumer.html#_CPPv4N15BBufferConsumer14BufferReceivedEP7BBuffer" title="BBufferConsumer::BufferReceived"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">BBufferConsumer::BufferReceived()</span></code></a>.</p>
<p>If you put data into a buffer, you should call <span class="hmethod">Header()</span> to
obtain a pointer to the buffer’s header, then fill out the
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">media_header</span></code> structure with information
describing the buffer’s contents.</p>
<section id="_CPPv4N7BBuffer2IDEv">
</section>
<h3>
ID()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">media_buffer_id</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv47BBuffer" title="BBuffer"><span class="n">BBuffer</span></a><span class="p">::</span></span><span class="n">ID</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>If the buffer has been successfully registered with the Media Server, and
is available for use by other clients, <span class="hmethod">ID()</span> returns a positive
buffer ID. Otherwise, a negative number is returned.</p>
<section id="_CPPv4N7BBuffer7RecycleEv">
</section>
<h3>
Recycle()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv47BBuffer" title="BBuffer"><span class="n">BBuffer</span></a><span class="p">::</span></span><span class="n">Recycle</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Sends the buffer back to the BBufferGroup that owns it so the buffer can
be reused. You can only call Recycle() on a buffer that you received from
either the <a class="reference internal" href="buffer-group.html#_CPPv4N12BBufferGroup13RequestBufferE6size_t9bigtime_t" title="BBufferGroup::RequestBuffer"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">BBufferGroup::RequestBuffer()</span></code></a> call or the
<a class="reference internal" href="buffer-consumer.html#_CPPv4N15BBufferConsumer14BufferReceivedEP7BBuffer" title="BBufferConsumer::BufferReceived"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">BBufferConsumer::BufferReceived()</span></code></a> call.</p>
<div class="warning admonition">
<p class="admonition-title">Warning</p>
<p>Don’t call both BroadcastBuffer() and <span class="hmethod">Recycle()</span> on the same
buffer.</p>
</div>
<section id="_CPPv4N7BBuffer13SizeAvailableEv">
</section>
<h3>
SizeAvailable()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">size_t</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv47BBuffer" title="BBuffer"><span class="n">BBuffer</span></a><span class="p">::</span></span><span class="n">SizeAvailable</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Returns the size, in bytes, of the buffer. The actual number of bytes used
might be less than this value, and is stored in the buffer’s header, which
can be obtained by calling the <a class="reference internal" href="#_CPPv4N7BBuffer6HeaderEv" title="BBuffer::Header"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Header()</span></code></a>
function.</p>
<section id="_CPPv4N7BBuffer8SizeUsedEv">
</section>
<section id="_CPPv4N7BBuffer11SetSizeUsedE7ssize_t">
</section>
<h3>
SizeUsed(), SetSizeUsed()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">size_t</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv47BBuffer" title="BBuffer"><span class="n">BBuffer</span></a><span class="p">::</span></span><span class="n">SizeUsed</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv47BBuffer" title="BBuffer"><span class="n">BBuffer</span></a><span class="p">::</span></span><span class="n">SetSizeUsed</span><span class="sig-paren">(</span><span class="n">ssize_t</span><span class="w"> </span><span class="n sig-param">sizeUsed</span><span class="sig-paren">)</span></pre><p><span class="hmethod">SizeUsed()</span> returns the number of bytes in the buffer that are
currently in use.</p>
<p><span class="hmethod">SetSizeUsed()</span> sets this value. This should be called after
writing data into the buffer in order to indicate the size of the written
data.</p>
<section id="_CPPv4N7BBuffer4TypeEv">
</section>
<h3>
Type()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">media_type</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv47BBuffer" title="BBuffer"><span class="n">BBuffer</span></a><span class="p">::</span></span><span class="n">Type</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Returns the media type of the data contained within the buffer, as
specified by the <a class="reference internal" href="buffer-producer.html#_CPPv415BBufferProducer" title="BBufferProducer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BBufferProducer</span></code></a> from which the buffer
originated. This value is only valid if you received the buffer from either
the <a class="reference internal" href="buffer-group.html#_CPPv4N12BBufferGroup13RequestBufferE6size_t9bigtime_t" title="BBufferGroup::RequestBuffer"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">BBufferGroup::RequestBuffer()</span></code></a> call or the
<a class="reference internal" href="buffer-consumer.html#_CPPv4N15BBufferConsumer14BufferReceivedEP7BBuffer" title="BBufferConsumer::BufferReceived"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">BBufferConsumer::BufferReceived()</span></code></a> call.</p>
<section id="_CPPv4N7BBuffer11VideoHeaderEv">
</section>
<h3>
VideoHeader()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">media_video_header</span><span class="w"> </span><span class="p">*</span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv47BBuffer" title="BBuffer"><span class="n">BBuffer</span></a><span class="p">::</span></span><span class="n">VideoHeader</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Returns a pointer to a video buffer’s header; this is just an alias for:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="o">&amp;</span><span class="n">BBuffer</span><span class="o">::</span><span class="n">Header</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">u</span><span class="p">.</span><span class="n">raw_video</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="constants">
<h2>Constants<a class="headerlink" href="#constants" title="Permalink to this heading">¶</a></h2>
<section id="flags">
<h3>Flags<a class="headerlink" href="#flags" title="Permalink to this heading">¶</a></h3>
<p>Declared in: media/Buffer.h</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Constant</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_F1_BUFFER</span></code>.</p></td>
<td><p>Buffer is for odd fields.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_F2_BUFFER</span></code>.</p></td>
<td><p>Buffer is for even fields.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_SMALL_BUFFER</span></code>.</p></td>
<td><p>The buffer is a small buffer.</p></td>
</tr>
</tbody>
</table>
<p>These flags can be assigned to a buffer; the current possible values let
you specify whether the buffer should be used for even video fields or odd
video fields; if <code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_SMALL_BUFFER</span></code> is set, the buffer is a
<a class="reference internal" href="small-buffer.html#_CPPv412BSmallBuffer" title="BSmallBuffer"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BSmallBuffer</span></code></a>.</p>
</section>
</section>
<section id="definedtypes">
<h2>DefinedTypes<a class="headerlink" href="#definedtypes" title="Permalink to this heading">¶</a></h2>
<section id="buffer-clone-info">
<h3>buffer_clone_info<a class="headerlink" href="#buffer-clone-info" title="Permalink to this heading">¶</a></h3>
<p>Declared in: media/Buffer.h</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">buffer_clone_info</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">buffer_clone_info</span><span class="p">();</span><span class="w"></span>
<span class="w">   </span><span class="o">~</span><span class="n">buffer_clone_info</span><span class="p">();</span><span class="w"></span>
<span class="w">   </span><span class="n">media_buffer_id</span><span class="w"> </span><span class="n">buffer</span><span class="p">;</span><span class="w"></span>
<span class="w">   </span><span class="n">area_id</span><span class="w"> </span><span class="n">area</span><span class="p">;</span><span class="w"></span>
<span class="w">   </span><span class="kt">size_t</span><span class="w"> </span><span class="n">offset</span><span class="p">;</span><span class="w"></span>
<span class="w">   </span><span class="kt">size_t</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"></span>
<span class="w">   </span><span class="n">int32</span><span class="w"> </span><span class="n">flags</span><span class="p">;</span><span class="w"></span>
<span class="k">private</span><span class="o">:</span><span class="w"></span>
<span class="w">   </span><span class="n">_reserved_</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p>Describes where in memory a <span class="hclass">BBuffer</span> resides (in terms of the
memory area and offset into the area at which the buffer is located, and
the size of the buffer), as well as the buffer’s flags.</p>
</section>
</section>
</section>


        <div class="clearer"></div>
      </div>
          </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="../mail/mail-message.html">BMailMessage</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="buffer-consumer.html">BBufferConsumer</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, Haiku, Inc..
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>