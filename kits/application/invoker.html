
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>BInvoker &#8212; The Haiku Book  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/haiku.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/code.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="BLooper" href="looper.html" />
    <link rel="prev" title="The Application Kit" href="index.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../../index.html">
          <span>API Documentation</span></a></h1>
        <h2 class="heading"><span>BInvoker</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">The Application Kit</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="looper.html">BLooper</a>&#160;&#160;»
        </p>

      </div>
        
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">BInvoker</a><ul>
<li><a class="reference internal" href="#constructor-and-destructor">Constructor and Destructor</a><ul>
<li><a class="reference internal" href="#_CPPv4N8BInvoker8BInvokerEP8BMessage10BMessenger">BInvoker</a></li>
<li><a class="reference internal" href="#_CPPv4N8BInvokerD0Ev">~BInvoker</a></li>
</ul>
</li>
<li><a class="reference internal" href="#member-functions">Member Functions</a><ul>
<li><a class="reference internal" href="#_CPPv4N8BInvoker17BeginInvokeNotifyE6uint32">BeginInvokeNotify</a></li>
<li><a class="reference internal" href="#_CPPv4N8BInvoker15EndInvokeNotifyEv">EndInvokeNotify</a></li>
<li><a class="reference internal" href="#_CPPv4N8BInvoker6InvokeEP8BMessage">Invoke</a></li>
<li><a class="reference internal" href="#_CPPv4N8BInvoker12InvokeNotifyEP8BMessage6uint32">InvokeNotify</a></li>
<li><a class="reference internal" href="#_CPPv4N8BInvoker10InvokeKindEPb">InvokeKind</a></li>
<li><a class="reference internal" href="#_CPPv4N8BInvoker18SetHandlerForReplyEP8BHandler">SetHandlerForReply</a></li>
<li><a class="reference internal" href="#_CPPv4NK8BInvoker15HandlerForReplyEv">HandlerForReply</a></li>
<li><a class="reference internal" href="#_CPPv4N8BInvoker10SetMessageEP8BMessage">SetMessage</a></li>
<li><a class="reference internal" href="#_CPPv4NK8BInvoker7MessageEv">Message</a></li>
<li><a class="reference internal" href="#_CPPv4NK8BInvoker7CommandEv">Command</a></li>
<li><a class="reference internal" href="#_CPPv4N8BInvoker9SetTargetE10BMessenger">SetTarget</a></li>
<li><a class="reference internal" href="#_CPPv4NK8BInvoker6TargetEPP7BLooper">Target</a></li>
<li><a class="reference internal" href="#_CPPv4NK8BInvoker13IsTargetLocalEv">IsTargetLocal</a></li>
<li><a class="reference internal" href="#_CPPv4NK8BInvoker9MessengerEv">Messenger</a></li>
<li><a class="reference internal" href="#_CPPv4N8BInvoker10SetTimeoutE9bigtime_t">SetTimeout</a></li>
<li><a class="reference internal" href="#_CPPv4NK8BInvoker7TimeoutEv">Timeout</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>

        </div>
      </div>
          <div class="bodywrapper">
      <div class="content" role="main">
        
  <section id="binvoker">
<h1 id="CPPv48BInvoker">BInvoker<a class="headerlink" href="#binvoker" title="Permalink to this heading">¶</a></h1>
<section id="constructor-and-destructor">
<h2>Constructor and Destructor<a class="headerlink" href="#constructor-and-destructor" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4N8BInvoker8BInvokerEP8BMessage10BMessenger">
</section>
<h3>
BInvoker()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N8BInvoker8BInvokerEP8BMessage10BMessenger" title="BInvoker::BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">BInvoker</span><span class="sig-paren">(</span><a class="reference internal" href="message.html#_CPPv48BMessage" title="BMessage"><span class="n">BMessage</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">message</span>, <a class="reference internal" href="messenger.html#_CPPv410BMessenger" title="BMessenger"><span class="n">BMessenger</span></a><span class="w"> </span><span class="n sig-param">messenger</span><span class="sig-paren">)</span><br /><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N8BInvoker8BInvokerEP8BMessagePK8BHandlerPK7BLooper" title="BInvoker::BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">BInvoker</span><span class="sig-paren">(</span><a class="reference internal" href="message.html#_CPPv48BMessage" title="BMessage"><span class="n">BMessage</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">message</span>, <span class="k">const</span><span class="w"> </span><a class="reference internal" href="handler.html#_CPPv48BHandler" title="BHandler"><span class="n">BHandler</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">handler</span>, <span class="k">const</span><span class="w"> </span><a class="reference internal" href="looper.html#_CPPv47BLooper" title="BLooper"><span class="n">BLooper</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">looper</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">NULL</span><span class="sig-paren">)</span><br /><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N8BInvoker8BInvokerEv" title="BInvoker::BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">BInvoker</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Initializes the <span class="hclass">BInvoker</span> by setting its message and its
messenger.</p>
<ul class="simple">
<li><p>The object’s <a class="reference internal" href="message.html#_CPPv48BMessage" title="BMessage"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BMessage</span></code></a> is taken directly as
<span class="hparameter">message</span>—the object is <strong>not</strong> copied. The <span class="hclass">BInvoker</span>
takes over ownership of the <a class="reference internal" href="message.html#_CPPv48BMessage" title="BMessage"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BMessage</span></code></a> that you pass in.</p></li>
<li><p>The object’s <a class="reference internal" href="messenger.html#_CPPv410BMessenger" title="BMessenger"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BMessenger</span></code></a> is copied from <span class="hparameter">messenger</span>,
or initialized with <span class="hparameter">looper</span> and <span class="hparameter">handler</span>. See the
<a class="reference internal" href="messenger.html#_CPPv410BMessenger" title="BMessenger"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BMessenger</span></code></a> class for details on how a <a class="reference internal" href="messenger.html#_CPPv410BMessenger" title="BMessenger"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BMessenger</span></code></a>
identifies a target.</p></li>
</ul>
<p>If you want a reply handler, you have to call
<a class="reference internal" href="#_CPPv4N8BInvoker18SetHandlerForReplyEP8BHandler" title="BInvoker::SetHandlerForReply"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetHandlerForReply()</span></code></a> after the
constructor returns. You can reset the message and messenger through
<a class="reference internal" href="#_CPPv4N8BInvoker10SetMessageEP8BMessage" title="BInvoker::SetMessage"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetMessage()</span></code></a> and <a class="reference internal" href="#_CPPv4N8BInvoker9SetTargetE10BMessenger" title="BInvoker::SetTarget"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetTarget()</span></code></a>.</p>
<section id="_CPPv4N8BInvokerD0Ev">
</section>
<h3>
~BInvoker()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv48BInvoker" title="BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">~BInvoker</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Deletes the object’s <a class="reference internal" href="message.html#_CPPv48BMessage" title="BMessage"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BMessage</span></code></a>.</p>
</section>
<section id="member-functions">
<h2>Member Functions<a class="headerlink" href="#member-functions" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4N8BInvoker17BeginInvokeNotifyE6uint32">
</section>
<section id="_CPPv4N8BInvoker15EndInvokeNotifyEv">
</section>
<h3>
BeginInvokeNotify(), EndInvokeNotify()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv48BInvoker" title="BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">BeginInvokeNotify</span><span class="sig-paren">(</span><span class="n">uint32</span><span class="w"> </span><span class="n sig-param">kind</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">B_CONTROL_INVOKED</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv48BInvoker" title="BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">EndInvokeNotify</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>If for some reason you need to implement a method that emulates an
<a class="reference internal" href="#_CPPv4N8BInvoker6InvokeEP8BMessage" title="BInvoker::Invoke"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">InvokeNotify()</span></code></a> call inside an
<a class="reference internal" href="#_CPPv4N8BInvoker6InvokeEP8BMessage" title="BInvoker::Invoke"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Invoke()</span></code></a> implementation, you should wrap the
invocation code in these functions. They set up and tear down an
<a class="reference internal" href="#_CPPv4N8BInvoker6InvokeEP8BMessage" title="BInvoker::Invoke"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">InvokeNotify()</span></code></a> context.</p>
<section id="_CPPv4N8BInvoker6InvokeEP8BMessage">
</section>
<section id="_CPPv4N8BInvoker12InvokeNotifyEP8BMessage6uint32">
</section>
<h3>
Invoke(), InvokeNotify()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><a class="reference internal" href="../storage/the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv48BInvoker" title="BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">Invoke</span><span class="sig-paren">(</span><a class="reference internal" href="message.html#_CPPv48BMessage" title="BMessage"><span class="n">BMessage</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">message</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">NULL</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="../storage/the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv48BInvoker" title="BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">InvokeNotify</span><span class="sig-paren">(</span><a class="reference internal" href="message.html#_CPPv48BMessage" title="BMessage"><span class="n">BMessage</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">message</span>, <span class="n">uint32</span><span class="w"> </span><span class="n sig-param">kind</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">B_CONTROL_INVOKED</span><span class="sig-paren">)</span></pre><p><span class="hmethod">Invoke()</span> tells the <span class="hclass">BInvoker</span>’s messenger to send a
message. If <span class="hparameter">message</span> is non-<span class="cpp-expr sig sig-inline cpp"><span class="n">NULL</span></span>, that message is
sent, otherwise the object sends its default message (i.e. the
<a class="reference internal" href="message.html#_CPPv48BMessage" title="BMessage"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BMessage</span></code></a> that was passed in the constructor or in
<a class="reference internal" href="#_CPPv4N8BInvoker10SetMessageEP8BMessage" title="BInvoker::SetMessage"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetMessage()</span></code></a>). The message is sent
asynchronously with no time limit on the reply.</p>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>Regarding the use of the default message vs the argument, a common
practice is to reserve the default message as a template, and pass a
fine-tuned copy to <span class="hmethod">Invoke()</span></p>
</div>
<p>The <span class="hmethod">InvokeNotify()</span> function sends the <span class="hparameter">message</span> to the
target, using the notification change code specified by <span class="hparameter">kind</span>. If
<span class="hparameter">message</span> is <span class="cpp-expr sig sig-inline cpp"><span class="n">NULL</span></span>, nothing gets sent to the target, but
any watchers of the invoker’s handler will receive their expected
notifications. By default, the <span class="hparameter">kind</span> is
<code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_CONTROL_INVOKED</span></code>, the same kind sent by a straight
<span class="hmethod">Invoke()</span>.</p>
<p><span class="hmethod">Invoke()</span> doesn’t call <a class="reference internal" href="handler.html#_CPPv4N8BHandler11SendNoticesE6uint32PK8BMessage" title="BHandler::SendNotices"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SendNotices()</span></code></a> by default; you’ll have to implement code to do it
yourself. Here’s how:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">status_t</span><span class="w"> </span><span class="nf">BControl::Invoke</span><span class="p">(</span><span class="n">BMessage</span><span class="o">*</span><span class="w"> </span><span class="n">msg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="kt">bool</span><span class="w"> </span><span class="n">notify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="w">   </span><span class="n">uint32</span><span class="w"> </span><span class="n">kind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InvokeKind</span><span class="p">(</span><span class="n">notify</span><span class="p">);</span><span class="w"></span>

<span class="w">   </span><span class="n">BMessage</span><span class="w"> </span><span class="n">clone</span><span class="p">(</span><span class="n">kind</span><span class="p">);</span><span class="w"></span>
<span class="w">   </span><span class="n">status_t</span><span class="w"> </span><span class="n">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">B_BAD_VALUE</span><span class="p">;</span><span class="w"></span>

<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">msg</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">notify</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="c1">// If no message is supplied, pull it from the BInvoker.</span>
<span class="w">      </span><span class="c1">// However, ONLY do so if this is not an InvokeNotify()</span>
<span class="w">      </span><span class="c1">// context -- otherwise, this is not the default invocation</span>
<span class="w">      </span><span class="c1">// message, so we don&#39;t want it to get in the way here.</span>
<span class="w">      </span><span class="c1">// For example, a control may call InvokeNotify() with their</span>
<span class="w">      </span><span class="c1">// &quot;modification&quot; message... if that message isn&#39;t set,</span>
<span class="w">      </span><span class="c1">// we still want to send notification to any watchers, but</span>
<span class="w">      </span><span class="c1">// -don&#39;t- want to send a message through the invoker.</span>
<span class="w">      </span><span class="n">msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Message</span><span class="p">();</span><span class="w"></span>
<span class="w">   </span><span class="p">}</span><span class="w"></span>

<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">msg</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="c1">// If not being watched, there is nothing to do.</span>
<span class="w">      </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="o">!</span><span class="n">IsWatched</span><span class="p">()</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">err</span><span class="p">;</span><span class="w"></span>
<span class="w">   </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="n">clone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">msg</span><span class="p">;</span><span class="w"></span>
<span class="w">   </span><span class="p">}</span><span class="w"></span>

<span class="w">   </span><span class="n">clone</span><span class="p">.</span><span class="n">AddInt64</span><span class="p">(</span><span class="s">&quot;when&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">system_time</span><span class="p">());</span><span class="w"></span>
<span class="w">   </span><span class="n">clone</span><span class="p">.</span><span class="n">AddPointer</span><span class="p">(</span><span class="s">&quot;source&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">this</span><span class="p">);</span><span class="w"></span>
<span class="w">   </span><span class="n">clone</span><span class="p">.</span><span class="n">AddInt32</span><span class="p">(</span><span class="s">&quot;be:value&quot;</span><span class="p">,</span><span class="n">fValue</span><span class="p">);</span><span class="w"></span>
<span class="w">   </span><span class="n">clone</span><span class="p">.</span><span class="n">AddMessenger</span><span class="p">(</span><span class="n">B_NOTIFICATION_SENDER</span><span class="p">,</span><span class="w"> </span><span class="n">BMessenger</span><span class="p">(</span><span class="k">this</span><span class="p">));</span><span class="w"></span>

<span class="w">   </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">msg</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BInvoker</span><span class="o">::</span><span class="n">Invoke</span><span class="p">(</span><span class="o">&amp;</span><span class="n">clone</span><span class="p">);</span><span class="w"></span>

<span class="w">   </span><span class="c1">// Also send invocation to any observers of this handler.</span>
<span class="w">   </span><span class="n">SendNotices</span><span class="p">(</span><span class="n">kind</span><span class="p">,</span><span class="w"> </span><span class="n">clone</span><span class="p">);</span><span class="w"></span>

<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="n">err</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>The message was sent.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_BAD_VALUE</span></code>.</p></td>
<td><p>No default message, and no message argument.</p></td>
</tr>
<tr class="row-even"><td><p>Other errors.</p></td>
<td><p>Forwarded from <a class="reference internal" href="messenger.html#_CPPv4NK10BMessenger11SendMessageEP8BMessageP8BMessage9bigtime_t9bigtime_t" title="BMessenger::SendMessage"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">BMessenger::SendMessage()</span></code></a>.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4N8BInvoker10InvokeKindEPb">
</section>
<h3>
InvokeKind()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">uint32</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv48BInvoker" title="BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">InvokeKind</span><span class="sig-paren">(</span><span class="kt">bool</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">notify</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">NULL</span><span class="sig-paren">)</span></pre><p>Returns the kind passed to <a class="reference internal" href="#_CPPv4N8BInvoker6InvokeEP8BMessage" title="BInvoker::Invoke"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">InvokeNotify()</span></code></a>.
This should be called from within your implementation of
<a class="reference internal" href="#_CPPv4N8BInvoker6InvokeEP8BMessage" title="BInvoker::Invoke"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Invoke()</span></code></a> if you need to determine what kind
was specified when <a class="reference internal" href="#_CPPv4N8BInvoker6InvokeEP8BMessage" title="BInvoker::Invoke"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">InvokeNotify()</span></code></a> was
called. If you care whether <a class="reference internal" href="#_CPPv4N8BInvoker6InvokeEP8BMessage" title="BInvoker::Invoke"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Invoke()</span></code></a> or
<a class="reference internal" href="#_CPPv4N8BInvoker6InvokeEP8BMessage" title="BInvoker::Invoke"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">InvokeNotify()</span></code></a> was originally called, you
can specify a pointer to a <span class="htype">bool</span>, <span class="hparameter">notify</span>, which is set to
<span class="cpp-expr sig sig-inline cpp"><span class="k">true</span></span> if <a class="reference internal" href="#_CPPv4N8BInvoker6InvokeEP8BMessage" title="BInvoker::Invoke"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">InvokeNotify()</span></code></a> was
called, or <span class="cpp-expr sig sig-inline cpp"><span class="k">false</span></span> if <a class="reference internal" href="#_CPPv4N8BInvoker6InvokeEP8BMessage" title="BInvoker::Invoke"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Invoke()</span></code></a> was
called. This lets you fetch the <a class="reference internal" href="#_CPPv4N8BInvoker6InvokeEP8BMessage" title="BInvoker::Invoke"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">InvokeNotify()</span></code></a> arguments from your <a class="reference internal" href="#_CPPv4N8BInvoker6InvokeEP8BMessage" title="BInvoker::Invoke"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Invoke()</span></code></a> code without breaking compatibility with older
applications by adding arguments to <a class="reference internal" href="#_CPPv4N8BInvoker6InvokeEP8BMessage" title="BInvoker::Invoke"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Invoke()</span></code></a>.</p>
<section id="_CPPv4N8BInvoker18SetHandlerForReplyEP8BHandler">
</section>
<section id="_CPPv4NK8BInvoker15HandlerForReplyEv">
</section>
<h3>
SetHandlerForReply(), HandlerForReply()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><a class="reference internal" href="../storage/the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv48BInvoker" title="BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">SetHandlerForReply</span><span class="sig-paren">(</span><a class="reference internal" href="handler.html#_CPPv48BHandler" title="BHandler"><span class="n">BHandler</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">replyHandler</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="handler.html#_CPPv48BHandler" title="BHandler"><span class="n">BHandler</span></a><span class="w"> </span><span class="p">*</span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv48BInvoker" title="BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">HandlerForReply</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><p><span class="hmethod">SetHandlerForReply()</span> sets the <a class="reference internal" href="handler.html#_CPPv48BHandler" title="BHandler"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BHandler</span></code></a> object that
handles replies that are sent back by the target. By default (or if
<span class="hparameter">replyHandler</span> is <span class="cpp-expr sig sig-inline cpp"><span class="n">NULL</span></span>), replies are sent to the
<a class="reference internal" href="application.html#_CPPv412BApplication" title="BApplication"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BApplication</span></code></a> object.</p>
<p><span class="hmethod">HandlerForReply()</span> returns the object set through
<span class="hmethod">SetHandlerForReply()</span>. If the reply handler isn’t set, this
function returns <span class="cpp-expr sig sig-inline cpp"><span class="n">NULL</span></span>, it doesn’t return <code class="xref cpp cpp-var docutils literal notranslate"><span class="pre">be_app</span></code>
(even though <code class="xref cpp cpp-var docutils literal notranslate"><span class="pre">be_app</span></code> will be handling the reply).</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code></p></td>
<td><p><span class="hmethod">SetHandlerForReply()</span> always returns <code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code> it
doesn’t check for validity.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4N8BInvoker10SetMessageEP8BMessage">
</section>
<section id="_CPPv4NK8BInvoker7MessageEv">
</section>
<section id="_CPPv4NK8BInvoker7CommandEv">
</section>
<h3>
SetMessage(), Message(), Command()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><a class="reference internal" href="../storage/the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv48BInvoker" title="BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">SetMessage</span><span class="sig-paren">(</span><a class="reference internal" href="message.html#_CPPv48BMessage" title="BMessage"><span class="n">BMessage</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">message</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="message.html#_CPPv48BMessage" title="BMessage"><span class="n">BMessage</span></a><span class="w"> </span><span class="p">*</span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv48BInvoker" title="BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">Message</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">uint32</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv48BInvoker" title="BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">Command</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><p><span class="hmethod">SetMessage()</span> sets the <span class="hclass">BInvoker</span>’s default message to
point to <span class="hparameter">message</span> (the message is <strong>not</strong> copied). The previous
default message (if any) is deleted; a <span class="cpp-expr sig sig-inline cpp"><span class="n">NULL</span></span> <span class="hparameter">message</span>
deletes the previous message without setting a new one. The
<span class="hclass">BInvoker</span> owns the <a class="reference internal" href="message.html#_CPPv48BMessage" title="BMessage"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BMessage</span></code></a> that you pass in; you
mustn’t delete it yourself.</p>
<p><span class="hmethod">Message()</span> returns a pointer to the default message, and
<span class="hmethod">Command()</span> returns its <span class="hparameter">what</span> data member. Lacking a
default message, the functions return <span class="cpp-expr sig sig-inline cpp"><span class="n">NULL</span></span>.</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code></p></td>
<td><p><span class="hmethod">SetMessage()</span> always returns <code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4N8BInvoker9SetTargetE10BMessenger">
</section>
<section id="_CPPv4NK8BInvoker6TargetEPP7BLooper">
</section>
<section id="_CPPv4NK8BInvoker13IsTargetLocalEv">
</section>
<section id="_CPPv4NK8BInvoker9MessengerEv">
</section>
<h3>
SetTarget(), Target(), IsTargetLocal(), Messenger()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><a class="reference internal" href="../storage/the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv48BInvoker" title="BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">SetTarget</span><span class="sig-paren">(</span><a class="reference internal" href="messenger.html#_CPPv410BMessenger" title="BMessenger"><span class="n">BMessenger</span></a><span class="w"> </span><span class="n sig-param">messenger</span><span class="sig-paren">)</span><br /><span class="k">virtual</span><span class="w"> </span><a class="reference internal" href="../storage/the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv48BInvoker" title="BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">SetTarget</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><a class="reference internal" href="handler.html#_CPPv48BHandler" title="BHandler"><span class="n">BHandler</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">handler</span>, <span class="k">const</span><span class="w"> </span><a class="reference internal" href="looper.html#_CPPv47BLooper" title="BLooper"><span class="n">BLooper</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">looper</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">NULL</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="handler.html#_CPPv48BHandler" title="BHandler"><span class="n">BHandler</span></a><span class="w"> </span><span class="p">*</span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv48BInvoker" title="BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">Target</span><span class="sig-paren">(</span><a class="reference internal" href="looper.html#_CPPv47BLooper" title="BLooper"><span class="n">BLooper</span></a><span class="w"> </span><span class="p">*</span><span class="p">*</span><span class="n sig-param">looper</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">NULL</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">bool</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv48BInvoker" title="BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">IsTargetLocal</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="messenger.html#_CPPv410BMessenger" title="BMessenger"><span class="n">BMessenger</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv48BInvoker" title="BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">Messenger</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><p>These functions set and query the <span class="hclass">BInvoker</span>’s target. This is the
<a class="reference internal" href="handler.html#_CPPv48BHandler" title="BHandler"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BHandler</span></code></a> to which the object sends a message when
<a class="reference internal" href="#_CPPv4N8BInvoker6InvokeEP8BMessage" title="BInvoker::Invoke"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Invoke()</span></code></a> is called. The target is
represented by a <a class="reference internal" href="messenger.html#_CPPv410BMessenger" title="BMessenger"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BMessenger</span></code></a> object; you can set the
<a class="reference internal" href="messenger.html#_CPPv410BMessenger" title="BMessenger"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BMessenger</span></code></a> as a copy of <span class="hparameter">messenger</span>, or initialize it
with <span class="hparameter">looper</span> and <span class="hparameter">handler</span>. See the
<a class="reference internal" href="messenger.html#_CPPv410BMessenger" title="BMessenger"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BMessenger</span></code></a> class for details on how a <a class="reference internal" href="messenger.html#_CPPv410BMessenger" title="BMessenger"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BMessenger</span></code></a>
identifies a target.</p>
<p><span class="hmethod">Target()</span> returns the <a class="reference internal" href="handler.html#_CPPv48BHandler" title="BHandler"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BHandler</span></code></a> that’s targeted by
the object’s messenger. If <span class="hparameter">looper</span> is non-<span class="cpp-expr sig sig-inline cpp"><span class="n">NULL</span></span>, the
<a class="reference internal" href="looper.html#_CPPv47BLooper" title="BLooper"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BLooper</span></code></a> that owns the <a class="reference internal" href="handler.html#_CPPv48BHandler" title="BHandler"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BHandler</span></code></a> is returned by
reference. If the target was set as a looper’s preferred handler (i.e.
<code class="docutils literal notranslate"><span class="pre">SetTarget(NULL,</span> <span class="pre">looper)</span></code>), or if the target hasn’t been set yet,
<span class="hmethod">Target()</span> returns <span class="cpp-expr sig sig-inline cpp"><span class="n">NULL</span></span>. The function returns
<span class="cpp-expr sig sig-inline cpp"><span class="n">NULL</span></span> for both objects if the target is remote.</p>
<p><span class="hmethod">IsTargetLocal()</span> returns <span class="cpp-expr sig sig-inline cpp"><span class="k">true</span></span> if the target lives
within the <span class="hclass">BInvoker</span>’s application, and <span class="cpp-expr sig sig-inline cpp"><span class="k">false</span></span> if it
belongs to some other application.</p>
<p><span class="hmethod">Messenger()</span> returns a copy of the <a class="reference internal" href="messenger.html#_CPPv410BMessenger" title="BMessenger"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BMessenger</span></code></a>
object the <span class="hclass">BInvoker</span> uses to send messages. If a target hasn’t
been set yet, the return will be invalid.</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>The target was successfully set.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_BAD_VALUE</span></code>.</p></td>
<td><p>The proposed <span class="hparameter">handler</span> doesn’t belong to a <a class="reference internal" href="looper.html#_CPPv47BLooper" title="BLooper"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BLooper</span></code></a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_MISMATCHED_VALUES</span></code>.</p></td>
<td><p><span class="hparameter">handler</span> doesn’t belong to <span class="hparameter">looper</span>.</p></td>
</tr>
</tbody>
</table>
<div class="warning admonition">
<p class="admonition-title">Warning</p>
<p><span class="hmethod">SetTarget()</span> doesn’t detect invalid <a class="reference internal" href="looper.html#_CPPv47BLooper" title="BLooper"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BLooper</span></code></a>s and
<a class="reference internal" href="messenger.html#_CPPv410BMessenger" title="BMessenger"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BMessenger</span></code></a>s.</p>
</div>
<section id="_CPPv4N8BInvoker10SetTimeoutE9bigtime_t">
</section>
<section id="_CPPv4NK8BInvoker7TimeoutEv">
</section>
<h3>
SetTimeout(), Timeout()</h3><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="../storage/the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv48BInvoker" title="BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">SetTimeout</span><span class="sig-paren">(</span><span class="n">bigtime_t</span><span class="w"> </span><span class="n sig-param">timeout</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">bigtime_t</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv48BInvoker" title="BInvoker"><span class="n">BInvoker</span></a><span class="p">::</span></span><span class="n">Timeout</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><p><span class="hmethod">SetTimeout()</span> sets the timeout that will be used when sending
the invocation message to the invoker’s target. By default this is
<a class="reference internal" href="../kernel/miscellaneous.html#_CPPv418B_INFINITE_TIMEOUT" title="B_INFINITE_TIMEOUT"><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_INFINITE_TIMEOUT</span></code></a>.</p>
<p><span class="hmethod">Timeout()</span> returns the current setting for this value.</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>No error.</p></td>
</tr>
</tbody>
</table>
</section>
</section>


        <div class="clearer"></div>
      </div>
          </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">The Application Kit</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="looper.html">BLooper</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, Haiku, Inc..
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>