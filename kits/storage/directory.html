
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>BDirectory &#8212; The Haiku Book  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/haiku.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/code.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="BEntry" href="entry.html" />
    <link rel="prev" title="BAppFileInfo" href="app-file-info.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../../index.html">
          <span>API Documentation</span></a></h1>
        <h2 class="heading"><span>BDirectory</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="app-file-info.html">BAppFileInfo</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="entry.html">BEntry</a>&#160;&#160;»
        </p>

      </div>
        
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">BDirectory</a><ul>
<li><a class="reference internal" href="#constructor-and-destructor">Constructor and Destructor</a><ul>
<li><a class="reference internal" href="#_CPPv4N10BDirectory10BDirectoryEv">BDirectory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#member-functions">Member Functions</a><ul>
<li><a class="reference internal" href="#_CPPv4NK10BDirectory8ContainsEPKc5int32">Contains</a></li>
<li><a class="reference internal" href="#_CPPv4N10BDirectory10CreateFileEPKcP5BFileb">CreateFile</a></li>
<li><a class="reference internal" href="#_CPPv4N10BDirectory15CreateDirectoryEPKcP10BDirectory">CreateDirectory</a></li>
<li><a class="reference internal" href="#_CPPv4N10BDirectory13CreateSymLinkEPKcPKcP8BSymLink">CreateSymLink</a></li>
<li><a class="reference internal" href="#_CPPv4NK10BDirectory9FindEntryEPKcP6BEntryb">FindEntry</a></li>
<li><a class="reference internal" href="#_CPPv4NK10BDirectory8GetEntryEP6BEntry">GetEntry</a></li>
<li><a class="reference internal" href="#_CPPv4N10BDirectory12GetNextEntryEP6BEntryb">GetNextEntry</a></li>
<li><a class="reference internal" href="#_CPPv4N10BDirectory10GetNextRefEP9entry_ref">GetNextRef</a></li>
<li><a class="reference internal" href="#_CPPv4N10BDirectory14GetNextDirentsEP6dirent6size_t5int32">GetNextDirents</a></li>
<li><a class="reference internal" href="#_CPPv4N10BDirectory12CountEntriesEv">CountEntries</a></li>
<li><a class="reference internal" href="#_CPPv4N10BDirectory6RewindEv">Rewind</a></li>
<li><a class="reference internal" href="#_CPPv4NK10BDirectory10GetStatForEPKcP4stat">GetStatFor</a></li>
<li><a class="reference internal" href="#_CPPv4NK10BDirectory15IsRootDirectoryEv">IsRootDirectory</a></li>
<li><a class="reference internal" href="#_CPPv4N10BDirectory5SetToEPK9entry_ref">SetTo</a></li>
<li><a class="reference internal" href="#_CPPv4N10BDirectory5UnsetEv">Unset</a></li>
</ul>
</li>
<li><a class="reference internal" href="#operators">Operators</a></li>
<li><a class="reference internal" href="#c-functions">C Functions</a><ul>
<li><a class="reference internal" href="#_CPPv4N10BDirectory16create_directoryEPKc6mode_t">create_directory</a></li>
<li><a class="reference internal" href="#_CPPv4N10BDirectory14find_directoryE15directory_which5dev_tbPc5int32">find_directory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#constants">Constants</a></li>
</ul>
</li>
</ul>

  </div>

        </div>
      </div>
          <div class="bodywrapper">
      <div class="content" role="main">
        
  <section id="bdirectory">
<h1>BDirectory<a class="headerlink" href="#bdirectory" title="Permalink to this heading">¶</a></h1>
<section id="constructor-and-destructor">
<h2>Constructor and Destructor<a class="headerlink" href="#constructor-and-destructor" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4N10BDirectory10BDirectoryEv">
</section>
<h3>
BDirectory()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N10BDirectory10BDirectoryEv" title="BDirectory::BDirectory"><span class="n">BDirectory</span></a><span class="p">::</span></span><span class="n">BDirectory</span><span class="sig-paren">(</span><span class="sig-paren">)</span><br /><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N10BDirectory10BDirectoryEPK9entry_ref" title="BDirectory::BDirectory"><span class="n">BDirectory</span></a><span class="p">::</span></span><span class="n">BDirectory</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="n">entry_ref</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">ref</span><span class="sig-paren">)</span><br /><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N10BDirectory10BDirectoryEPK6BEntry" title="BDirectory::BDirectory"><span class="n">BDirectory</span></a><span class="p">::</span></span><span class="n">BDirectory</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="n">BEntry</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">entry</span><span class="sig-paren">)</span><br /><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N10BDirectory10BDirectoryEPK8node_ref" title="BDirectory::BDirectory"><span class="n">BDirectory</span></a><span class="p">::</span></span><span class="n">BDirectory</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="n">node_ref</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">nref</span><span class="sig-paren">)</span><br /><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N10BDirectory10BDirectoryEPKc" title="BDirectory::BDirectory"><span class="n">BDirectory</span></a><span class="p">::</span></span><span class="n">BDirectory</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span><span class="sig-paren">)</span><br /><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N10BDirectory10BDirectoryEPK10BDirectoryPKc" title="BDirectory::BDirectory"><span class="n">BDirectory</span></a><span class="p">::</span></span><span class="n">BDirectory</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><a class="reference internal" href="#_CPPv4N10BDirectory10BDirectoryEPK10BDirectoryPKc" title="BDirectory::BDirectory"><span class="n">BDirectory</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">dir</span>, <span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span><span class="sig-paren">)</span><br /><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N10BDirectory10BDirectoryERK10BDirectory" title="BDirectory::BDirectory"><span class="n">BDirectory</span></a><span class="p">::</span></span><span class="n">BDirectory</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><a class="reference internal" href="#_CPPv4N10BDirectory10BDirectoryERK10BDirectory" title="BDirectory::BDirectory"><span class="n">BDirectory</span></a><span class="w"> </span><span class="p">&amp;</span><span class="n sig-param">directory</span><span class="sig-paren">)</span></pre><p>Creates a new <span class="hclass">BDirectory</span> object that represents the directory as given by
the arguments. See the analogous
<a class="reference internal" href="#_CPPv4N10BDirectory5SetToEPK9entry_ref" title="BDirectory::SetTo"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetTo()</span></code></a> functions for descriptions of
the flavorful constructors.</p>
<ul class="simple">
<li><p>The default constructor does nothing; it should be followed by a call to <a class="reference internal" href="#_CPPv4N10BDirectory5SetToEPK9entry_ref" title="BDirectory::SetTo"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetTo()</span></code></a>.</p></li>
<li><p>The copy constructor points the <span class="hclass">BDirectory</span> to the same directory as is represented by the argument. The two objects have their own entry iterators.</p></li>
</ul>
<p>To check to see if an initialization was successful, call
<a class="reference internal" href="node.html#_CPPv4NK5BNode9InitCheckEv" title="BNode::InitCheck"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">InitCheck()</span></code></a>.</p>
<h3>
</h3><pre style="background: #f3f3f3; line-height: 2em">virtual BDirectory::~BDirectory()()</pre><p>Deletes the object.</p>
</section>
<section id="member-functions">
<h2>Member Functions<a class="headerlink" href="#member-functions" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4NK10BDirectory8ContainsEPKc5int32">
</section>
<h3>
Contains()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">bool</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">Contains</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span>, <span class="n">int32</span><span class="w"> </span><span class="n sig-param">nodeFlags</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">B_ANY_NODE</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span><br /><span class="kt">bool</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">Contains</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="n">BEntry</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">entry</span>, <span class="n">int32</span><span class="w"> </span><span class="n sig-param">nodeFlags</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">B_ANY_NODE</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><p>Returns <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">true</span></code> if <span class="hparameter">path</span> or
<span class="hparameter">entry</span> is contained within this directory, or in any
of its subdirectories (no matter how deep). You can use the
<span class="hparameter">nodeFlags</span> argument to limit the search to a
particular flavor of node:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Constant</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_FILE_NODE</span></code></p></td>
<td><p>Looks for a “plain” file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_DIRECTORY_NODE</span></code></p></td>
<td><p>Looks for a directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_SYMLINK_NODE</span></code></p></td>
<td><p>Looks for a symbolic link.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ANY_NODE</span></code></p></td>
<td><p>(The default) Doesn’t discriminate between flavors.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4N10BDirectory10CreateFileEPKcP5BFileb">
</section>
<section id="_CPPv4N10BDirectory15CreateDirectoryEPKcP10BDirectory">
</section>
<section id="_CPPv4N10BDirectory13CreateSymLinkEPKcPKcP8BSymLink">
</section>
<h3>
CreateFile(), CreateDirectory(), CreateSymLink()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">CreateFile</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span>, <span class="n">BFile</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">file</span>, <span class="kt">bool</span><span class="w"> </span><span class="n sig-param">failIfExists</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">false</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">CreateDirectory</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span>, <span class="n">BDirectory</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">dir</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">CreateSymLink</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span>, <span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">linkToPath</span>, <span class="n">BSymLink</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">link</span><span class="sig-paren">)</span></pre><p>These functions create a new file, directory, or symbolic link. The new
node is located at <span class="hparameter">path</span>. If <span class="hparameter">path</span> is relative, it’s reckoned off of the
directory represented by this <span class="hclass">BDirectory</span>; if it’s absolute, the path of
this <span class="hclass">BDirectory</span> is ignored.</p>
<ul class="simple">
<li><p><span class="hmethod">CreateFile()</span> fails if the file already exists and <span class="hparameter">failIfExists</span> is <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">true</span></code>. If the flag is <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">false</span></code> (and the file exists), the old file is clobbered and a new one is created. If successful, the <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BFile</span></code> argument that you pass in is opened on the new file in <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_READ_WRITE</span></code> mode.</p></li>
<li><p><span class="hmethod">CreateDirectory()</span> and <span class="hmethod">CreateSymLink()</span> fail if <span class="hparameter">path</span> already exists—you can’t clobber an existing directory or link.</p></li>
<li><p>The <span class="hparameter">linkToPath</span> argument (<span class="hmethod">CreateSymLink()</span>) is the path that the new symbolic link will be linked to.</p></li>
</ul>
<p>The object argument (the
<span class="hclass">BDirectory</span>,
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BFile</span></code>, or
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BSymLink</span></code>)
may be <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">NULL</span></code>. If
the function fails, the object argument, if non-<code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">NULL</span></code>, is
<a class="reference internal" href="#_CPPv4N10BDirectory5UnsetEv" title="BDirectory::Unset"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Unset()</span></code></a>.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>Success.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BAD_VALUE</span></code>.</p></td>
<td><p>Illegal <span class="hparameter">path</span>, <span class="hparameter">file</span>, <span class="hparameter">dir</span>, or <span class="hparameter">link</span> specified; may be <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">NULL</span></code>. path may be empty.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BUSY</span></code>.</p></td>
<td><p>A busy node could not be accessed.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ENTRY_NOT_FOUND</span></code>.</p></td>
<td><p>The specified <span class="hparameter">path</span> does not exist or is an empty string.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_FILE_ERROR</span></code>.</p></td>
<td><p>A file system error prevented the operation.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_FILE_EXISTS</span></code>.</p></td>
<td><p>The file specified by <span class="hparameter">path</span> already exists.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_LINK_LIMIT</span></code>.</p></td>
<td><p>A cyclic loop has been detected in the file system.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NAME_TOO_LONG</span></code>.</p></td>
<td><p>The <span class="hparameter">path</span> specified is too long.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NO_MEMORY</span></code>.</p></td>
<td><p>Insufficient memory to perform the operation.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NO_MORE_FDS</span></code>.</p></td>
<td><p>All file descriptors are in use (too many open files).</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_IS_A_DIRECTORY</span></code>.</p></td>
<td><p>Can’t replace a directory with a file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NOT_A_DIRECTORY</span></code>.</p></td>
<td><p>A component of the <span class="hparameter">path</span> is not a directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NOT_ALLOWED</span></code>.</p></td>
<td><p>The volume is read-only.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_PERMISSION_DENIED</span></code>.</p></td>
<td><p>Create access is denied in the specified <span class="hparameter">path</span>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">E2BIG</span></code>.</p></td>
<td><p><span class="hparameter">linkToPath</span> is too long (<span class="hmethod">CreateSymLink()</span> only).</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4NK10BDirectory9FindEntryEPKcP6BEntryb">
</section>
<h3>
FindEntry()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">FindEntry</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span>, <span class="n">BEntry</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">entry</span>, <span class="kt">bool</span><span class="w"> </span><span class="n sig-param">traverse</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">false</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><p>Finds the entry with the given name, and sets the second argument to
refer to that entry.</p>
<ul class="simple">
<li><p><span class="hparameter">path</span> must be a relative pathname. It’s reckoned off of the <span class="hclass">BDirectory</span>’s directory.</p></li>
<li><p>You are allowed to look for “.” and “..”. The former represents this directory’s entry. The latter refers to this directory’s parent.</p></li>
<li><p>The <span class="hparameter">entry</span> argument must be allocated before it’s passed in (it needn’t be initialized).</p></li>
<li><p>The <span class="hparameter">traverse</span> applies to symbolic links: If the flag is <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">true</span></code>, the link is traversed. If it’s <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">false</span></code>, you get the <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BEntry</span></code> that points to the link itself.</p></li>
</ul>
<p>If <span class="hparameter">path</span> isn’t found, the second argument is
automatically <a class="reference internal" href="#_CPPv4N10BDirectory5UnsetEv" title="BDirectory::Unset"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Unset()</span></code></a>. To
find out why the lookup failed, invoke
<a class="reference internal" href="node.html#_CPPv4NK5BNode9InitCheckEv" title="BNode::InitCheck"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">InitCheck()</span></code></a>
on the <span class="hparameter">entry</span> argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BEntry</span> <span class="n">entry</span><span class="p">;</span>
<span class="n">status_t</span> <span class="n">err</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">dir</span><span class="o">.</span><span class="n">FindEntry</span><span class="p">(</span><span class="s2">&quot;aFile&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">entry</span><span class="p">)</span> <span class="o">!=</span> <span class="n">B_OK</span><span class="p">)</span> <span class="p">{</span>
   <span class="n">err</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">InitCheck</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The direct return value is also informative, but it may not be as precise
as the <a class="reference internal" href="node.html#_CPPv4NK5BNode9InitCheckEv" title="BNode::InitCheck"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">InitCheck()</span></code></a>
value.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>Success.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BAD_VALUE</span></code>.</p></td>
<td><p>Invalid <span class="hparameter">path</span> specified; it may be <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">NULL</span></code> or empty.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ENTRY_NOT_FOUND</span></code>.</p></td>
<td><p>The specified <span class="hparameter">path</span> does not exist.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NAME_TOO_LONG</span></code>.</p></td>
<td><p>The <span class="hparameter">path</span> specified is too long.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_LINK_LIMIT</span></code>.</p></td>
<td><p>A cyclic loop has been detected in the file system.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NO_MEMORY</span></code>.</p></td>
<td><p>Insufficient memory to perform the operation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_FILE_ERROR</span></code>.</p></td>
<td><p>An invalid file prevented the operation.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4NK10BDirectory8GetEntryEP6BEntry">
</section>
<h3>
GetEntry()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">GetEntry</span><span class="sig-paren">(</span><span class="n">BEntry</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">entry</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><p>Initializes <span class="hparameter">entry</span> to represent this
<span class="hclass">BDirectory</span>. If the initialization
fails, <span class="hparameter">entry</span> is
<a class="reference internal" href="#_CPPv4N10BDirectory5UnsetEv" title="BDirectory::Unset"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Unset()</span></code></a>.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>Success.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NAME_TOO_LONG</span></code>.</p></td>
<td><p>The path specified by <span class="hparameter">entry</span> is too long.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ENTRY_NOT_FOUND</span></code>.</p></td>
<td><p>The specified path does not exist.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_LINK_LIMIT</span></code>.</p></td>
<td><p>A cyclic loop has been detected in the file system.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BAD_VALUE</span></code>.</p></td>
<td><p><span class="hparameter">entry</span> is uninitialized.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NO_MEMORY</span></code>.</p></td>
<td><p>Insufficient memory to perform the operation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BUSY</span></code>.</p></td>
<td><p>A busy node could not be accessed.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_FILE_ERROR</span></code>.</p></td>
<td><p>An invalid file prevented the operation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NO_MORE_FDS</span></code>.</p></td>
<td><p>All file descriptors are in use (too many open files).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NOT_A_DIRECTORY</span></code>.</p></td>
<td><p>The path includes non-directory entries.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4N10BDirectory12GetNextEntryEP6BEntryb">
</section>
<section id="_CPPv4N10BDirectory10GetNextRefEP9entry_ref">
</section>
<section id="_CPPv4N10BDirectory14GetNextDirentsEP6dirent6size_t5int32">
</section>
<section id="_CPPv4N10BDirectory12CountEntriesEv">
</section>
<section id="_CPPv4N10BDirectory6RewindEv">
</section>
<h3>
GetNextEntry(), GetNextRef(), GetNextDirents(), CountEntries(), Rewind()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">GetNextEntry</span><span class="sig-paren">(</span><span class="n">BEntry</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">entry</span>, <span class="kt">bool</span><span class="w"> </span><span class="n sig-param">traverse</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">false</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">GetNextRef</span><span class="sig-paren">(</span><span class="n">entry_ref</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">ref</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">GetNextDirents</span><span class="sig-paren">(</span><span class="n">dirent</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">buf</span>, <span class="n">size_t</span><span class="w"> </span><span class="n sig-param">bufsize</span>, <span class="n">int32</span><span class="w"> </span><span class="n sig-param">count</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">INT_MAX</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">CountEntries</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">Rewind</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>The three <span class="hmethod">GetNext…()</span> functions retrieve the “next” entry that lives in
the <span class="hclass">BDirectory</span> and returns it as a
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BEntry</span></code>,
entry_ref, or dirent structure.</p>
<ul class="simple">
<li><p><span class="hmethod">GetNextEntry()</span> returns the entry as a <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BEntry</span></code> object. If <span class="hparameter">traverse</span> is <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">true</span></code> and the entry is a symbolic link, the link is traversed. In other words, <span class="hparameter">entry</span> could end up being in a different directory than the one referred to by this. When all entries have been visited, the function returns <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ENTRY_NOT_FOUND</span></code>. The <span class="hparameter">entry</span> argument must be allocated before it’s passed in.</p></li>
<li><p><span class="hmethod">GetNextRef()</span> return the next entry in <span class="hparameter">ref</span>. Since an entry_ref doesn’t supply enough information to determine if the entry is a link, there’s no question of traversal: The entry_ref points to exactly the next entry. When all entries have been visited, the function returns <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ENTRY_NOT_FOUND</span></code>. The <span class="hparameter">ref</span> argument must be allocated before it’s passed in.</p></li>
<li><p><span class="hmethod">GetNextDirents()</span> returns some number of dirent structures, either as many as can be stuffed into <span class="hparameter">buf</span> (where <span class="hparameter">bufsize</span> gives the size of <span class="hparameter">buf</span>), or <span class="hparameter">count</span> structures, whichever is smaller. The function returns the number of structures that were stuffed into <span class="hparameter">buf</span>; when all entries have been visited, it returns 0.</p></li>
</ul>
<div class="warning admonition">
<p class="admonition-title">Warning</p>
<p>Currently, <span class="hmethod">GetNextDirents()</span> only reads
one dirent at a time, no matter
how many you ask for.</p>
</div>
<p><span class="hmethod">GetNextEntry()</span> and <span class="hmethod">GetNextRef()</span>
are reasonably clear; the dirent version
deserves more explanation. You’ll find this explanation (and an example)
in the <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BEntryList</span></code>
class. Also, keep in mind that the set of candidate
entries is different for the dirent version:
<span class="hmethod">GetNextDirents()</span> finds all
entries, including the entries for “.” and “..”. The other two versions
skip these entries.</p>
<p>When you’re done reading the <span class="hclass">BDirectory</span>’s entries, you can rewind the
object’s entry iterator by calling
<a class="reference internal" href="#_CPPv4N10BDirectory6RewindEv" title="BDirectory::Rewind"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Rewind()</span></code></a>.</p>
<p><span class="hmethod">CountEntries()</span> returns the number of entries
(not counting “.” and “..”)
in the directory.</p>
<div class="warning admonition">
<p class="admonition-title">Warning</p>
<p>Never call <span class="hmethod">CountEntries()</span> while you’re iterating through the directory.
<span class="hmethod">CountEntries()</span> does a rewind, iterates through the entries, and then
rewinds again.</p>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>Success.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_FILE_ERROR</span></code>.</p></td>
<td><p><span class="hclass">BDirectory</span> object has not been properly initialized.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NOT_A_DIRECTORY</span></code>.</p></td>
<td><p>The directory is invalid.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NAME_TOO_LONG</span></code>.</p></td>
<td><p>The dirent’s name is too long.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ENTRY_NOT_FOUND</span></code>.</p></td>
<td><p>End of directory reached.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_LINK_LIMIT</span></code>.</p></td>
<td><p>A cyclic loop has been detected in the file system.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BAD_VALUE</span></code>.</p></td>
<td><p>Invalid input specified, or <span class="hclass">BDirectory</span> object has not been properly initialized.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NO_MEMORY</span></code>.</p></td>
<td><p>Insufficient memory to perform the operation.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4NK10BDirectory10GetStatForEPKcP4stat">
</section>
<h3>
GetStatFor()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">GetStatFor</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span>, <span class="n">stat</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">st</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><p>Gets the stat structure for the entry designated by <span class="hparameter">path</span>. <span class="hparameter">path</span> may be
either absolute or relative; if it’s relative, it’s reckoned off of the
<span class="hclass">BDirectory</span>’s directory. This is, primarily, a convenience function; but
it’s also provided for efficiency.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>Success.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_FILE_ERROR</span></code>.</p></td>
<td><p>An invalid file prevented the operation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NAME_TOO_LONG</span></code>.</p></td>
<td><p>The <span class="hparameter">path</span> specified is too long.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ENTRY_NOT_FOUND</span></code>.</p></td>
<td><p>The specified <span class="hparameter">path</span> does not exist.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_LINK_LIMIT</span></code>.</p></td>
<td><p>A cyclic loop has been detected in the file system.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BAD_VALUE</span></code>.</p></td>
<td><p>Invalid input specified; the <span class="hparameter">path</span> may be <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">NULL</span></code> or empty.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NO_MEMORY</span></code>.</p></td>
<td><p>Insufficient memory to perform the operation.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4NK10BDirectory15IsRootDirectoryEv">
</section>
<h3>
IsRootDirectory()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">bool</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">IsRootDirectory</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><p>Returns <span class="hparameter">true</span> if this <span class="hclass">BDirectory</span> represents a root directory. A root
directory is the directory that’s at the root of a volume’s file
hierarchy. Every volume has exactly one root directory; all other files
in the volume’s hierarchy descend from the root directory.</p>
<section id="_CPPv4N10BDirectory5SetToEPK9entry_ref">
</section>
<section id="_CPPv4N10BDirectory5UnsetEv">
</section>
<h3>
SetTo(), Unset()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">SetTo</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="n">entry_ref</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">ref</span><span class="sig-paren">)</span><br /><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">SetTo</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="n">node_ref</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">nref</span><span class="sig-paren">)</span><br /><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">SetTo</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="n">BEntry</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">entry</span><span class="sig-paren">)</span><br /><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">SetTo</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span><span class="sig-paren">)</span><br /><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">SetTo</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="n">BDirectory</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">directory</span>, <span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">Unset</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Closes the <span class="hclass">BDirectory</span>’s current directory (if any), and initializes the
object to open the directory as given by the arguments.</p>
<ul class="simple">
<li><p>In the <span class="hparameter">path</span> version, path can be absolute or relative, and can contain “.” and “..” elements. If <span class="hparameter">path</span> is relative, it’s reckoned off of the current working directory.</p></li>
<li><p>In the <span class="hparameter">dir</span>/<span class="hparameter">path</span> version, <span class="hparameter">path</span> must be relative. It’s reckoned off of the directory given by <span class="hparameter">dir</span>.</p></li>
</ul>
<p>If the specification results in a symbolic link that resolves to a
directory, then the linked-to directory is opened. If the specification
is (or resolves to) a regular file, the initialization fails.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>Success.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NAME_TOO_LONG</span></code>.</p></td>
<td><p>The <span class="hparameter">path</span> specified is too long.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_ENTRY_NOT_FOUND</span></code>.</p></td>
<td><p>The directory does not exist.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_LINK_LIMIT</span></code>.</p></td>
<td><p>A cyclic loop has been detected in the file system.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BAD_VALUE</span></code>.</p></td>
<td><p>Invalid input specified.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NO_MEMORY</span></code>.</p></td>
<td><p>Insufficient memory to perform the operation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BUSY</span></code>.</p></td>
<td><p>A busy node could not be accessed.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_FILE_ERROR</span></code>.</p></td>
<td><p>An invalid file prevented the operation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NO_MORE_FDS</span></code>.</p></td>
<td><p>All file descriptors are in use (too many open files).</p></td>
</tr>
</tbody>
</table>
</section>
<section id="operators">
<h2>Operators<a class="headerlink" href="#operators" title="Permalink to this heading">¶</a></h2>
<h3>
</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">BDirectory</span><span class="w"> </span><span class="p">&amp;</span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="k">operator</span><span class="o">=</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="n">BDirectory</span><span class="w"> </span><span class="p">&amp;</span><span class="n sig-param">directory</span><span class="sig-paren">)</span></pre><p>In the expression</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BDirectory</span> <span class="n">a</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
</pre></div>
</div>
<p><span class="hclass">BDirectory</span> a is initialized to
refer to the same directory as b. To gauge
the success of the assignment, you should call
<a class="reference internal" href="node.html#_CPPv4NK5BNode9InitCheckEv" title="BNode::InitCheck"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">InitCheck()</span></code></a> immediately
afterwards. Assigning a <span class="hclass">BDirectory</span> to itself is safe.</p>
<p>Assigning from an uninitialized <span class="hclass">BDirectory</span> is “successful”: The
assigned-to <span class="hclass">BDirectory</span> will also be
uninitialized (<code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NO_INIT</span></code>).</p>
</section>
<section id="c-functions">
<h2>C Functions<a class="headerlink" href="#c-functions" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4N10BDirectory16create_directoryEPKc6mode_t">
</section>
<h3>
create_directory()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">create_directory</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span>, <span class="n">mode_t</span><span class="w"> </span><span class="n sig-param">mode</span><span class="sig-paren">)</span></pre><p>Creates all missing directories along the path specified by <span class="hparameter">path</span>.</p>
<ul class="simple">
<li><p>The pathname can be absolute or relative. If it’s relative, the path is reckoned of the current working directory. If any symlinks are found in the existing portion of the path, they’re traversed.</p></li>
<li><p><span class="hparameter">path</span> can contain “.”, but it may not contain “..”.</p></li>
<li><p><span class="hparameter">mode</span> is the permissions setting (typically expressed as an octal number) that’s assigned to all directories that are created. To set the directories to be readable, writable, and “enterable” by all (for example), you would set the mode to 0777.</p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p><span class="hparameter">path</span> now fully exists (or did in the first place).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BAD_VALUE</span></code>.</p></td>
<td><p><span class="hparameter">path</span> is <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">NULL</span></code>, is empty, or contains “..”.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NOT_ALLOWED</span></code>.</p></td>
<td><p>Read-only volume.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_NO_MEMORY</span></code>.</p></td>
<td><p>Insufficient memory to perform the operation.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4N10BDirectory14find_directoryE15directory_which5dev_tbPc5int32">
</section>
<h3>
find_directory()</h3><p>Declared in: storage/FindDirectory.h</p>
<pre style="background: #f3f3f3; line-height: 2em"><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">find_directory</span><span class="sig-paren">(</span><span class="n">directory_which</span><span class="w"> </span><span class="n sig-param">which</span>, <span class="n">dev_t</span><span class="w"> </span><span class="n sig-param">volume</span>, <span class="kt">bool</span><span class="w"> </span><span class="n sig-param">create_it</span>, <span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path_string</span>, <span class="n">int32</span><span class="w"> </span><span class="n sig-param">length</span><span class="sig-paren">)</span><br /><span class="n">status_t</span><span class="w"> </span><span class="sig-prename descclassname"><span class="n">BDirectory</span><span class="p">::</span></span><span class="n">find_directory</span><span class="sig-paren">(</span><span class="n">directory_which</span><span class="w"> </span><span class="n sig-param">which</span>, <span class="n">BPath</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path_obj</span>, <span class="kt">bool</span><span class="w"> </span><span class="n sig-param">create_it</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">false</span>, <span class="n">BVolume</span><span class="w"> </span><span class="n sig-param">volume</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">NULL</span><span class="sig-paren">)</span></pre><div class="note admonition">
<p class="admonition-title">Note</p>
<p>The first version of this function can be used in either C or C++ code.
The second version is for C++ code only.</p>
</div>
<p>Finds the path to the directory symbolized by <span class="hparameter">which</span> and copies it into
<span class="hparameter">path_string</span>, or uses it to initialize <span class="hparameter">path_obj</span>.</p>
<ul class="simple">
<li><p>The <span class="hparameter">create_it</span> argument tells the function to create the directory if it doesn’t already exist.</p></li>
<li><p><span class="hparameter">volume</span> identifies the volume (as a dev_t identifier or <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BVolume</span></code> object) on which you want to look. The C++ default (<code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">NULL</span></code>) means to look in the boot volume.</p></li>
<li><p>The <span class="hparameter">length</span> argument (first version only) gives the length of <span class="hparameter">path</span>.</p></li>
</ul>
<p>The <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">directory()</span></code>
constants are described below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>The directory was found.</p></td>
</tr>
<tr class="row-odd"><td><p>Other codes.</p></td>
<td><p>The directory wasn’t found or couldn’t be created.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="constants">
<h2>Constants<a class="headerlink" href="#constants" title="Permalink to this heading">¶</a></h2>
<h3>
</h3><p>Declared in: storage/FindDirectory.h</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Constant</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_DESKTOP_DIRECTORY</span></code></p></td>
<td><p>Desktop directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_TRASH_DIRECTORY</span></code></p></td>
<td><p>Trash directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_APPS_DIRECTORY</span></code></p></td>
<td><p>Applications directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_PREFERENCES_DIRECTORY</span></code></p></td>
<td><p>Preferences directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BEOS_DIRECTORY</span></code></p></td>
<td><p>BeOS directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BEOS_SYSTEM_DIRECTORY</span></code></p></td>
<td><p>System directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BEOS_ADDONS_DIRECTORY</span></code></p></td>
<td><p>BeOS add-ons directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BEOS_BOOT_DIRECTORY</span></code></p></td>
<td><p>Boot volume’s root directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BEOS_FONTS_DIRECTORY</span></code></p></td>
<td><p>BeOS fonts directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BEOS_LIB_DIRECTORY</span></code></p></td>
<td><p>BeOS libraries directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BEOS_SERVERS_DIRECTORY</span></code></p></td>
<td><p>BeOS servers directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BEOS_APPS_DIRECTORY</span></code></p></td>
<td><p>BeOS applications directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BEOS_BIN_DIRECTORY</span></code></p></td>
<td><p>/bin directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BEOS_ETC_DIRECTORY</span></code></p></td>
<td><p>/etc directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BEOS_DOCUMENTATION_DIRECTORY</span></code></p></td>
<td><p>BeOS documentation directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BEOS_PREFERENCES_DIRECTORY</span></code></p></td>
<td><p>BeOS preferences directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMON_DIRECTORY</span></code></p></td>
<td><p>The common directory, shared by all users.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMON_SYSTEM_DIRECTORY</span></code></p></td>
<td><p>The shared system directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMON_ADDONS_DIRECTORY</span></code></p></td>
<td><p>The shared addons directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMON_BOOT_DIRECTORY</span></code></p></td>
<td><p>The shared boot directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMON_FONTS_DIRECTORY</span></code></p></td>
<td><p>The shared fonts directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMON_LIB_DIRECTORY</span></code></p></td>
<td><p>The shared libraries directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMON_SERVERS_DIRECTORY</span></code></p></td>
<td><p>The shared servers directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMON_BIN_DIRECTORY</span></code></p></td>
<td><p>The shared /bin directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMON_ETC_DIRECTORY</span></code></p></td>
<td><p>The shared /etc directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMON_DOCUMENTATION_DIRECTORY</span></code></p></td>
<td><p>The shared documentation directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMON_SETTINGS_DIRECTORY</span></code></p></td>
<td><p>The shared settings directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMON_DEVELOP_DIRECTORY</span></code></p></td>
<td><p>The shared develop directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMON_LOG_DIRECTORY</span></code></p></td>
<td><p>The shared log directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMON_SPOOL_DIRECTORY</span></code></p></td>
<td><p>The shared spool directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMON_TEMP_DIRECTORY</span></code></p></td>
<td><p>The shared temporary items directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMON_VAR_DIRECTORY</span></code></p></td>
<td><p>The shared /var directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_USER_DIRECTORY</span></code></p></td>
<td><p>The user’s home directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_USER_CONFIG_DIRECTORY</span></code></p></td>
<td><p>The user’s config directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_USER_ADDONS_DIRECTORY</span></code></p></td>
<td><p>The user’s add-ons directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_USER_BOOT_DIRECTORY</span></code></p></td>
<td><p>The user’s /boot directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_USER_FONTS_DIRECTORY</span></code></p></td>
<td><p>The user’s fonts directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_USER_LIB_DIRECTORY</span></code></p></td>
<td><p>The user’s libraries directory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_USER_SETTINGS_DIRECTORY</span></code></p></td>
<td><p>The user’s settings directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_USER_DESKBAR_DIRECTORY</span></code></p></td>
<td><p>The user’s Deskbar directory.</p></td>
</tr>
</tbody>
</table>
<p>These constants are used when calling the
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">directory()</span></code> function to
determine the pathname of a particular directory of interest.</p>
<p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_DESKTOP_DIRECTORY</span></code> and <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_TRASH_DIRECTORY</span></code> are per-volume directories; if
you don’t specify the volume you wish to locate these directories on,
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">directory()</span></code>
will assume you mean the boot disk.</p>
<p><code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_APPS_DIRECTORY</span></code> and <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_PREFERENCES_DIRECTORY</span></code> are global directories, and
always refer to the standard apps and preferences directories.</p>
<p>The <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_BEOS_*</span></code> constants refer to BeOS-owned directories, the <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMON_*</span></code>
constants refer to directories that are common to all users of the
system, and the <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_USER_*</span></code> constants refer to the current user’s
directories (currently these are all in a subtree rooted at
/boot/home,
but when multiuser support is implemented in a future version of BeOS,
these won’t necessarily all be the same anymore).</p>
<p>In general, global application and system settings should be kept in
<code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_COMMON_*</span></code>; while settings that each user should be able to configure
individually should be kept in <code class="xref cpp cpp-enum docutils literal notranslate"><span class="pre">B_USER_*</span></code>.</p>
<p>By using these constants properly, your code will be compatible with
future generations of the BeOS.</p>
</section>
</section>


        <div class="clearer"></div>
      </div>
          </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="app-file-info.html">BAppFileInfo</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="entry.html">BEntry</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, Haiku, Inc..
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>