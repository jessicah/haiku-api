
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>BEntry &#8212; The Haiku Book  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/haiku.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/code.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="BEntryList" href="entry-list.html" />
    <link rel="prev" title="BDirectory" href="directory.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../../index.html">
          <span>API Documentation</span></a></h1>
        <h2 class="heading"><span>BEntry</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="directory.html">BDirectory</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="entry-list.html">BEntryList</a>&#160;&#160;»
        </p>

      </div>
        
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">BEntry</a><ul>
<li><a class="reference internal" href="#constructor-and-destructor">Constructor and Destructor</a><ul>
<li><a class="reference internal" href="#_CPPv4N6BEntry6BEntryEv">BEntry</a></li>
<li><a class="reference internal" href="#_CPPv4N6BEntry6BEntryEv">BEntry</a></li>
</ul>
</li>
<li><a class="reference internal" href="#member-functions">Member Functions</a><ul>
<li><a class="reference internal" href="#_CPPv4NK6BEntry6ExistsEv">Exists</a></li>
<li><a class="reference internal" href="#_CPPv4NK6BEntry7GetNameEPc">GetName</a></li>
<li><a class="reference internal" href="#_CPPv4NK6BEntry7GetPathEP5BPath">GetPath</a></li>
<li><a class="reference internal" href="#_CPPv4NK6BEntry9GetParentEP6BEntry">GetParent</a></li>
<li><a class="reference internal" href="#_CPPv4NK6BEntry6GetRefEP9entry_ref">GetRef</a></li>
<li><a class="reference internal" href="#_CPPv4NK6BEntry7GetStatEP4stat">GetStat</a></li>
<li><a class="reference internal" href="#_CPPv4NK6BEntry9InitCheckEv">InitCheck</a></li>
<li><a class="reference internal" href="#_CPPv4N6BEntry6RemoveEv">Remove</a></li>
<li><a class="reference internal" href="#_CPPv4N6BEntry6RenameEPKcb">Rename</a></li>
<li><a class="reference internal" href="#_CPPv4N6BEntry6MoveToEP10BDirectoryPKcb">MoveTo</a></li>
<li><a class="reference internal" href="#_CPPv4N6BEntry5SetToEPK9entry_refb">SetTo</a></li>
<li><a class="reference internal" href="#_CPPv4N6BEntry5UnsetEv">Unset</a></li>
</ul>
</li>
<li><a class="reference internal" href="#operators">Operators</a></li>
<li><a class="reference internal" href="#global-c-function">Global C Function</a><ul>
<li><a class="reference internal" href="#_CPPv4N6BEntry16get_ref_for_pathEPKcP9entry_ref">get_ref_for_path</a></li>
</ul>
</li>
<li><a class="reference internal" href="#defined-types">Defined Types</a><ul>
<li><a class="reference internal" href="#_CPPv4N6BEntry9entry_refEv">entry_ref</a></li>
<li><a class="reference internal" href="#_CPPv4N6BEntryD0Ev">~entry_ref</a></li>
<li><a class="reference internal" href="#_CPPv4N6BEntry8set_nameEPKc">set_name</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>

        </div>
      </div>
          <div class="bodywrapper">
      <div class="content" role="main">
        
  <section id="bentry">
<h1 id="CPPv46BEntry">BEntry<a class="headerlink" href="#bentry" title="Permalink to this heading">¶</a></h1>
<section id="constructor-and-destructor">
<h2>Constructor and Destructor<a class="headerlink" href="#constructor-and-destructor" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4N6BEntry6BEntryEv">
</section>
<h3>
BEntry()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N6BEntry6BEntryEv" title="BEntry::BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">BEntry</span><span class="sig-paren">(</span><span class="sig-paren">)</span><br /><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N6BEntry6BEntryEPK10BDirectoryPKcb" title="BEntry::BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">BEntry</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><a class="reference internal" href="directory.html#_CPPv410BDirectory" title="BDirectory"><span class="n">BDirectory</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">dir</span>, <span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span>, <span class="kt">bool</span><span class="w"> </span><span class="n sig-param">traverse</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">false</span><span class="sig-paren">)</span><br /><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N6BEntry6BEntryEPK9entry_refb" title="BEntry::BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">BEntry</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6BEntry9entry_refEv" title="BEntry::entry_ref"><span class="n">entry_ref</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">entry</span>, <span class="kt">bool</span><span class="w"> </span><span class="n sig-param">traverse</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">false</span><span class="sig-paren">)</span><br /><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N6BEntry6BEntryEPKcb" title="BEntry::BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">BEntry</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span>, <span class="kt">bool</span><span class="w"> </span><span class="n sig-param">traverse</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">false</span><span class="sig-paren">)</span><br /><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N6BEntry6BEntryERK6BEntry" title="BEntry::BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">BEntry</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6BEntry6BEntryERK6BEntry" title="BEntry::BEntry"><span class="n">BEntry</span></a><span class="w"> </span><span class="p">&amp;</span><span class="n sig-param">entry</span><span class="sig-paren">)</span></pre><p>Creates a new <span class="hclass">BEntry</span> object that represents the entry described
by the arguments. See the analogous <a class="reference internal" href="#_CPPv4N6BEntry5SetToEPK9entry_refb" title="BEntry::SetTo"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetTo()</span></code></a>
functions for descriptions of the flavorful constructors.</p>
<p>The default constructor does nothing; it should be followed by a call to
<a class="reference internal" href="#_CPPv4N6BEntry5SetToEPK9entry_refb" title="BEntry::SetTo"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetTo()</span></code></a>.</p>
<p>The copy constructor points the new object to the entry that’s represented
by the argument. The two objects themselves maintain separate
representation of the entry; in other words, they each contain their own a)
file descriptor and b) string to identify the entry’s a) directory and b)
name.</p>
<p>To see if the initialization was successful, call <a class="reference internal" href="#_CPPv4NK6BEntry9InitCheckEv" title="BEntry::InitCheck"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">InitCheck()</span></code></a>.</p>
<section id="_CPPv4N6BEntry6BEntryEv">
</section>
<h3>
BEntry()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N6BEntry6BEntryEv" title="BEntry::BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">BEntry</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Closes the <span class="hclass">BEntry</span>’s file descriptor and destroys the
<span class="hclass">BEntry</span> object.</p>
</section>
<section id="member-functions">
<h2>Member Functions<a class="headerlink" href="#member-functions" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4NK6BEntry6ExistsEv">
</section>
<h3>
Exists()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">bool</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">Exists</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p>The entry exists.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p>otherwise.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4NK6BEntry7GetNameEPc">
</section>
<section id="_CPPv4NK6BEntry7GetPathEP5BPath">
</section>
<h3>
GetName(), GetPath()</h3><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">GetName</span><span class="sig-paren">(</span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">buffer</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">GetPath</span><span class="sig-paren">(</span><a class="reference internal" href="path.html#_CPPv45BPath" title="BPath"><span class="n">BPath</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><p>These functions return the leaf name and full pathname of the
<span class="hclass">BEntry</span>’s entry. The arguments must be allocated before they’re
passed in.</p>
<p><span class="hmethod">GetName()</span> copies the leaf name into <span class="hparameter">buffer</span>. The
<span class="hparameter">buffer</span> must be large enough to accommodate the name;
<code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_FILE_NAME_LENGTH</span></code> is a 100% safe bet:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span><span class="w"> </span><span class="n">name</span><span class="p">[</span><span class="n">B_FILE_NAME_LENGTH</span><span class="p">];</span><span class="w"></span>
<span class="n">entry</span><span class="p">.</span><span class="n">GetName</span><span class="p">(</span><span class="n">name</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>If <span class="hmethod">GetName()</span> fails, <span class="hparameter">*buffer</span> is pointed at
<span class="cpp-expr sig sig-inline cpp"><span class="n">NULL</span></span>.</p>
<p><span class="hmethod">GetPath()</span> takes the entry’s full pathname and initializes the
<a class="reference internal" href="path.html#_CPPv45BPath" title="BPath"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BPath</span></code></a> argument with it. To retrieve the path from the
<a class="reference internal" href="path.html#_CPPv45BPath" title="BPath"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BPath</span></code></a> object, call <a class="reference internal" href="path.html#_CPPv4NK5BPath4PathEv" title="BPath::Path"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">BPath::Path()</span></code></a>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">BPath</span><span class="w"> </span><span class="n">path</span><span class="p">;</span><span class="w"></span>
<span class="n">entry</span><span class="p">.</span><span class="n">GetPath</span><span class="p">(</span><span class="o">&amp;</span><span class="n">path</span><span class="p">);</span><span class="w"></span>
<span class="n">printf</span><span class="p">(</span><span class="s">&quot;&gt;Entry pathname: %sn&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">path</span><span class="p">.</span><span class="n">Path</span><span class="p">());</span><span class="w"></span>
</pre></div>
</div>
<p>If <span class="hmethod">GetPath()</span> fails, the argument is <a class="reference internal" href="#_CPPv4N6BEntry5UnsetEv" title="BEntry::Unset"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Unset()</span></code></a>.</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>The information was successfully retrieved.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_NO_INIT</span></code>.</p></td>
<td><p>The <span class="hclass">BEntry</span> isn’t initialized.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_BUSY</span></code></p></td>
<td><p>(<span class="hmethod">GetPath()</span> only). A directory in the entry’s path is locked.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4NK6BEntry9GetParentEP6BEntry">
</section>
<h3>
GetParent()</h3><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">GetParent</span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">entry</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span><br /><a class="reference internal" href="the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">GetParent</span><span class="sig-paren">(</span><a class="reference internal" href="directory.html#_CPPv410BDirectory" title="BDirectory"><span class="n">BDirectory</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">dir</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><p>Gets the directory, as a <span class="hclass">BEntry</span> or <a class="reference internal" href="directory.html#_CPPv410BDirectory" title="BDirectory"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BDirectory</span></code></a>
object, in which the object’s entry lives. The argument must be allocated
before it’s passed in.</p>
<p>If the function is unsuccessful, the argument is <a class="reference internal" href="#_CPPv4N6BEntry5UnsetEv" title="BEntry::Unset"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Unset()</span></code></a>. Because of this, you should be particularly careful if
you’re using the <span class="hclass">BEntry</span>-argument version to destructively get a
<span class="hclass">BEntry</span>’s parent:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">entry</span><span class="p">.</span><span class="n">GetParent</span><span class="p">(</span><span class="o">&amp;</span><span class="n">entry</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">B_OK</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="cm">/* you just lost &#39;entry&#39; */</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>This example <strong>is</strong> legal; for example, you can use destructive iteration
to loop your way up to the root directory. When you reach the root (“/”),
<span class="hmethod">GetParent()</span> returns <code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_ENTRY_NOT_FOUND</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">BEntry</span><span class="w"> </span><span class="n">entry</span><span class="p">(</span><span class="s">&quot;/boot/home/fido&quot;</span><span class="p">);</span><span class="w"></span>
<span class="n">status_t</span><span class="w"> </span><span class="n">err</span><span class="p">;</span><span class="w"></span>
<span class="kt">char</span><span class="w"> </span><span class="n">name</span><span class="p">[</span><span class="n">B_FILE_NAME_LENGTH</span><span class="p">];</span><span class="w"></span>

<span class="cm">/* Spit out the path components backwards, one at a time. */</span><span class="w"></span>
<span class="k">do</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">entry</span><span class="p">.</span><span class="n">GetName</span><span class="p">(</span><span class="n">name</span><span class="p">);</span><span class="w"></span>
<span class="w">   </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;&gt; %sn&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">err</span><span class="o">=</span><span class="n">entry</span><span class="p">.</span><span class="n">GetParent</span><span class="p">(</span><span class="o">&amp;</span><span class="n">entry</span><span class="p">))</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">B_OK</span><span class="p">);</span><span class="w"></span>

<span class="cm">/* Complain for reasons other than reaching the top. */</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">B_ENTRY_NOT_FOUND</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;&gt;&gt; Error: %sn&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">strerror</span><span class="p">(</span><span class="n">err</span><span class="p">));</span><span class="w"></span>
</pre></div>
</div>
<p>This produces:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt; fido
&gt; home
&gt; boot
&gt; /
</pre></div>
</div>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>The information was successfully retrieved.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_NO_INIT</span></code>.</p></td>
<td><p>This <span class="hclass">BEntry</span> isn’t initialized.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_ENTRY_NOT_FOUND</span></code>.</p></td>
<td><p>Attempt to get the parent of the root directory.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_NO_MORE_FDS</span></code>.</p></td>
<td><p>Couldn’t get another file descriptor.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4NK6BEntry6GetRefEP9entry_ref">
</section>
<h3>
GetRef()</h3><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">GetRef</span><span class="sig-paren">(</span><a class="reference internal" href="#_CPPv4N6BEntry9entry_refEv" title="BEntry::entry_ref"><span class="n">entry_ref</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">ref</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><p>Gets the <span class="htype">entry_ref</span> for the object’s entry; <span class="hparameter">ref</span> must be
allocated before it’s passed in. As with <span class="hclass">BEntry</span> objects,
<span class="htype">entry_ref</span> structures can be abstract—getting a valid
<span class="htype">entry_ref</span> does <strong>not</strong> guarantee that the entry actually exists.</p>
<p>If the function isn’t successful, <span class="hparameter">ref</span> is unset.</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>The <span class="htype">entry_ref</span> was successfully retrieved.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_NO_INIT</span></code>.</p></td>
<td><p>This object isn’t initialized.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_NO_MEMORY</span></code>.</p></td>
<td><p>Storage for the <span class="htype">entry_ref</span>’s name couldn’t be allocated.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4NK6BEntry7GetStatEP4stat">
</section>
<h3>
GetStat()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><a class="reference internal" href="the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">GetStat</span><span class="sig-paren">(</span><span class="k">struct</span><span class="w"> </span><span class="n">stat</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">st</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><p><span class="hmethod">GetStat()</span> returns the <span class="htype">stat</span> structure for the entry.
The structure is copied into the <span class="hparameter">st</span> argument, which must be
allocated. The <a class="reference internal" href="statable.html#_CPPv49BStatable" title="BStatable"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BStatable</span></code></a> object does not cache the
<span class="htype">stat</span> structure; every time you call <span class="hmethod">GetStat()</span>, fresh
stat information is retrieved.</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>Success.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_NO_MEMORY</span></code>.</p></td>
<td><p>Couldn’t get the necessary resources to complete the transaction.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_BAD_VALUE</span></code>.</p></td>
<td><p>The entry doesn’t exist (abstract entry).</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4NK6BEntry9InitCheckEv">
</section>
<h3>
InitCheck()</h3><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">InitCheck</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><p>Returns the status of the previous construction, assignment operation, or
<a class="reference internal" href="#_CPPv4N6BEntry5SetToEPK9entry_refb" title="BEntry::SetTo"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetTo()</span></code></a> call.</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>The initialization was successful.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_NO_INIT</span></code>.</p></td>
<td><p>The object is uninitialized (this includes <a class="reference internal" href="#_CPPv4N6BEntry5UnsetEv" title="BEntry::Unset"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Unset()</span></code></a>).</p></td>
</tr>
<tr class="row-even"><td><p>Other errors.</p></td>
<td><p>See <a class="reference internal" href="#_CPPv4N6BEntry5SetToEPK9entry_refb" title="BEntry::SetTo"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">SetTo()</span></code></a></p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4N6BEntry6RemoveEv">
</section>
<h3>
Remove()</h3><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">Remove</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p><span class="hmethod">Remove()</span> “unlinks” the entry from its directory. The entry’s
node isn’t destroyed until all file descriptors that are open on the node
are closed. This means that if you create <a class="reference internal" href="file.html#_CPPv45BFile" title="BFile"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BFile</span></code></a> based on a
<span class="hclass">BEntry</span>, and then <span class="hmethod">Remove()</span> the <span class="hclass">BEntry</span>, the
<a class="reference internal" href="file.html#_CPPv45BFile" title="BFile"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BFile</span></code></a> will still be able to read and write the file’s data—the
<a class="reference internal" href="file.html#_CPPv45BFile" title="BFile"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BFile</span></code></a> has no way of knowing that the entry is gone. When the
<a class="reference internal" href="file.html#_CPPv45BFile" title="BFile"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BFile</span></code></a> is deleted, the node will be destroyed as well.</p>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p><span class="hmethod">Remove()</span> does <strong>not</strong> invalidate the <span class="hclass">BEntry</span>. It
simply makes it abstract (see “<span class="xref std std-ref">Abstract Entries</span>”).</p>
</div>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>Success.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_NO_INIT</span></code>.</p></td>
<td><p>The <span class="hclass">BEntry</span> is not initialized.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_BUSY</span></code>.</p></td>
<td><p>The entry’s directory is locked.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4N6BEntry6RenameEPKcb">
</section>
<section id="_CPPv4N6BEntry6MoveToEP10BDirectoryPKcb">
</section>
<h3>
Rename(), MoveTo()</h3><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">Rename</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span>, <span class="kt">bool</span><span class="w"> </span><span class="n sig-param">clobber</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">false</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">MoveTo</span><span class="sig-paren">(</span><a class="reference internal" href="directory.html#_CPPv410BDirectory" title="BDirectory"><span class="n">BDirectory</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">dir</span>, <span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">NULL</span>, <span class="kt">bool</span><span class="w"> </span><span class="n sig-param">clobber</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">false</span><span class="sig-paren">)</span></pre><p>These functions move the <span class="hclass">BEntry</span>’s entry and node to a new
location. In both cases, the <span class="hclass">BEntry</span> must not be abstract—you
can’t rename or move an abstract entry.</p>
<p><span class="hmethod">Rename()</span> moves the entry to a new name, as given by
<span class="hparameter">path</span>. <span class="hparameter">path</span> is usually a simple leaf name, but it can be
a relative path. In the former case (simple leaf) the entry is renamed
within its current directory. In the latter, the entry is moved into a
subdirectory of its current directory, as given by the argument.</p>
<p><span class="hmethod">MoveTo()</span> moves the entry to a different directory and
optionally renames the leaf. Again, <span class="hparameter">path</span> can be a simple leaf or
a relative path; in both cases, <span class="hparameter">path</span> is reckoned off of
<span class="hparameter">dir</span>. If path is <span class="cpp-expr sig sig-inline cpp"><span class="n">NULL</span></span>, the entry is moved to
<span class="hparameter">dir</span>, but retains its old leaf name.</p>
<p>If the entry’s new location is already taken, the clobber argument decides
whether the existing entry is removed to make way for yours. If it’s
<span class="cpp-expr sig sig-inline cpp"><span class="k">true</span></span>, the existing entry is removed; if it’s <span class="cpp-expr sig sig-inline cpp"><span class="k">false</span></span>,
the <span class="hmethod">Rename()</span> or <span class="hmethod">MoveTo()</span> function fails.</p>
<p>Upon success, this is updated to reflect the change to its entry. For
example, when you invoke <span class="hmethod">Rename()</span> on a <span class="hclass">BEntry</span>, the
name of <strong>that specific</strong> <span class="hclass">BEntry</span> object also changes. If the
rename or move-to isn’t successful, this isn’t altered.</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>Success.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_NO_INIT</span></code>.</p></td>
<td><p>The <span class="hclass">BEntry</span> is not initialized.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_ENTRY_NOT_FOUND</span></code>.</p></td>
<td><p>A directory to the new location doesn’t exist, or this is an abstract
entry.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_FILE_EXISTS</span></code>.</p></td>
<td><p>The new location is already taken (and you’re not clobbering).</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_BUSY</span></code>.</p></td>
<td><p>The directory that you’re moving the entry into is locked.</p></td>
</tr>
</tbody>
</table>
<section id="_CPPv4N6BEntry5SetToEPK9entry_refb">
</section>
<section id="_CPPv4N6BEntry5UnsetEv">
</section>
<h3>
SetTo(), Unset()</h3><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">SetTo</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6BEntry9entry_refEv" title="BEntry::entry_ref"><span class="n">entry_ref</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">ref</span>, <span class="kt">bool</span><span class="w"> </span><span class="n sig-param">traverse</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">false</span><span class="sig-paren">)</span><br /><a class="reference internal" href="the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">SetTo</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span>, <span class="kt">bool</span><span class="w"> </span><span class="n sig-param">traverse</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">false</span><span class="sig-paren">)</span><br /><a class="reference internal" href="the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">SetTo</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><a class="reference internal" href="directory.html#_CPPv410BDirectory" title="BDirectory"><span class="n">BDirectory</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">dir</span>, <span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span>, <span class="kt">bool</span><span class="w"> </span><span class="n sig-param">traverse</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="k">false</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">void</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">Unset</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Frees the <span class="hclass">BEntry</span>’s current entry reference, and initializes it
to refer to the entry identified by the argument(s):</p>
<ul class="simple">
<li><p>In the <span class="hparameter">ref</span> version, the <span class="hclass">BEntry</span> is initialized to refer
to the given <span class="htype">entry_ref</span>.</p></li>
<li><p>In the <span class="hparameter">path</span> version, <span class="hparameter">path</span> can be absolute or relative,
and can contain “.” and “..” elements. If <span class="hparameter">path</span> is relative, it’s
reckoned off of the current working directory.</p></li>
<li><p>In the <span class="hparameter">dir</span>/<span class="hparameter">path</span> version, <span class="hparameter">path</span> must be
relative. It’s reckoned off of the directory given by <span class="hparameter">dir</span>.</p></li>
</ul>
<p>The <span class="hparameter">traverse</span> argument is used to resolve (or not) entries that
are symlinks:</p>
<ul class="simple">
<li><p>If <span class="hparameter">traverse</span> is <span class="cpp-expr sig sig-inline cpp"><span class="k">true</span></span>, the link is resolved.</p></li>
<li><p>If <span class="hparameter">traverse</span> is <span class="cpp-expr sig sig-inline cpp"><span class="k">false</span></span>, the <span class="hclass">BEntry</span> refers to
the link itself.</p></li>
</ul>
<p>See “<span class="xref std std-ref">Initializing and Traversing</span>” for more information.</p>
<p>When you initialize a <span class="hclass">BEntry</span>, you’re describing a leaf name
within a directory. The directory <strong>must</strong> exist, but the leaf doesn’t have
to. This allows you to create a <span class="hclass">BEntry</span> to a file that doesn’t
exist (yet). See “<span class="xref std std-ref">Abstract Entries</span>” for more information.</p>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>Remember—successfully initializing a <span class="hclass">BEntry</span> consumes a file
descriptor. When you re-initialize, the old file descriptor is closed.</p>
</div>
<p><span class="hmethod">Unset()</span> removes the object’s association with its current
entry, and sets <a class="reference internal" href="#_CPPv4NK6BEntry9InitCheckEv" title="BEntry::InitCheck"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">InitCheck()</span></code></a> to
<code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_NO_INIT</span></code>.</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>The <span class="hclass">BEntry</span> was successfully initialized.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_BAD_VALUE</span></code>.</p></td>
<td><p>Bad argument value; uninitialized <span class="hparameter">ref</span> or <span class="hparameter">dir</span>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_ENTRY_NOT_FOUND</span></code>.</p></td>
<td><p>A directory in the path to the entry doesn’t exist.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_ENTRY_NOT_FOUND</span></code>.</p></td>
<td><p>The entry’s directory is locked.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="operators">
<h2>Operators<a class="headerlink" href="#operators" title="Permalink to this heading">¶</a></h2>
<h3>
</h3><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="w"> </span><span class="p">&amp;</span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="k">operator</span><span class="o">=</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="w"> </span><span class="p">&amp;</span><span class="n sig-param">entry</span><span class="sig-paren">)</span></pre><p>In the expression</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">BEntry</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p><span class="hclass">BEntry</span> <span class="hparameter">a</span> is initialized to refer to the same entry as
<span class="hparameter">b</span>. To gauge the success of the assignment, you should call
<a class="reference internal" href="#_CPPv4NK6BEntry9InitCheckEv" title="BEntry::InitCheck"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">InitCheck()</span></code></a> immediately afterwards.
Assigning a <span class="hclass">BEntry</span> to itself is safe.</p>
<p>Assigning from an uninitialized <span class="hclass">BEntry</span> is “successful”: The
assigned-to <span class="hclass">BEntry</span> will also be uninitialized
(<code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_NO_INIT</span></code>).</p>
<h3>
</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">bool</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="k">operator</span><span class="o">==</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="w"> </span><span class="p">&amp;</span><span class="n sig-param">entry</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="kt">bool</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="k">operator</span><span class="o">!=</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="w"> </span><span class="p">&amp;</span><span class="n sig-param">entry</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><p>Two <span class="hclass">BEntry</span> objects are said to be equal if they refer to the
same entry (even if the entry is abstract), or if they’re both
uninitialized.</p>
</section>
<section id="global-c-function">
<h2>Global C Function<a class="headerlink" href="#global-c-function" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4N6BEntry16get_ref_for_pathEPKcP9entry_ref">
</section>
<h3>
get_ref_for_path()</h3><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">get_ref_for_path</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">path</span>, <a class="reference internal" href="#_CPPv4N6BEntry9entry_refEv" title="BEntry::entry_ref"><span class="n">entry_ref</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">ref</span><span class="sig-paren">)</span></pre><p>Returns in <span class="hparameter">ref</span> an <span class="htype">entry_ref</span> for the file specified by
the <span class="hparameter">path</span> argument.</p>
<table class="colwidths-auto docutils align-left">
<thead>
<tr class="row-odd"><th class="head"><p>Return Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_OK</span></code>.</p></td>
<td><p>The ref was returned successfully.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_ENTRY_NOT_FOUND</span></code>.</p></td>
<td><p>The file wasn’t found, or the pathname string is empty.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref cpp cpp-enumerator docutils literal notranslate"><span class="pre">B_NO_MEMORY</span></code>.</p></td>
<td><p>Not enough memory.</p></td>
</tr>
<tr class="row-odd"><td><p>Other file errors.</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="defined-types">
<h2>Defined Types<a class="headerlink" href="#defined-types" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4N6BEntry9entry_refEv">
</section>
<section id="_CPPv4N6BEntryD0Ev">
</section>
<section id="_CPPv4N6BEntry8set_nameEPKc">
</section>
<h3>
entry_ref(), ~entry_ref(), set_name()</h3><p>Declared in: storage/Entry.h</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">entry_ref</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">               </span><span class="n">entry_ref</span><span class="p">();</span><span class="w"></span>
<span class="w">               </span><span class="n">entry_ref</span><span class="p">(</span><span class="kt">dev_t</span><span class="w"> </span><span class="n">device</span><span class="p">,</span><span class="w"> </span><span class="kt">ino_t</span><span class="w"> </span><span class="n">dir</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">name</span><span class="p">);</span><span class="w"></span>
<span class="w">               </span><span class="n">entry_ref</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">entry_ref</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ref</span><span class="p">);</span><span class="w"></span>
<span class="w">               </span><span class="o">~</span><span class="n">entry_ref</span><span class="p">();</span><span class="w"></span>

<span class="w">    </span><span class="n">status_t</span><span class="w">   </span><span class="nf">set_name</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">name</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kt">bool</span><span class="w">       </span><span class="k">operator</span><span class="o">==</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">entry_ref</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ref</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">bool</span><span class="w">       </span><span class="k">operator</span><span class="o">!=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">entry_ref</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ref</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">entry_ref</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">entry_ref</span><span class="o">&amp;</span><span class="w"> </span><span class="n">ref</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="kt">dev_t</span><span class="w">      </span><span class="n">device</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">ino_t</span><span class="w">      </span><span class="n">directory</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">char</span><span class="o">*</span><span class="w">      </span><span class="n">name</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>The <span class="htype">entry_ref</span> structure describes a single entry in a directory.</p>
<ul class="simple">
<li><p><span class="hparameter">device</span> contains the device number on which the entry’s target is
located.</p></li>
<li><p><span class="hparameter">directory</span> contains the inode of the directory that contains the
entry’s target.</p></li>
<li><p><span class="hparameter">name</span> contains the name of the entry.</p></li>
</ul>
<pre style="background: #f3f3f3; line-height: 2em"><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">entry_ref</span><span class="sig-paren">(</span><span class="sig-paren">)</span><br /><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">entry_ref</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><a class="reference internal" href="#_CPPv4N6BEntry9entry_refERK9entry_ref" title="BEntry::entry_ref"><span class="n">entry_ref</span></a><span class="w"> </span><span class="p">&amp;</span><span class="n sig-param">ref</span><span class="sig-paren">)</span><br /><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">entry_ref</span><span class="sig-paren">(</span><span class="n">dev_t</span><span class="w"> </span><span class="n sig-param">device</span>, <span class="n">ino_t</span><span class="w"> </span><span class="n sig-param">dir</span>, <span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">name</span><span class="sig-paren">)</span></pre><p>The constructor for the <span class="htype">entry_ref</span> structure. The first of these
creates an empty <span class="htype">entry_ref</span>, the second duplicates an existing
<span class="htype">entry_ref</span>, and the last version of the constructor accepts a
device number, directory inode number, and a file name and constructs an
<span class="htype">entry_ref</span> referring to that entry.</p>
<pre style="background: #f3f3f3; line-height: 2em"><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">~entry_ref</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>The destructor for <span class="htype">entry_ref</span>.</p>
<pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv46BEntry" title="BEntry"><span class="n">BEntry</span></a><span class="p">::</span></span><span class="n">set_name</span><span class="sig-paren">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">name</span><span class="sig-paren">)</span></pre><p>Lets you change the name of the file referred to by the <span class="htype">entry_ref</span>
structure.</p>
<p><span class="hmethod">operator ==</span></p>
<p>Lets you perform comparisons of <span class="htype">entry_ref</span> structures to see if
they refer to the same entry.</p>
<p><span class="hmethod">operator !=</span></p>
<p>Lets you test to see if two <span class="htype">entry_ref</span> structures refer to
different entries.</p>
</section>
</section>


        <div class="clearer"></div>
      </div>
          </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="directory.html">BDirectory</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="entry-list.html">BEntryList</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, Haiku, Inc..
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>