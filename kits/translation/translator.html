
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>BTranslator &#8212; The Haiku Book  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/haiku.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/code.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="BTranslatorRoster" href="translator-roster.html" />
    <link rel="prev" title="BTranslationUtils" href="translation-utils.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../../index.html">
          <span>API Documentation</span></a></h1>
        <h2 class="heading"><span>BTranslator</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="translation-utils.html">BTranslationUtils</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="translator-roster.html">BTranslatorRoster</a>&#160;&#160;»
        </p>

      </div>
        
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">BTranslator</a><ul>
<li><a class="reference internal" href="#constructor-and-destructor">Constructor and Destructor</a><ul>
<li><a class="reference internal" href="#_CPPv4N11BTranslator11BTranslatorEv">BTranslator</a></li>
<li><a class="reference internal" href="#_CPPv4N11BTranslatorD0Ev">~BTranslator</a></li>
</ul>
</li>
<li><a class="reference internal" href="#member-functions">Member Functions</a><ul>
<li><a class="reference internal" href="#_CPPv4N11BTranslator7AcquireEv">Acquire</a></li>
<li><a class="reference internal" href="#_CPPv4N11BTranslator7ReleaseEv">Release</a></li>
<li><a class="reference internal" href="#_CPPv4N11BTranslator14ReferenceCountEv">ReferenceCount</a></li>
<li><a class="reference internal" href="#_CPPv4N11BTranslator23GetConfigurationMessageEP8BMessage">GetConfigurationMessage</a></li>
<li><a class="reference internal" href="#_CPPv4N11BTranslator8IdentifyEP11BPositionIOPK18translation_formatP8BMessageP15translator_infoP6uint32">Identify</a></li>
<li><a class="reference internal" href="#_CPPv4NK11BTranslator12InputFormatsEP5int32">InputFormats</a></li>
<li><a class="reference internal" href="#_CPPv4NK11BTranslator13OutputFormatsEP5int32">OutputFormats</a></li>
<li><a class="reference internal" href="#_CPPv4N11BTranslator21MakeConfigurationViewEP8BMessagePP5BViewP5BRect">MakeConfigurationView</a></li>
<li><a class="reference internal" href="#_CPPv4N11BTranslator21MakeConfigurationViewEP11BPositionIOPK15translator_infoP8BMessageP6uint32P11BPositionIO">MakeConfigurationView</a></li>
<li><a class="reference internal" href="#_CPPv4NK11BTranslator14TranslatorInfoEv">TranslatorInfo</a></li>
<li><a class="reference internal" href="#_CPPv4NK11BTranslator14TranslatorNameEv">TranslatorName</a></li>
<li><a class="reference internal" href="#_CPPv4NK11BTranslator17TranslatorVersionEv">TranslatorVersion</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>

        </div>
      </div>
          <div class="bodywrapper">
      <div class="content" role="main">
        
  <section id="btranslator">
<h1 id="CPPv411BTranslator">BTranslator<a class="headerlink" href="#btranslator" title="Permalink to this heading">¶</a></h1>
<section id="constructor-and-destructor">
<h2>Constructor and Destructor<a class="headerlink" href="#constructor-and-destructor" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4N11BTranslator11BTranslatorEv">
</section>
<h3>
BTranslator()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv4N11BTranslator11BTranslatorEv" title="BTranslator::BTranslator"><span class="n">BTranslator</span></a><span class="p">::</span></span><span class="n">BTranslator</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>The constructor must create and return a new instance of your
<span class="hclass">BTranslator</span> subclass. Note that the constructor doesn’t
<a class="reference internal" href="#_CPPv4N11BTranslator7AcquireEv" title="BTranslator::Acquire"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Acquire()</span></code></a> the object it returns.</p>
<section id="_CPPv4N11BTranslatorD0Ev">
</section>
<h3>
~BTranslator()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BTranslator" title="BTranslator"><span class="n">BTranslator</span></a><span class="p">::</span></span><span class="n">~BTranslator</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><p>Note that the destructor is protected; you can only delete a
<span class="hclass">BTranslator</span> object from within the implementation of the
subclass. From outside the class, you call <a class="reference internal" href="#_CPPv4N11BTranslator7ReleaseEv" title="BTranslator::Release"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Release()</span></code></a>.</p>
</section>
<section id="member-functions">
<h2>Member Functions<a class="headerlink" href="#member-functions" title="Permalink to this heading">¶</a></h2>
<section id="_CPPv4N11BTranslator7AcquireEv">
</section>
<section id="_CPPv4N11BTranslator7ReleaseEv">
</section>
<section id="_CPPv4N11BTranslator14ReferenceCountEv">
</section>
<h3>
Acquire(), Release(), ReferenceCount()</h3><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="#_CPPv411BTranslator" title="BTranslator"><span class="n">BTranslator</span></a><span class="w"> </span><span class="p">*</span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BTranslator" title="BTranslator"><span class="n">BTranslator</span></a><span class="p">::</span></span><span class="n">Acquire</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><a class="reference internal" href="#_CPPv411BTranslator" title="BTranslator"><span class="n">BTranslator</span></a><span class="w"> </span><span class="p">*</span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BTranslator" title="BTranslator"><span class="n">BTranslator</span></a><span class="p">::</span></span><span class="n">Release</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="n">int32</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BTranslator" title="BTranslator"><span class="n">BTranslator</span></a><span class="p">::</span></span><span class="n">ReferenceCount</span><span class="sig-paren">(</span><span class="sig-paren">)</span></pre><div class="warning admonition">
<p class="admonition-title">Warning</p>
<p><span class="hmethod">ReferenceCount()</span> Is For Debugging use only!</p>
</div>
<p><span class="hmethod">Acquire()</span> and <span class="hmethod">Release()</span> increment and decrement the
object’s reference count. The count starts at 1 (i.e .the object is
implicitly acquired when it’s created); if the count falls to 0, the object
is deleted.</p>
<p>When you add a <span class="hclass">BTranslator</span> to a <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BTranslatorRoster</span></code>,
the <span class="hclass">BTranslator</span> is automatically <span class="hmethod">Acquire()</span>’d. When the
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BTranslatorRoster</span></code> is deleted, its <span class="hclass">BTranslator</span>s are
<span class="hmethod">Release()</span>’d. Thus, when you instantiate a <span class="hclass">BTranslator</span>
and add it to a <code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BTranslatorRoster</span></code>, you and the Roster maintain
joint ownership of the object. To give up ownership (such that the
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BTranslatorRoster</span></code> will destroy the object when the Roster
itself is destroyed), call <span class="hmethod">Release()</span> after adding the
<span class="hclass">BTranslator</span> to the Roster.</p>
<p><span class="hmethod">Acquire()</span> and <span class="hmethod">Release()</span> both return a pointer to the
<span class="hclass">BTranslator</span> that was just acquired or released. If
<span class="hmethod">Release()</span> caused the object to be deleted, it retruns
<span class="cpp-expr sig sig-inline cpp"><span class="n">NULL</span></span>.</p>
<p><span class="hmethod">ReferenceCount()</span>, which returns the current reference count
value, is meant for debugging purposes only. It is not thread-safe! Don’t
predicate your code on the value it returns.</p>
<section id="_CPPv4N11BTranslator23GetConfigurationMessageEP8BMessage">
</section>
<h3>
GetConfigurationMessage()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><a class="reference internal" href="../storage/the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BTranslator" title="BTranslator"><span class="n">BTranslator</span></a><span class="p">::</span></span><span class="n">GetConfigurationMessage</span><span class="sig-paren">(</span><a class="reference internal" href="../application/message.html#_CPPv48BMessage" title="BMessage"><span class="n">BMessage</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">ioExtension</span><span class="sig-paren">)</span></pre><p>Hook function that asks the object to write its current state into the
<a class="reference internal" href="../application/message.html#_CPPv48BMessage" title="BMessage"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">BMessage</span></code></a>* argument. See <span class="xref std std-ref">GetConfigMessage()</span> [Translator
Add-ons] for details.</p>
<section id="_CPPv4N11BTranslator8IdentifyEP11BPositionIOPK18translation_formatP8BMessageP15translator_infoP6uint32">
</section>
<h3>
Identify()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><a class="reference internal" href="../storage/the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BTranslator" title="BTranslator"><span class="n">BTranslator</span></a><span class="p">::</span></span><span class="n">Identify</span><span class="sig-paren">(</span><span class="n">BPositionIO</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">inSource</span>, <span class="k">const</span><span class="w"> </span><span class="n">translation_format</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">inFormat</span>, <a class="reference internal" href="../application/message.html#_CPPv48BMessage" title="BMessage"><span class="n">BMessage</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">ioExtension</span>, <span class="n">translator_info</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">outInfo</span>, <span class="n">uint32</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">outType</span><span class="sig-paren">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span></pre><p>Hook function called by the Translator Roster to ask the
<span class="hclass">BTranslator</span> if it knows how to convert <span class="hparameter">inSource</span> into
the type described by <span class="hparameter">outType</span>. See <span class="xref std std-ref">Identify()</span> [Translator
Add-ons] for details.</p>
<section id="_CPPv4NK11BTranslator12InputFormatsEP5int32">
</section>
<section id="_CPPv4NK11BTranslator13OutputFormatsEP5int32">
</section>
<h3>
InputFormats(), OutputFormats()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">translation_format</span><span class="w"> </span><span class="p">*</span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BTranslator" title="BTranslator"><span class="n">BTranslator</span></a><span class="p">::</span></span><span class="n">InputFormats</span><span class="sig-paren">(</span><span class="n">int32</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">count</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">translation_format</span><span class="w"> </span><span class="p">*</span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BTranslator" title="BTranslator"><span class="n">BTranslator</span></a><span class="p">::</span></span><span class="n">OutputFormats</span><span class="sig-paren">(</span><span class="n">int32</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">count</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span></pre><p>These functions should be implemented to return arrays of
<span class="htype">translation_format</span> structures that describe the formats that this
object supports. If the functions aren’t implemented, the object’s
<a class="reference internal" href="#_CPPv4N11BTranslator8IdentifyEP11BPositionIOPK18translation_formatP8BMessageP15translator_infoP6uint32" title="BTranslator::Identify"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Identify()</span></code></a> function will be called each
time an application requests a translation. Both functions should set
<span class="hparameter">count</span> to the number of elements in the format array.</p>
<div class="important admonition">
<p class="admonition-title">Important</p>
<p>Unlike the analogous translator add-on format arrays, the arrays returned
by these functions don’t have to be terminated by an empty
<span class="htype">translation_format</span> structure.</p>
</div>
<section id="_CPPv4N11BTranslator21MakeConfigurationViewEP8BMessagePP5BViewP5BRect">
</section>
<h3>
MakeConfigurationView()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><a class="reference internal" href="../storage/the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BTranslator" title="BTranslator"><span class="n">BTranslator</span></a><span class="p">::</span></span><span class="n">MakeConfigurationView</span><span class="sig-paren">(</span><a class="reference internal" href="../application/message.html#_CPPv48BMessage" title="BMessage"><span class="n">BMessage</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">ioExtension</span>, <a class="reference internal" href="../interface/view.html#_CPPv45BView" title="BView"><span class="n">BView</span></a><span class="w"> </span><span class="p">*</span><span class="p">*</span><span class="n sig-param">outView</span>, <a class="reference internal" href="../interface/rect.html#_CPPv45BRect" title="BRect"><span class="n">BRect</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">outExtent</span><span class="sig-paren">)</span></pre><p>Hook function that lets the <span class="hclass">BTranslator</span> supply a configuration
view. See <span class="xref std std-ref">MakeConfig()</span> [Translator Add-ons] for details.</p>
<section id="_CPPv4N11BTranslator21MakeConfigurationViewEP11BPositionIOPK15translator_infoP8BMessageP6uint32P11BPositionIO">
</section>
<h3>
MakeConfigurationView()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><a class="reference internal" href="../storage/the-node-monitor.html#_CPPv48status_t10BMessenger" title="status_t"><span class="n">status_t</span></a><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BTranslator" title="BTranslator"><span class="n">BTranslator</span></a><span class="p">::</span></span><span class="n">MakeConfigurationView</span><span class="sig-paren">(</span><span class="n">BPositionIO</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">inSource</span>, <span class="k">const</span><span class="w"> </span><span class="n">translator_info</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">inInfo</span>, <a class="reference internal" href="../application/message.html#_CPPv48BMessage" title="BMessage"><span class="n">BMessage</span></a><span class="w"> </span><span class="p">*</span><span class="n sig-param">ioExtension</span>, <span class="n">uint32</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">outType</span>, <span class="n">BPositionIO</span><span class="w"> </span><span class="p">*</span><span class="n sig-param">outDestination</span><span class="sig-paren">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span></pre><p>Hook function that asks the <span class="hclass">BTranslator</span> to translate data from
<span class="hparameter">inSource</span> to format <span class="hparameter">outType</span>, writing the output to
<span class="hparameter">outDestination</span>. See <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Translate()</span></code> [Translator Add-ons] for details.</p>
<section id="_CPPv4NK11BTranslator14TranslatorInfoEv">
</section>
<section id="_CPPv4NK11BTranslator14TranslatorNameEv">
</section>
<section id="_CPPv4NK11BTranslator17TranslatorVersionEv">
</section>
<h3>
TranslatorInfo(), TranslatorName(), TranslatorVersion()</h3><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BTranslator" title="BTranslator"><span class="n">BTranslator</span></a><span class="p">::</span></span><span class="n">TranslatorInfo</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="p">*</span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BTranslator" title="BTranslator"><span class="n">BTranslator</span></a><span class="p">::</span></span><span class="n">TranslatorName</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span></pre><pre style="background: #f3f3f3; line-height: 2em"><span class="k">virtual</span><span class="w"> </span><span class="n">int32</span><span class="w"> </span><span class="sig-prename descclassname"><a class="reference internal" href="#_CPPv411BTranslator" title="BTranslator"><span class="n">BTranslator</span></a><span class="p">::</span></span><span class="n">TranslatorVersion</span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="m">0</span></pre><p><span class="hmethod">TranslatorInfo()</span> returns a pointer to the translator’s long
name, e.g. “aiff translator by the Pie Man (pie&#64;the.man)”.</p>
<p><span class="hmethod">TranslatorName()</span> returns a pointer to the translator’s short
name, e.g. “aiff translator”. The short name should be appropriate for
display in a menu.</p>
<p><span class="hmethod">TranslatorVersion()</span> gives an “MM.mm” version number for the
translator. For example, a <span class="hmethod">TranslatorVersion()</span> of 314 is
interpreted as version 3.14.</p>
</section>
</section>


        <div class="clearer"></div>
      </div>
          </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="translation-utils.html">BTranslationUtils</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="translator-roster.html">BTranslatorRoster</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, Haiku, Inc..
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>